{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@blomstra/realtime/Pusher/webpack/universalModuleDefinition","webpack://@blomstra/realtime/Pusher/webpack/bootstrap","webpack://@blomstra/realtime/Pusher/node_modules/@stablelib/base64/base64.ts","webpack://@blomstra/realtime/Pusher/node_modules/@stablelib/utf8/utf8.ts","webpack://@blomstra/realtime/Pusher/src/core/pusher.js","webpack://@blomstra/realtime/Pusher/src/runtimes/web/dom/script_receiver_factory.ts","webpack://@blomstra/realtime/Pusher/src/core/defaults.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/dom/dependency_loader.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/dom/dependencies.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/url_store.ts","webpack://@blomstra/realtime/Pusher/src/core/auth/options.ts","webpack://@blomstra/realtime/Pusher/src/core/errors.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/isomorphic/auth/xhr_auth.ts","webpack://@blomstra/realtime/Pusher/src/core/base64.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/timers/abstract_timer.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/timers/index.ts","webpack://@blomstra/realtime/Pusher/src/core/util.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/collections.ts","webpack://@blomstra/realtime/Pusher/src/core/logger.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/auth/jsonp_auth.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/dom/script_request.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/dom/jsonp_request.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/timeline/jsonp_timeline.ts","webpack://@blomstra/realtime/Pusher/src/core/transports/url_schemes.ts","webpack://@blomstra/realtime/Pusher/src/core/events/callback_registry.ts","webpack://@blomstra/realtime/Pusher/src/core/events/dispatcher.ts","webpack://@blomstra/realtime/Pusher/src/core/transports/transport_connection.ts","webpack://@blomstra/realtime/Pusher/src/core/transports/transport.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/isomorphic/transports/transports.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/transports/transports.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/net_info.ts","webpack://@blomstra/realtime/Pusher/src/core/transports/assistant_to_the_transport_manager.ts","webpack://@blomstra/realtime/Pusher/src/core/connection/protocol/protocol.ts","webpack://@blomstra/realtime/Pusher/src/core/connection/connection.ts","webpack://@blomstra/realtime/Pusher/src/core/connection/handshake/index.ts","webpack://@blomstra/realtime/Pusher/src/core/timeline/timeline_sender.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/channel.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/private_channel.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/members.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/presence_channel.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/encrypted_channel.ts","webpack://@blomstra/realtime/Pusher/src/core/connection/connection_manager.ts","webpack://@blomstra/realtime/Pusher/src/core/channels/channels.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/factory.ts","webpack://@blomstra/realtime/Pusher/src/core/transports/transport_manager.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/sequential_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/best_connected_ever_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/cached_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/delayed_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/if_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/first_connected_strategy.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/default_strategy.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/transports/transport_connection_initializer.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/http/http_xdomain_request.ts","webpack://@blomstra/realtime/Pusher/src/core/http/http_request.ts","webpack://@blomstra/realtime/Pusher/src/core/http/state.ts","webpack://@blomstra/realtime/Pusher/src/core/http/http_socket.ts","webpack://@blomstra/realtime/Pusher/src/core/http/http_streaming_socket.ts","webpack://@blomstra/realtime/Pusher/src/core/http/http_polling_socket.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/isomorphic/http/http_xhr_request.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/isomorphic/http/http.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/http/http.ts","webpack://@blomstra/realtime/Pusher/src/runtimes/web/runtime.ts","webpack://@blomstra/realtime/Pusher/src/core/timeline/level.ts","webpack://@blomstra/realtime/Pusher/src/core/timeline/timeline.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/transport_strategy.ts","webpack://@blomstra/realtime/Pusher/src/core/strategies/strategy_builder.ts","webpack://@blomstra/realtime/Pusher/src/core/auth/user_authenticator.ts","webpack://@blomstra/realtime/Pusher/src/core/auth/channel_authorizer.ts","webpack://@blomstra/realtime/Pusher/src/core/auth/deprecated_channel_authorizer.ts","webpack://@blomstra/realtime/Pusher/src/core/config.ts","webpack://@blomstra/realtime/Pusher/src/core/utils/flat_promise.ts","webpack://@blomstra/realtime/Pusher/src/core/user.ts","webpack://@blomstra/realtime/Pusher/src/core/pusher.ts","webpack://@blomstra/realtime/./src/forum/extend/Application.js","webpack://@blomstra/realtime/./src/forum/extend/Discussion.ts","webpack://@blomstra/realtime/./src/forum/extend/Discussion/NewActivity.js","webpack://@blomstra/realtime/./src/forum/extend/Discussion/TypingIndicator.js","webpack://@blomstra/realtime/./src/forum/extend/DiscussionList.ts","webpack://@blomstra/realtime/./src/forum/extend/DiscussionList/NewActivity.js","webpack://@blomstra/realtime/./src/forum/extend/DiscussionList/WebsocketUpdates.ts","webpack://@blomstra/realtime/./src/forum/extend/Post.js","webpack://@blomstra/realtime/./src/forum/extend/Post/Flagged.js","webpack://@blomstra/realtime/./src/forum/extend/User.js","webpack://@blomstra/realtime/./src/forum/extend/User/Notification.js","webpack://@blomstra/realtime/./src/forum/extend/User/RealtimeUserPreferences.tsx","webpack://@blomstra/realtime/./src/forum/extend/User/extendUserPreferences.tsx","webpack://@blomstra/realtime/./src/forum/index.ts","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/Application']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/Model']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/components/Button']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/extend']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/models/User']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['flags/components/FlagsDropdown']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/app']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/NotificationsDropdown']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/PostStream']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/models/Discussion']\"","webpack://@blomstra/realtime/external root \"flarum.core.compat['forum/models/Post']\"","webpack://@blomstra/realtime/./node_modules/lodash-es/_Symbol.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_baseGetTag.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_baseTrim.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_freeGlobal.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_getRawTag.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_objectToString.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_root.js","webpack://@blomstra/realtime/./node_modules/lodash-es/_trimmedEndIndex.js","webpack://@blomstra/realtime/./node_modules/lodash-es/debounce.js","webpack://@blomstra/realtime/./node_modules/lodash-es/isObject.js","webpack://@blomstra/realtime/./node_modules/lodash-es/isObjectLike.js","webpack://@blomstra/realtime/./node_modules/lodash-es/isSymbol.js","webpack://@blomstra/realtime/./node_modules/lodash-es/now.js","webpack://@blomstra/realtime/./node_modules/lodash-es/throttle.js","webpack://@blomstra/realtime/./node_modules/lodash-es/toNumber.js","webpack://@blomstra/realtime/webpack/bootstrap","webpack://@blomstra/realtime/webpack/runtime/compat get default export","webpack://@blomstra/realtime/webpack/runtime/define property getters","webpack://@blomstra/realtime/webpack/runtime/hasOwnProperty shorthand","webpack://@blomstra/realtime/webpack/runtime/make namespace object"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Pusher\"] = factory();\n\telse\n\t\troot[\"Pusher\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\n/**\n * Package base64 implements Base64 encoding and decoding.\n */\n\n// Invalid character used in decoding to indicate\n// that the character to decode is out of range of\n// alphabet and cannot be decoded.\nconst INVALID_BYTE = 256;\n\n/**\n * Implements standard Base64 encoding.\n *\n * Operates in constant time.\n */\nexport class Coder {\n    // TODO(dchest): methods to encode chunk-by-chunk.\n\n    constructor(private _paddingCharacter = \"=\") { }\n\n    encodedLength(length: number): number {\n        if (!this._paddingCharacter) {\n            return (length * 8 + 5) / 6 | 0;\n        }\n        return (length + 2) / 3 * 4 | 0;\n    }\n\n    encode(data: Uint8Array): string {\n        let out = \"\";\n\n        let i = 0;\n        for (; i < data.length - 2; i += 3) {\n            let c = (data[i] << 16) | (data[i + 1] << 8) | (data[i + 2]);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            out += this._encodeByte((c >>> 1 * 6) & 63);\n            out += this._encodeByte((c >>> 0 * 6) & 63);\n        }\n\n        const left = data.length - i;\n        if (left > 0) {\n            let c = (data[i] << 16) | (left === 2 ? data[i + 1] << 8 : 0);\n            out += this._encodeByte((c >>> 3 * 6) & 63);\n            out += this._encodeByte((c >>> 2 * 6) & 63);\n            if (left === 2) {\n                out += this._encodeByte((c >>> 1 * 6) & 63);\n            } else {\n                out += this._paddingCharacter || \"\";\n            }\n            out += this._paddingCharacter || \"\";\n        }\n\n        return out;\n    }\n\n    maxDecodedLength(length: number): number {\n        if (!this._paddingCharacter) {\n            return (length * 6 + 7) / 8 | 0;\n        }\n        return length / 4 * 3 | 0;\n    }\n\n    decodedLength(s: string): number {\n        return this.maxDecodedLength(s.length - this._getPaddingLength(s));\n    }\n\n    decode(s: string): Uint8Array {\n        if (s.length === 0) {\n            return new Uint8Array(0);\n        }\n        const paddingLength = this._getPaddingLength(s);\n        const length = s.length - paddingLength;\n        const out = new Uint8Array(this.maxDecodedLength(length));\n        let op = 0;\n        let i = 0;\n        let haveBad = 0;\n        let v0 = 0, v1 = 0, v2 = 0, v3 = 0;\n        for (; i < length - 4; i += 4) {\n            v0 = this._decodeChar(s.charCodeAt(i + 0));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n            haveBad |= v2 & INVALID_BYTE;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (i < length - 1) {\n            v0 = this._decodeChar(s.charCodeAt(i));\n            v1 = this._decodeChar(s.charCodeAt(i + 1));\n            out[op++] = (v0 << 2) | (v1 >>> 4);\n            haveBad |= v0 & INVALID_BYTE;\n            haveBad |= v1 & INVALID_BYTE;\n        }\n        if (i < length - 2) {\n            v2 = this._decodeChar(s.charCodeAt(i + 2));\n            out[op++] = (v1 << 4) | (v2 >>> 2);\n            haveBad |= v2 & INVALID_BYTE;\n        }\n        if (i < length - 3) {\n            v3 = this._decodeChar(s.charCodeAt(i + 3));\n            out[op++] = (v2 << 6) | v3;\n            haveBad |= v3 & INVALID_BYTE;\n        }\n        if (haveBad !== 0) {\n            throw new Error(\"Base64Coder: incorrect characters for decoding\");\n        }\n        return out;\n    }\n\n    // Standard encoding have the following encoded/decoded ranges,\n    // which we need to convert between.\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  +   /\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   43  47\n    //\n\n    // Encode 6 bits in b into a new character.\n    protected _encodeByte(b: number): string {\n        // Encoding uses constant time operations as follows:\n        //\n        // 1. Define comparison of A with B using (A - B) >>> 8:\n        //          if A > B, then result is positive integer\n        //          if A <= B, then result is 0\n        //\n        // 2. Define selection of C or 0 using bitwise AND: X & C:\n        //          if X == 0, then result is 0\n        //          if X != 0, then result is C\n        //\n        // 3. Start with the smallest comparison (b >= 0), which is always\n        //    true, so set the result to the starting ASCII value (65).\n        //\n        // 4. Continue comparing b to higher ASCII values, and selecting\n        //    zero if comparison isn't true, otherwise selecting a value\n        //    to add to result, which:\n        //\n        //          a) undoes the previous addition\n        //          b) provides new value to add\n        //\n        let result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 43);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 43) - 63 + 47);\n\n        return String.fromCharCode(result);\n    }\n\n    // Decode a character code into a byte.\n    // Must return 256 if character is out of alphabet range.\n    protected _decodeChar(c: number): number {\n        // Decoding works similar to encoding: using the same comparison\n        // function, but now it works on ranges: result is always incremented\n        // by value, but this value becomes zero if the range is not\n        // satisfied.\n        //\n        // Decoding starts with invalid value, 256, which is then\n        // subtracted when the range is satisfied. If none of the ranges\n        // apply, the function returns 256, which is then checked by\n        // the caller to throw error.\n        let result = INVALID_BYTE; // start with invalid character\n\n        // c == 43 (c > 42 and c < 44)\n        result += (((42 - c) & (c - 44)) >>> 8) & (-INVALID_BYTE + c - 43 + 62);\n        // c == 47 (c > 46 and c < 48)\n        result += (((46 - c) & (c - 48)) >>> 8) & (-INVALID_BYTE + c - 47 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n\n        return result;\n    }\n\n    private _getPaddingLength(s: string): number {\n        let paddingLength = 0;\n        if (this._paddingCharacter) {\n            for (let i = s.length - 1; i >= 0; i--) {\n                if (s[i] !== this._paddingCharacter) {\n                    break;\n                }\n                paddingLength++;\n            }\n            if (s.length < 4 || paddingLength > 2) {\n                throw new Error(\"Base64Coder: incorrect padding\");\n            }\n        }\n        return paddingLength;\n    }\n\n}\n\nconst stdCoder = new Coder();\n\nexport function encode(data: Uint8Array): string {\n    return stdCoder.encode(data);\n}\n\nexport function decode(s: string): Uint8Array {\n    return stdCoder.decode(s);\n}\n\n/**\n * Implements URL-safe Base64 encoding.\n * (Same as Base64, but '+' is replaced with '-', and '/' with '_').\n *\n * Operates in constant time.\n */\nexport class URLSafeCoder extends Coder {\n    // URL-safe encoding have the following encoded/decoded ranges:\n    //\n    // ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789  -   _\n    // Index:   0 - 25                    26 - 51              52 - 61   62  63\n    // ASCII:  65 - 90                    97 - 122             48 - 57   45  95\n    //\n\n    protected _encodeByte(b: number): string {\n        let result = b;\n        // b >= 0\n        result += 65;\n        // b > 25\n        result += ((25 - b) >>> 8) & ((0 - 65) - 26 + 97);\n        // b > 51\n        result += ((51 - b) >>> 8) & ((26 - 97) - 52 + 48);\n        // b > 61\n        result += ((61 - b) >>> 8) & ((52 - 48) - 62 + 45);\n        // b > 62\n        result += ((62 - b) >>> 8) & ((62 - 45) - 63 + 95);\n\n        return String.fromCharCode(result);\n    }\n\n    protected _decodeChar(c: number): number {\n        let result = INVALID_BYTE;\n\n        // c == 45 (c > 44 and c < 46)\n        result += (((44 - c) & (c - 46)) >>> 8) & (-INVALID_BYTE + c - 45 + 62);\n        // c == 95 (c > 94 and c < 96)\n        result += (((94 - c) & (c - 96)) >>> 8) & (-INVALID_BYTE + c - 95 + 63);\n        // c > 47 and c < 58\n        result += (((47 - c) & (c - 58)) >>> 8) & (-INVALID_BYTE + c - 48 + 52);\n        // c > 64 and c < 91\n        result += (((64 - c) & (c - 91)) >>> 8) & (-INVALID_BYTE + c - 65 + 0);\n        // c > 96 and c < 123\n        result += (((96 - c) & (c - 123)) >>> 8) & (-INVALID_BYTE + c - 97 + 26);\n\n        return result;\n    }\n}\n\nconst urlSafeCoder = new URLSafeCoder();\n\nexport function encodeURLSafe(data: Uint8Array): string {\n    return urlSafeCoder.encode(data);\n}\n\nexport function decodeURLSafe(s: string): Uint8Array {\n    return urlSafeCoder.decode(s);\n}\n\n\nexport const encodedLength = (length: number) =>\n    stdCoder.encodedLength(length);\n\nexport const maxDecodedLength = (length: number) =>\n    stdCoder.maxDecodedLength(length);\n\nexport const decodedLength = (s: string) =>\n    stdCoder.decodedLength(s);\n","// Copyright (C) 2016 Dmitry Chestnykh\n// MIT License. See LICENSE file for details.\n\n/**\n * Package utf8 implements UTF-8 encoding and decoding.\n */\n\nconst INVALID_UTF16 = \"utf8: invalid string\";\nconst INVALID_UTF8 = \"utf8: invalid source encoding\";\n\n/**\n * Encodes the given string into UTF-8 byte array.\n * Throws if the source string has invalid UTF-16 encoding.\n */\nexport function encode(s: string): Uint8Array {\n    // Calculate result length and allocate output array.\n    // encodedLength() also validates string and throws errors,\n    // so we don't need repeat validation here.\n    const arr = new Uint8Array(encodedLength(s));\n\n    let pos = 0;\n    for (let i = 0; i < s.length; i++) {\n        let c = s.charCodeAt(i);\n        if (c < 0x80) {\n            arr[pos++] = c;\n        } else if (c < 0x800) {\n            arr[pos++] = 0xc0 | c >> 6;\n            arr[pos++] = 0x80 | c & 0x3f;\n        } else if (c < 0xd800) {\n            arr[pos++] = 0xe0 | c >> 12;\n            arr[pos++] = 0x80 | (c >> 6) & 0x3f;\n            arr[pos++] = 0x80 | c & 0x3f;\n        } else {\n            i++; // get one more character\n            c = (c & 0x3ff) << 10;\n            c |= s.charCodeAt(i) & 0x3ff;\n            c += 0x10000;\n\n            arr[pos++] = 0xf0 | c >> 18;\n            arr[pos++] = 0x80 | (c >> 12) & 0x3f;\n            arr[pos++] = 0x80 | (c >> 6) & 0x3f;\n            arr[pos++] = 0x80 | c & 0x3f;\n        }\n    }\n    return arr;\n}\n\n/**\n * Returns the number of bytes required to encode the given string into UTF-8.\n * Throws if the source string has invalid UTF-16 encoding.\n */\nexport function encodedLength(s: string): number {\n    let result = 0;\n    for (let i = 0; i < s.length; i++) {\n        const c = s.charCodeAt(i);\n        if (c < 0x80) {\n            result += 1;\n        } else if (c < 0x800) {\n            result += 2;\n        } else if (c < 0xd800) {\n            result += 3;\n        } else if (c <= 0xdfff) {\n            if (i >= s.length - 1) {\n                throw new Error(INVALID_UTF16);\n            }\n            i++; // \"eat\" next character\n            result += 4;\n        } else {\n            throw new Error(INVALID_UTF16);\n        }\n    }\n    return result;\n}\n\n/**\n * Decodes the given byte array from UTF-8 into a string.\n * Throws if encoding is invalid.\n */\nexport function decode(arr: Uint8Array): string {\n    const chars: string[] = [];\n    for (let i = 0; i < arr.length; i++) {\n        let b = arr[i];\n\n        if (b & 0x80) {\n            let min;\n            if (b < 0xe0) {\n                // Need 1 more byte.\n                if (i >= arr.length) {\n                    throw new Error(INVALID_UTF8);\n                }\n                const n1 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x1f) << 6 | (n1 & 0x3f);\n                min = 0x80;\n            } else if (b < 0xf0) {\n                // Need 2 more bytes.\n                if (i >= arr.length - 1) {\n                    throw new Error(INVALID_UTF8);\n                }\n                const n1 = arr[++i];\n                const n2 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80 || (n2 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x0f) << 12 | (n1 & 0x3f) << 6 | (n2 & 0x3f);\n                min = 0x800;\n            } else if (b < 0xf8) {\n                // Need 3 more bytes.\n                if (i >= arr.length - 2) {\n                    throw new Error(INVALID_UTF8);\n                }\n                const n1 = arr[++i];\n                const n2 = arr[++i];\n                const n3 = arr[++i];\n                if ((n1 & 0xc0) !== 0x80 || (n2 & 0xc0) !== 0x80 || (n3 & 0xc0) !== 0x80) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b = (b & 0x0f) << 18 | (n1 & 0x3f) << 12 | (n2 & 0x3f) << 6 | (n3 & 0x3f);\n                min = 0x10000;\n            } else {\n                throw new Error(INVALID_UTF8);\n            }\n\n            if (b < min || (b >= 0xd800 && b <= 0xdfff)) {\n                throw new Error(INVALID_UTF8);\n            }\n\n            if (b >= 0x10000) {\n                // Surrogate pair.\n                if (b > 0x10ffff) {\n                    throw new Error(INVALID_UTF8);\n                }\n                b -= 0x10000;\n                chars.push(String.fromCharCode(0xd800 | (b >> 10)));\n                b = 0xdc00 | (b & 0x3ff);\n            }\n        }\n\n        chars.push(String.fromCharCode(b));\n    }\n    return chars.join(\"\");\n}\n","// required so we don't have to do require('pusher').default etc.\nmodule.exports = require('./pusher').default;\n","import ScriptReceiver from './script_receiver';\n\n/** Builds receivers for JSONP and Script requests.\n *\n * Each receiver is an object with following fields:\n * - number - unique (for the factory instance), numerical id of the receiver\n * - id - a string ID that can be used in DOM attributes\n * - name - name of the function triggering the receiver\n * - callback - callback function\n *\n * Receivers are triggered only once, on the first callback call.\n *\n * Receivers can be called by their name or by accessing factory object\n * by the number key.\n *\n * @param {String} prefix the prefix used in ids\n * @param {String} name the name of the object\n */\nexport class ScriptReceiverFactory {\n  lastId: number;\n  prefix: string;\n  name: string;\n\n  constructor(prefix: string, name: string) {\n    this.lastId = 0;\n    this.prefix = prefix;\n    this.name = name;\n  }\n\n  create(callback: Function): ScriptReceiver {\n    this.lastId++;\n\n    var number = this.lastId;\n    var id = this.prefix + number;\n    var name = this.name + '[' + number + ']';\n\n    var called = false;\n    var callbackWrapper = function() {\n      if (!called) {\n        callback.apply(null, arguments);\n        called = true;\n      }\n    };\n\n    this[number] = callbackWrapper;\n    return { number: number, id: id, name: name, callback: callbackWrapper };\n  }\n\n  remove(receiver: ScriptReceiver) {\n    delete this[receiver.number];\n  }\n}\n\nexport var ScriptReceivers = new ScriptReceiverFactory(\n  '_pusher_script_',\n  'Pusher.ScriptReceivers'\n);\n","import {\n  ChannelAuthorizationOptions,\n  UserAuthenticationOptions\n} from './auth/options';\nimport { AuthTransport } from './config';\n\nexport interface DefaultConfig {\n  VERSION: string;\n  PROTOCOL: number;\n  wsPort: number;\n  wssPort: number;\n  wsPath: string;\n  httpHost: string;\n  httpPort: number;\n  httpsPort: number;\n  httpPath: string;\n  stats_host: string;\n  authEndpoint: string;\n  authTransport: AuthTransport;\n  activityTimeout: number;\n  pongTimeout: number;\n  unavailableTimeout: number;\n  cluster: string;\n  userAuthentication: UserAuthenticationOptions;\n  channelAuthorization: ChannelAuthorizationOptions;\n\n  cdn_http?: string;\n  cdn_https?: string;\n  dependency_suffix?: string;\n}\n\nvar Defaults: DefaultConfig = {\n  VERSION: VERSION,\n  PROTOCOL: 7,\n\n  wsPort: 80,\n  wssPort: 443,\n  wsPath: '',\n  // DEPRECATED: SockJS fallback parameters\n  httpHost: 'sockjs.pusher.com',\n  httpPort: 80,\n  httpsPort: 443,\n  httpPath: '/pusher',\n  // DEPRECATED: Stats\n  stats_host: 'stats.pusher.com',\n  // DEPRECATED: Other settings\n  authEndpoint: '/pusher/auth',\n  authTransport: 'ajax',\n  activityTimeout: 120000,\n  pongTimeout: 30000,\n  unavailableTimeout: 10000,\n  cluster: 'mt1',\n  userAuthentication: {\n    endpoint: '/pusher/user-auth',\n    transport: 'ajax'\n  },\n  channelAuthorization: {\n    endpoint: '/pusher/auth',\n    transport: 'ajax'\n  },\n\n  // CDN configuration\n  cdn_http: CDN_HTTP,\n  cdn_https: CDN_HTTPS,\n  dependency_suffix: DEPENDENCY_SUFFIX\n};\n\nexport default Defaults;\n","import {\n  ScriptReceivers,\n  ScriptReceiverFactory\n} from './script_receiver_factory';\nimport Runtime from 'runtime';\nimport ScriptRequest from './script_request';\n\n/** Handles loading dependency files.\n *\n * Dependency loaders don't remember whether a resource has been loaded or\n * not. It is caller's responsibility to make sure the resource is not loaded\n * twice. This is because it's impossible to detect resource loading status\n * without knowing its content.\n *\n * Options:\n * - cdn_http - url to HTTP CND\n * - cdn_https - url to HTTPS CDN\n * - version - version of pusher-js\n * - suffix - suffix appended to all names of dependency files\n *\n * @param {Object} options\n */\nexport default class DependencyLoader {\n  options: any;\n  receivers: ScriptReceiverFactory;\n  loading: any;\n\n  constructor(options: any) {\n    this.options = options;\n    this.receivers = options.receivers || ScriptReceivers;\n    this.loading = {};\n  }\n\n  /** Loads the dependency from CDN.\n   *\n   * @param  {String} name\n   * @param  {Function} callback\n   */\n  load(name: string, options: any, callback: Function) {\n    var self = this;\n\n    if (self.loading[name] && self.loading[name].length > 0) {\n      self.loading[name].push(callback);\n    } else {\n      self.loading[name] = [callback];\n\n      var request = Runtime.createScriptRequest(self.getPath(name, options));\n      var receiver = self.receivers.create(function(error) {\n        self.receivers.remove(receiver);\n\n        if (self.loading[name]) {\n          var callbacks = self.loading[name];\n          delete self.loading[name];\n\n          var successCallback = function(wasSuccessful) {\n            if (!wasSuccessful) {\n              request.cleanup();\n            }\n          };\n          for (var i = 0; i < callbacks.length; i++) {\n            callbacks[i](error, successCallback);\n          }\n        }\n      });\n      request.send(receiver);\n    }\n  }\n\n  /** Returns a root URL for pusher-js CDN.\n   *\n   * @returns {String}\n   */\n  getRoot(options: any): string {\n    var cdn;\n    var protocol = Runtime.getDocument().location.protocol;\n    if ((options && options.useTLS) || protocol === 'https:') {\n      cdn = this.options.cdn_https;\n    } else {\n      cdn = this.options.cdn_http;\n    }\n    // make sure there are no double slashes\n    return cdn.replace(/\\/*$/, '') + '/' + this.options.version;\n  }\n\n  /** Returns a full path to a dependency file.\n   *\n   * @param {String} name\n   * @returns {String}\n   */\n  getPath(name: string, options: any): string {\n    return this.getRoot(options) + '/' + name + this.options.suffix + '.js';\n  }\n}\n","import { ScriptReceiverFactory } from './script_receiver_factory';\nimport Defaults from 'core/defaults';\nimport DependencyLoader from './dependency_loader';\n\nexport var DependenciesReceivers = new ScriptReceiverFactory(\n  '_pusher_dependencies',\n  'Pusher.DependenciesReceivers'\n);\n\nexport var Dependencies = new DependencyLoader({\n  cdn_http: Defaults.cdn_http,\n  cdn_https: Defaults.cdn_https,\n  version: Defaults.VERSION,\n  suffix: Defaults.dependency_suffix,\n  receivers: DependenciesReceivers\n});\n","/**\n * A place to store help URLs for error messages etc\n */\n\nconst urlStore = {\n  baseUrl: 'https://pusher.com',\n  urls: {\n    authenticationEndpoint: {\n      path: '/docs/channels/server_api/authenticating_users'\n    },\n    authorizationEndpoint: {\n      path: '/docs/channels/server_api/authorizing-users/'\n    },\n    javascriptQuickStart: {\n      path: '/docs/javascript_quick_start'\n    },\n    triggeringClientEvents: {\n      path: '/docs/client_api_guide/client_events#trigger-events'\n    },\n    encryptedChannelSupport: {\n      fullUrl:\n        'https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support'\n    }\n  }\n};\n\n/** Builds a consistent string with links to pusher documentation\n *\n * @param {string} key - relevant key in the url_store.urls object\n * @return {string} suffix string to append to log message\n */\nconst buildLogSuffix = function(key: string): string {\n  const urlPrefix = 'See:';\n  const urlObj = urlStore.urls[key];\n  if (!urlObj) return '';\n\n  let url;\n  if (urlObj.fullUrl) {\n    url = urlObj.fullUrl;\n  } else if (urlObj.path) {\n    url = urlStore.baseUrl + urlObj.path;\n  }\n\n  if (!url) return '';\n  return `${urlPrefix} ${url}`;\n};\n\nexport default { buildLogSuffix };\n","export enum AuthRequestType {\n  UserAuthentication = 'user-authentication',\n  ChannelAuthorization = 'channel-authorization'\n}\n\nexport interface ChannelAuthorizationData {\n  auth: string;\n  channel_data?: string;\n  shared_secret?: string;\n}\n\nexport type ChannelAuthorizationCallback = (\n  error: Error | null,\n  authData: ChannelAuthorizationData | null\n) => void;\n\nexport interface ChannelAuthorizationRequestParams {\n  socketId: string;\n  channelName: string;\n}\n\nexport interface ChannelAuthorizationHandler {\n  (\n    params: ChannelAuthorizationRequestParams,\n    callback: ChannelAuthorizationCallback\n  ): void;\n}\n\nexport interface UserAuthenticationData {\n  auth: string;\n  user_data: string;\n}\n\nexport type UserAuthenticationCallback = (\n  error: Error | null,\n  authData: UserAuthenticationData | null\n) => void;\n\nexport interface UserAuthenticationRequestParams {\n  socketId: string;\n}\n\nexport interface UserAuthenticationHandler {\n  (\n    params: UserAuthenticationRequestParams,\n    callback: UserAuthenticationCallback\n  ): void;\n}\n\nexport type AuthTransportCallback =\n  | ChannelAuthorizationCallback\n  | UserAuthenticationCallback;\n\nexport interface AuthOptionsT<AuthHandler> {\n  transport: 'ajax' | 'jsonp';\n  endpoint: string;\n  params?: any;\n  headers?: any;\n  customHandler?: AuthHandler;\n}\n\nexport declare type UserAuthenticationOptions = AuthOptionsT<\n  UserAuthenticationHandler\n>;\nexport declare type ChannelAuthorizationOptions = AuthOptionsT<\n  ChannelAuthorizationHandler\n>;\n\nexport interface InternalAuthOptions {\n  transport: 'ajax' | 'jsonp';\n  endpoint: string;\n  params?: any;\n  headers?: any;\n}\n","/** Error classes used throughout the library. */\n// https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\nexport class BadEventName extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\nexport class BadChannelName extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n\nexport class RequestTimedOut extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class TransportPriorityTooLow extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class TransportClosed extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class UnsupportedFeature extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class UnsupportedTransport extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class UnsupportedStrategy extends Error {\n  constructor(msg?: string) {\n    super(msg);\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\nexport class HTTPAuthError extends Error {\n  status: number;\n  constructor(status: number, msg?: string) {\n    super(msg);\n    this.status = status;\n\n    Object.setPrototypeOf(this, new.target.prototype);\n  }\n}\n","import TimelineSender from 'core/timeline/timeline_sender';\nimport * as Collections from 'core/utils/collections';\nimport Util from 'core/util';\nimport Runtime from 'runtime';\nimport { AuthTransport } from 'core/auth/auth_transports';\nimport AbstractRuntime from 'runtimes/interface';\nimport UrlStore from 'core/utils/url_store';\nimport {\n  AuthRequestType,\n  AuthTransportCallback,\n  InternalAuthOptions\n} from 'core/auth/options';\nimport { HTTPAuthError } from 'core/errors';\n\nconst ajax: AuthTransport = function(\n  context: AbstractRuntime,\n  query: string,\n  authOptions: InternalAuthOptions,\n  authRequestType: AuthRequestType,\n  callback: AuthTransportCallback\n) {\n  const xhr = Runtime.createXHR();\n  xhr.open('POST', authOptions.endpoint, true);\n\n  // add request headers\n  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n  for (var headerName in authOptions.headers) {\n    xhr.setRequestHeader(headerName, authOptions.headers[headerName]);\n  }\n\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n      if (xhr.status === 200) {\n        let data;\n        let parsed = false;\n\n        try {\n          data = JSON.parse(xhr.responseText);\n          parsed = true;\n        } catch (e) {\n          callback(\n            new HTTPAuthError(\n              200,\n              `JSON returned from ${authRequestType.toString()} endpoint was invalid, yet status code was 200. Data was: ${\n                xhr.responseText\n              }`\n            ),\n            null\n          );\n        }\n\n        if (parsed) {\n          // prevents double execution.\n          callback(null, data);\n        }\n      } else {\n        let suffix = '';\n        switch (authRequestType) {\n          case AuthRequestType.UserAuthentication:\n            suffix = UrlStore.buildLogSuffix('authenticationEndpoint');\n            break;\n          case AuthRequestType.ChannelAuthorization:\n            suffix = `Clients must be authenticated to join private or presence channels. ${UrlStore.buildLogSuffix(\n              'authorizationEndpoint'\n            )}`;\n            break;\n        }\n        callback(\n          new HTTPAuthError(\n            xhr.status,\n            `Unable to retrieve auth string from ${authRequestType.toString()} endpoint - ` +\n              `received status: ${xhr.status} from ${authOptions.endpoint}. ${suffix}`\n          ),\n          null\n        );\n      }\n    }\n  };\n\n  xhr.send(query);\n  return xhr;\n};\n\nexport default ajax;\n","export default function encode(s: any): string {\n  return btoa(utob(s));\n}\n\nvar fromCharCode = String.fromCharCode;\n\nvar b64chars =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nvar b64tab = {};\n\nfor (var i = 0, l = b64chars.length; i < l; i++) {\n  b64tab[b64chars.charAt(i)] = i;\n}\n\nvar cb_utob = function(c) {\n  var cc = c.charCodeAt(0);\n  return cc < 0x80\n    ? c\n    : cc < 0x800\n    ? fromCharCode(0xc0 | (cc >>> 6)) + fromCharCode(0x80 | (cc & 0x3f))\n    : fromCharCode(0xe0 | ((cc >>> 12) & 0x0f)) +\n      fromCharCode(0x80 | ((cc >>> 6) & 0x3f)) +\n      fromCharCode(0x80 | (cc & 0x3f));\n};\n\nvar utob = function(u) {\n  return u.replace(/[^\\x00-\\x7F]/g, cb_utob);\n};\n\nvar cb_encode = function(ccc) {\n  var padlen = [0, 2, 1][ccc.length % 3];\n  var ord =\n    (ccc.charCodeAt(0) << 16) |\n    ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8) |\n    (ccc.length > 2 ? ccc.charCodeAt(2) : 0);\n  var chars = [\n    b64chars.charAt(ord >>> 18),\n    b64chars.charAt((ord >>> 12) & 63),\n    padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\n    padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\n  ];\n  return chars.join('');\n};\n\nvar btoa =\n  global.btoa ||\n  function(b) {\n    return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\n  };\n","import TimedCallback from './timed_callback';\nimport { Delay, Scheduler, Canceller } from './scheduling';\n\nabstract class Timer {\n  protected clear: Canceller;\n  protected timer: number | void;\n\n  constructor(\n    set: Scheduler,\n    clear: Canceller,\n    delay: Delay,\n    callback: TimedCallback\n  ) {\n    this.clear = clear;\n    this.timer = set(() => {\n      if (this.timer) {\n        this.timer = callback(this.timer);\n      }\n    }, delay);\n  }\n\n  /** Returns whether the timer is still running.\n   *\n   * @return {Boolean}\n   */\n  isRunning(): boolean {\n    return this.timer !== null;\n  }\n\n  /** Aborts a timer when it's running. */\n  ensureAborted() {\n    if (this.timer) {\n      this.clear(this.timer);\n      this.timer = null;\n    }\n  }\n}\n\nexport default Timer;\n","import Timer from './abstract_timer';\nimport TimedCallback from './timed_callback';\nimport { Delay } from './scheduling';\n\n// We need to bind clear functions this way to avoid exceptions on IE8\nfunction clearTimeout(timer) {\n  global.clearTimeout(timer);\n}\nfunction clearInterval(timer) {\n  global.clearInterval(timer);\n}\n\n/** Cross-browser compatible one-off timer abstraction.\n *\n * @param {Number} delay\n * @param {Function} callback\n */\nexport class OneOffTimer extends Timer {\n  constructor(delay: Delay, callback: TimedCallback) {\n    super(setTimeout, clearTimeout, delay, function(timer) {\n      callback();\n      return null;\n    });\n  }\n}\n\n/** Cross-browser compatible periodic timer abstraction.\n *\n * @param {Number} delay\n * @param {Function} callback\n */\nexport class PeriodicTimer extends Timer {\n  constructor(delay: Delay, callback: TimedCallback) {\n    super(setInterval, clearInterval, delay, function(timer) {\n      callback();\n      return timer;\n    });\n  }\n}\n","import * as Collections from './utils/collections';\nimport TimedCallback from './utils/timers/timed_callback';\nimport { OneOffTimer, PeriodicTimer } from './utils/timers';\n\nvar Util = {\n  now(): number {\n    if (Date.now) {\n      return Date.now();\n    } else {\n      return new Date().valueOf();\n    }\n  },\n\n  defer(callback: TimedCallback): OneOffTimer {\n    return new OneOffTimer(0, callback);\n  },\n\n  /** Builds a function that will proxy a method call to its first argument.\n   *\n   * Allows partial application of arguments, so additional arguments are\n   * prepended to the argument list.\n   *\n   * @param  {String} name method name\n   * @return {Function} proxy function\n   */\n  method(name: string, ...args: any[]): Function {\n    var boundArguments = Array.prototype.slice.call(arguments, 1);\n    return function(object) {\n      return object[name].apply(object, boundArguments.concat(arguments));\n    };\n  }\n};\n\nexport default Util;\n","import base64encode from '../base64';\nimport Util from '../util';\n\n/** Merges multiple objects into the target argument.\n *\n * For properties that are plain Objects, performs a deep-merge. For the\n * rest it just copies the value of the property.\n *\n * To extend prototypes use it as following:\n *   Pusher.Util.extend(Target.prototype, Base.prototype)\n *\n * You can also use it to merge objects without altering them:\n *   Pusher.Util.extend({}, object1, object2)\n *\n * @param  {Object} target\n * @return {Object} the target argument\n */\nexport function extend<T>(target: any, ...sources: any[]): T {\n  for (var i = 0; i < sources.length; i++) {\n    var extensions = sources[i];\n    for (var property in extensions) {\n      if (\n        extensions[property] &&\n        extensions[property].constructor &&\n        extensions[property].constructor === Object\n      ) {\n        target[property] = extend(target[property] || {}, extensions[property]);\n      } else {\n        target[property] = extensions[property];\n      }\n    }\n  }\n  return target;\n}\n\nexport function stringify(): string {\n  var m = ['Pusher'];\n  for (var i = 0; i < arguments.length; i++) {\n    if (typeof arguments[i] === 'string') {\n      m.push(arguments[i]);\n    } else {\n      m.push(safeJSONStringify(arguments[i]));\n    }\n  }\n  return m.join(' : ');\n}\n\nexport function arrayIndexOf(array: any[], item: any): number {\n  // MSIE doesn't have array.indexOf\n  var nativeIndexOf = Array.prototype.indexOf;\n  if (array === null) {\n    return -1;\n  }\n  if (nativeIndexOf && array.indexOf === nativeIndexOf) {\n    return array.indexOf(item);\n  }\n  for (var i = 0, l = array.length; i < l; i++) {\n    if (array[i] === item) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/** Applies a function f to all properties of an object.\n *\n * Function f gets 3 arguments passed:\n * - element from the object\n * - key of the element\n * - reference to the object\n *\n * @param {Object} object\n * @param {Function} f\n */\nexport function objectApply(object: any, f: Function) {\n  for (var key in object) {\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      f(object[key], key, object);\n    }\n  }\n}\n\n/** Return a list of objects own proerty keys\n *\n * @param {Object} object\n * @returns {Array}\n */\nexport function keys(object: any): string[] {\n  var keys = [];\n  objectApply(object, function(_, key) {\n    keys.push(key);\n  });\n  return keys;\n}\n\n/** Return a list of object's own property values\n *\n * @param {Object} object\n * @returns {Array}\n */\nexport function values(object: any): any[] {\n  var values = [];\n  objectApply(object, function(value) {\n    values.push(value);\n  });\n  return values;\n}\n\n/** Applies a function f to all elements of an array.\n *\n * Function f gets 3 arguments passed:\n * - element from the array\n * - index of the element\n * - reference to the array\n *\n * @param {Array} array\n * @param {Function} f\n */\nexport function apply(array: any[], f: Function, context?: any) {\n  for (var i = 0; i < array.length; i++) {\n    f.call(context || global, array[i], i, array);\n  }\n}\n\n/** Maps all elements of the array and returns the result.\n *\n * Function f gets 4 arguments passed:\n * - element from the array\n * - index of the element\n * - reference to the source array\n * - reference to the destination array\n *\n * @param {Array} array\n * @param {Function} f\n */\nexport function map(array: any[], f: Function): any[] {\n  var result = [];\n  for (var i = 0; i < array.length; i++) {\n    result.push(f(array[i], i, array, result));\n  }\n  return result;\n}\n\n/** Maps all elements of the object and returns the result.\n *\n * Function f gets 4 arguments passed:\n * - element from the object\n * - key of the element\n * - reference to the source object\n * - reference to the destination object\n *\n * @param {Object} object\n * @param {Function} f\n */\nexport function mapObject(object: any, f: Function): any {\n  var result = {};\n  objectApply(object, function(value, key) {\n    result[key] = f(value);\n  });\n  return result;\n}\n\n/** Filters elements of the array using a test function.\n *\n * Function test gets 4 arguments passed:\n * - element from the array\n * - index of the element\n * - reference to the source array\n * - reference to the destination array\n *\n * @param {Array} array\n * @param {Function} f\n */\nexport function filter(array: any[], test: Function): any[] {\n  test =\n    test ||\n    function(value) {\n      return !!value;\n    };\n\n  var result = [];\n  for (var i = 0; i < array.length; i++) {\n    if (test(array[i], i, array, result)) {\n      result.push(array[i]);\n    }\n  }\n  return result;\n}\n\n/** Filters properties of the object using a test function.\n *\n * Function test gets 4 arguments passed:\n * - element from the object\n * - key of the element\n * - reference to the source object\n * - reference to the destination object\n *\n * @param {Object} object\n * @param {Function} f\n */\nexport function filterObject(object: Object, test: Function) {\n  var result = {};\n  objectApply(object, function(value, key) {\n    if ((test && test(value, key, object, result)) || Boolean(value)) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\n/** Flattens an object into a two-dimensional array.\n *\n * @param  {Object} object\n * @return {Array} resulting array of [key, value] pairs\n */\nexport function flatten(object: Object): any[] {\n  var result = [];\n  objectApply(object, function(value, key) {\n    result.push([key, value]);\n  });\n  return result;\n}\n\n/** Checks whether any element of the array passes the test.\n *\n * Function test gets 3 arguments passed:\n * - element from the array\n * - index of the element\n * - reference to the source array\n *\n * @param {Array} array\n * @param {Function} f\n */\nexport function any(array: any[], test: Function): boolean {\n  for (var i = 0; i < array.length; i++) {\n    if (test(array[i], i, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/** Checks whether all elements of the array pass the test.\n *\n * Function test gets 3 arguments passed:\n * - element from the array\n * - index of the element\n * - reference to the source array\n *\n * @param {Array} array\n * @param {Function} f\n */\nexport function all(array: any[], test: Function): boolean {\n  for (var i = 0; i < array.length; i++) {\n    if (!test(array[i], i, array)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function encodeParamsObject(data): string {\n  return mapObject(data, function(value) {\n    if (typeof value === 'object') {\n      value = safeJSONStringify(value);\n    }\n    return encodeURIComponent(base64encode(value.toString()));\n  });\n}\n\nexport function buildQueryString(data: any): string {\n  var params = filterObject(data, function(value) {\n    return value !== undefined;\n  });\n\n  var query = map(\n    flatten(encodeParamsObject(params)),\n    Util.method('join', '=')\n  ).join('&');\n\n  return query;\n}\n\n/**\n * See https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\n *\n * Remove circular references from an object. Required for JSON.stringify in\n * React Native, which tends to blow up a lot.\n *\n * @param  {any} object\n * @return {any}        Decycled object\n */\nexport function decycleObject(object: any): any {\n  var objects = [],\n    paths = [];\n\n  return (function derez(value, path) {\n    var i, name, nu;\n\n    switch (typeof value) {\n      case 'object':\n        if (!value) {\n          return null;\n        }\n        for (i = 0; i < objects.length; i += 1) {\n          if (objects[i] === value) {\n            return { $ref: paths[i] };\n          }\n        }\n\n        objects.push(value);\n        paths.push(path);\n\n        if (Object.prototype.toString.apply(value) === '[object Array]') {\n          nu = [];\n          for (i = 0; i < value.length; i += 1) {\n            nu[i] = derez(value[i], path + '[' + i + ']');\n          }\n        } else {\n          nu = {};\n          for (name in value) {\n            if (Object.prototype.hasOwnProperty.call(value, name)) {\n              nu[name] = derez(\n                value[name],\n                path + '[' + JSON.stringify(name) + ']'\n              );\n            }\n          }\n        }\n        return nu;\n      case 'number':\n      case 'string':\n      case 'boolean':\n        return value;\n    }\n  })(object, '$');\n}\n\n/**\n * Provides a cross-browser and cross-platform way to safely stringify objects\n * into JSON. This is particularly necessary for ReactNative, where circular JSON\n * structures throw an exception.\n *\n * @param  {any}    source The object to stringify\n * @return {string}        The serialized output.\n */\nexport function safeJSONStringify(source: any): string {\n  try {\n    return JSON.stringify(source);\n  } catch (e) {\n    return JSON.stringify(decycleObject(source));\n  }\n}\n","import { stringify } from './utils/collections';\nimport Pusher from './pusher';\n\nclass Logger {\n  debug(...args: any[]) {\n    this.log(this.globalLog, args);\n  }\n\n  warn(...args: any[]) {\n    this.log(this.globalLogWarn, args);\n  }\n\n  error(...args: any[]) {\n    this.log(this.globalLogError, args);\n  }\n\n  private globalLog = (message: string) => {\n    if (global.console && global.console.log) {\n      global.console.log(message);\n    }\n  };\n\n  private globalLogWarn(message: string) {\n    if (global.console && global.console.warn) {\n      global.console.warn(message);\n    } else {\n      this.globalLog(message);\n    }\n  }\n\n  private globalLogError(message: string) {\n    if (global.console && global.console.error) {\n      global.console.error(message);\n    } else {\n      this.globalLogWarn(message);\n    }\n  }\n\n  private log(\n    defaultLoggingFunction: (message: string) => void,\n    ...args: any[]\n  ) {\n    var message = stringify.apply(this, arguments);\n    if (Pusher.log) {\n      Pusher.log(message);\n    } else if (Pusher.logToConsole) {\n      const log = defaultLoggingFunction.bind(this);\n      log(message);\n    }\n  }\n}\n\nexport default new Logger();\n","import Browser from '../browser';\nimport Logger from 'core/logger';\nimport JSONPRequest from '../dom/jsonp_request';\nimport { ScriptReceivers } from '../dom/script_receiver_factory';\nimport { AuthTransport } from 'core/auth/auth_transports';\nimport {\n  AuthRequestType,\n  AuthTransportCallback,\n  InternalAuthOptions\n} from 'core/auth/options';\n\nvar jsonp: AuthTransport = function(\n  context: Browser,\n  query: string,\n  authOptions: InternalAuthOptions,\n  authRequestType: AuthRequestType,\n  callback: AuthTransportCallback\n) {\n  if (authOptions.headers !== undefined) {\n    Logger.warn(\n      `To send headers with the ${authRequestType.toString()} request, you must use AJAX, rather than JSONP.`\n    );\n  }\n\n  var callbackName = context.nextAuthCallbackID.toString();\n  context.nextAuthCallbackID++;\n\n  var document = context.getDocument();\n  var script = document.createElement('script');\n  // Hacked wrapper.\n  context.auth_callbacks[callbackName] = function(data) {\n    callback(null, data);\n  };\n\n  var callback_name = \"Pusher.auth_callbacks['\" + callbackName + \"']\";\n  script.src =\n    authOptions.endpoint +\n    '?callback=' +\n    encodeURIComponent(callback_name) +\n    '&' +\n    query;\n\n  var head =\n    document.getElementsByTagName('head')[0] || document.documentElement;\n  head.insertBefore(script, head.firstChild);\n};\n\nexport default jsonp;\n","import ScriptReceiver from './script_receiver';\n\n/** Sends a generic HTTP GET request using a script tag.\n *\n * By constructing URL in a specific way, it can be used for loading\n * JavaScript resources or JSONP requests. It can notify about errors, but\n * only in certain environments. Please take care of monitoring the state of\n * the request yourself.\n *\n * @param {String} src\n */\nexport default class ScriptRequest {\n  src: string;\n  script: any;\n  errorScript: any;\n\n  constructor(src: string) {\n    this.src = src;\n  }\n\n  send(receiver: ScriptReceiver) {\n    var self = this;\n    var errorString = 'Error loading ' + self.src;\n\n    self.script = document.createElement('script');\n    self.script.id = receiver.id;\n    self.script.src = self.src;\n    self.script.type = 'text/javascript';\n    self.script.charset = 'UTF-8';\n\n    if (self.script.addEventListener) {\n      self.script.onerror = function() {\n        receiver.callback(errorString);\n      };\n      self.script.onload = function() {\n        receiver.callback(null);\n      };\n    } else {\n      self.script.onreadystatechange = function() {\n        if (\n          self.script.readyState === 'loaded' ||\n          self.script.readyState === 'complete'\n        ) {\n          receiver.callback(null);\n        }\n      };\n    }\n\n    // Opera<11.6 hack for missing onerror callback\n    if (\n      self.script.async === undefined &&\n      (<any>document).attachEvent &&\n      /opera/i.test(navigator.userAgent)\n    ) {\n      self.errorScript = document.createElement('script');\n      self.errorScript.id = receiver.id + '_error';\n      self.errorScript.text = receiver.name + \"('\" + errorString + \"');\";\n      self.script.async = self.errorScript.async = false;\n    } else {\n      self.script.async = true;\n    }\n\n    var head = document.getElementsByTagName('head')[0];\n    head.insertBefore(self.script, head.firstChild);\n    if (self.errorScript) {\n      head.insertBefore(self.errorScript, self.script.nextSibling);\n    }\n  }\n\n  /** Cleans up the DOM remains of the script request. */\n  cleanup() {\n    if (this.script) {\n      this.script.onload = this.script.onerror = null;\n      this.script.onreadystatechange = null;\n    }\n    if (this.script && this.script.parentNode) {\n      this.script.parentNode.removeChild(this.script);\n    }\n    if (this.errorScript && this.errorScript.parentNode) {\n      this.errorScript.parentNode.removeChild(this.errorScript);\n    }\n    this.script = null;\n    this.errorScript = null;\n  }\n}\n","import ScriptReceiver from './script_receiver';\nimport ScriptRequest from './script_request';\nimport * as Collections from 'core/utils/collections';\nimport Util from 'core/util';\nimport Runtime from '../runtime';\n\n/** Sends data via JSONP.\n *\n * Data is a key-value map. Its values are JSON-encoded and then passed\n * through base64. Finally, keys and encoded values are appended to the query\n * string.\n *\n * The class itself does not guarantee raising errors on failures, as it's not\n * possible to support such feature on all browsers. Instead, JSONP endpoint\n * should call back in a way that's easy to distinguish from browser calls,\n * for example by passing a second argument to the receiver.\n *\n * @param {String} url\n * @param {Object} data key-value map of data to be submitted\n */\nexport default class JSONPRequest {\n  url: string;\n  data: any;\n  request: ScriptRequest;\n\n  constructor(url: string, data: any) {\n    this.url = url;\n    this.data = data;\n  }\n\n  /** Sends the actual JSONP request.\n   *\n   * @param {ScriptReceiver} receiver\n   */\n  send(receiver: ScriptReceiver) {\n    if (this.request) {\n      return;\n    }\n\n    var query = Collections.buildQueryString(this.data);\n    var url = this.url + '/' + receiver.number + '?' + query;\n    this.request = Runtime.createScriptRequest(url);\n    this.request.send(receiver);\n  }\n\n  /** Cleans up the DOM remains of the JSONP request. */\n  cleanup() {\n    if (this.request) {\n      this.request.cleanup();\n    }\n  }\n}\n","import TimelineSender from 'core/timeline/timeline_sender';\nimport TimelineTransport from 'core/timeline/timeline_transport';\nimport Browser from 'runtime';\nimport { AuthTransport } from 'core/auth/auth_transports';\nimport { ScriptReceivers } from '../dom/script_receiver_factory';\n\nvar getAgent = function(sender: TimelineSender, useTLS: boolean) {\n  return function(data: any, callback: Function) {\n    var scheme = 'http' + (useTLS ? 's' : '') + '://';\n    var url =\n      scheme + (sender.host || sender.options.host) + sender.options.path;\n    var request = Browser.createJSONPRequest(url, data);\n\n    var receiver = Browser.ScriptReceivers.create(function(error, result) {\n      ScriptReceivers.remove(receiver);\n      request.cleanup();\n\n      if (result && result.host) {\n        sender.host = result.host;\n      }\n      if (callback) {\n        callback(error, result);\n      }\n    });\n    request.send(receiver);\n  };\n};\n\nvar jsonp = {\n  name: 'jsonp',\n  getAgent\n};\n\nexport default jsonp;\n","import Defaults from '../defaults';\nimport { default as URLScheme, URLSchemeParams } from './url_scheme';\n\nfunction getGenericURL(\n  baseScheme: string,\n  params: URLSchemeParams,\n  path: string\n): string {\n  var scheme = baseScheme + (params.useTLS ? 's' : '');\n  var host = params.useTLS ? params.hostTLS : params.hostNonTLS;\n  return scheme + '://' + host + path;\n}\n\nfunction getGenericPath(key: string, queryString?: string): string {\n  var path = '/app/' + key;\n  var query =\n    '?protocol=' +\n    Defaults.PROTOCOL +\n    '&client=js' +\n    '&version=' +\n    Defaults.VERSION +\n    (queryString ? '&' + queryString : '');\n  return path + query;\n}\n\nexport var ws: URLScheme = {\n  getInitial: function(key: string, params: URLSchemeParams): string {\n    var path = (params.httpPath || '') + getGenericPath(key, 'flash=false');\n    return getGenericURL('ws', params, path);\n  }\n};\n\nexport var http: URLScheme = {\n  getInitial: function(key: string, params: URLSchemeParams): string {\n    var path = (params.httpPath || '/pusher') + getGenericPath(key);\n    return getGenericURL('http', params, path);\n  }\n};\n\nexport var sockjs: URLScheme = {\n  getInitial: function(key: string, params: URLSchemeParams): string {\n    return getGenericURL('http', params, params.httpPath || '/pusher');\n  },\n  getPath: function(key: string, params: URLSchemeParams): string {\n    return getGenericPath(key);\n  }\n};\n","import Callback from './callback';\nimport * as Collections from '../utils/collections';\nimport CallbackTable from './callback_table';\n\nexport default class CallbackRegistry {\n  _callbacks: CallbackTable;\n\n  constructor() {\n    this._callbacks = {};\n  }\n\n  get(name: string): Callback[] {\n    return this._callbacks[prefix(name)];\n  }\n\n  add(name: string, callback: Function, context: any) {\n    var prefixedEventName = prefix(name);\n    this._callbacks[prefixedEventName] =\n      this._callbacks[prefixedEventName] || [];\n    this._callbacks[prefixedEventName].push({\n      fn: callback,\n      context: context\n    });\n  }\n\n  remove(name?: string, callback?: Function, context?: any) {\n    if (!name && !callback && !context) {\n      this._callbacks = {};\n      return;\n    }\n\n    var names = name ? [prefix(name)] : Collections.keys(this._callbacks);\n\n    if (callback || context) {\n      this.removeCallback(names, callback, context);\n    } else {\n      this.removeAllCallbacks(names);\n    }\n  }\n\n  private removeCallback(names: string[], callback: Function, context: any) {\n    Collections.apply(\n      names,\n      function(name) {\n        this._callbacks[name] = Collections.filter(\n          this._callbacks[name] || [],\n          function(binding) {\n            return (\n              (callback && callback !== binding.fn) ||\n              (context && context !== binding.context)\n            );\n          }\n        );\n        if (this._callbacks[name].length === 0) {\n          delete this._callbacks[name];\n        }\n      },\n      this\n    );\n  }\n\n  private removeAllCallbacks(names: string[]) {\n    Collections.apply(\n      names,\n      function(name) {\n        delete this._callbacks[name];\n      },\n      this\n    );\n  }\n}\n\nfunction prefix(name: string): string {\n  return '_' + name;\n}\n","import * as Collections from '../utils/collections';\nimport Callback from './callback';\nimport Metadata from '../channels/metadata';\nimport CallbackRegistry from './callback_registry';\n\n/** Manages callback bindings and event emitting.\n *\n * @param Function failThrough called when no listeners are bound to an event\n */\nexport default class Dispatcher {\n  callbacks: CallbackRegistry;\n  global_callbacks: Function[];\n  failThrough: Function;\n\n  constructor(failThrough?: Function) {\n    this.callbacks = new CallbackRegistry();\n    this.global_callbacks = [];\n    this.failThrough = failThrough;\n  }\n\n  bind(eventName: string, callback: Function, context?: any) {\n    this.callbacks.add(eventName, callback, context);\n    return this;\n  }\n\n  bind_global(callback: Function) {\n    this.global_callbacks.push(callback);\n    return this;\n  }\n\n  unbind(eventName?: string, callback?: Function, context?: any) {\n    this.callbacks.remove(eventName, callback, context);\n    return this;\n  }\n\n  unbind_global(callback?: Function) {\n    if (!callback) {\n      this.global_callbacks = [];\n      return this;\n    }\n\n    this.global_callbacks = Collections.filter(\n      this.global_callbacks || [],\n      c => c !== callback\n    );\n\n    return this;\n  }\n\n  unbind_all() {\n    this.unbind();\n    this.unbind_global();\n    return this;\n  }\n\n  emit(eventName: string, data?: any, metadata?: Metadata): Dispatcher {\n    for (var i = 0; i < this.global_callbacks.length; i++) {\n      this.global_callbacks[i](eventName, data);\n    }\n\n    var callbacks = this.callbacks.get(eventName);\n    var args = [];\n\n    if (metadata) {\n      // if there's a metadata argument, we need to call the callback with both\n      // data and metadata regardless of whether data is undefined\n      args.push(data, metadata);\n    } else if (data) {\n      // metadata is undefined, so we only need to call the callback with data\n      // if data exists\n      args.push(data);\n    }\n\n    if (callbacks && callbacks.length > 0) {\n      for (var i = 0; i < callbacks.length; i++) {\n        callbacks[i].fn.apply(callbacks[i].context || global, args);\n      }\n    } else if (this.failThrough) {\n      this.failThrough(eventName, data);\n    }\n\n    return this;\n  }\n}\n","import Util from '../util';\nimport * as Collections from '../utils/collections';\nimport { default as EventsDispatcher } from '../events/dispatcher';\nimport Logger from '../logger';\nimport TransportHooks from './transport_hooks';\nimport Socket from '../socket';\nimport Runtime from 'runtime';\nimport Timeline from '../timeline/timeline';\nimport TransportConnectionOptions from './transport_connection_options';\n\n/** Provides universal API for transport connections.\n *\n * Transport connection is a low-level object that wraps a connection method\n * and exposes a simple evented interface for the connection state and\n * messaging. It does not implement Pusher-specific WebSocket protocol.\n *\n * Additionally, it fetches resources needed for transport to work and exposes\n * an interface for querying transport features.\n *\n * States:\n * - new - initial state after constructing the object\n * - initializing - during initialization phase, usually fetching resources\n * - intialized - ready to establish a connection\n * - connection - when connection is being established\n * - open - when connection ready to be used\n * - closed - after connection was closed be either side\n *\n * Emits:\n * - error - after the connection raised an error\n *\n * Options:\n * - useTLS - whether connection should be over TLS\n * - hostTLS - host to connect to when connection is over TLS\n * - hostNonTLS - host to connect to when connection is over TLS\n *\n * @param {String} key application key\n * @param {Object} options\n */\nexport default class TransportConnection extends EventsDispatcher {\n  hooks: TransportHooks;\n  name: string;\n  priority: number;\n  key: string;\n  options: TransportConnectionOptions;\n  state: string;\n  timeline: Timeline;\n  activityTimeout: number;\n  id: number;\n  socket: Socket;\n  beforeOpen: Function;\n  initialize: Function;\n\n  constructor(\n    hooks: TransportHooks,\n    name: string,\n    priority: number,\n    key: string,\n    options: TransportConnectionOptions\n  ) {\n    super();\n    this.initialize = Runtime.transportConnectionInitializer;\n    this.hooks = hooks;\n    this.name = name;\n    this.priority = priority;\n    this.key = key;\n    this.options = options;\n\n    this.state = 'new';\n    this.timeline = options.timeline;\n    this.activityTimeout = options.activityTimeout;\n    this.id = this.timeline.generateUniqueID();\n  }\n\n  /** Checks whether the transport handles activity checks by itself.\n   *\n   * @return {Boolean}\n   */\n  handlesActivityChecks(): boolean {\n    return Boolean(this.hooks.handlesActivityChecks);\n  }\n\n  /** Checks whether the transport supports the ping/pong API.\n   *\n   * @return {Boolean}\n   */\n  supportsPing(): boolean {\n    return Boolean(this.hooks.supportsPing);\n  }\n\n  /** Tries to establish a connection.\n   *\n   * @returns {Boolean} false if transport is in invalid state\n   */\n  connect(): boolean {\n    if (this.socket || this.state !== 'initialized') {\n      return false;\n    }\n\n    var url = this.hooks.urls.getInitial(this.key, this.options);\n    try {\n      this.socket = this.hooks.getSocket(url, this.options);\n    } catch (e) {\n      Util.defer(() => {\n        this.onError(e);\n        this.changeState('closed');\n      });\n      return false;\n    }\n\n    this.bindListeners();\n\n    Logger.debug('Connecting', { transport: this.name, url });\n    this.changeState('connecting');\n    return true;\n  }\n\n  /** Closes the connection.\n   *\n   * @return {Boolean} true if there was a connection to close\n   */\n  close(): boolean {\n    if (this.socket) {\n      this.socket.close();\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** Sends data over the open connection.\n   *\n   * @param {String} data\n   * @return {Boolean} true only when in the \"open\" state\n   */\n  send(data: any): boolean {\n    if (this.state === 'open') {\n      // Workaround for MobileSafari bug (see https://gist.github.com/2052006)\n      Util.defer(() => {\n        if (this.socket) {\n          this.socket.send(data);\n        }\n      });\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** Sends a ping if the connection is open and transport supports it. */\n  ping() {\n    if (this.state === 'open' && this.supportsPing()) {\n      this.socket.ping();\n    }\n  }\n\n  private onOpen() {\n    if (this.hooks.beforeOpen) {\n      this.hooks.beforeOpen(\n        this.socket,\n        this.hooks.urls.getPath(this.key, this.options)\n      );\n    }\n    this.changeState('open');\n    this.socket.onopen = undefined;\n  }\n\n  private onError(error) {\n    this.emit('error', { type: 'WebSocketError', error: error });\n    this.timeline.error(this.buildTimelineMessage({ error: error.toString() }));\n  }\n\n  private onClose(closeEvent?: any) {\n    if (closeEvent) {\n      this.changeState('closed', {\n        code: closeEvent.code,\n        reason: closeEvent.reason,\n        wasClean: closeEvent.wasClean\n      });\n    } else {\n      this.changeState('closed');\n    }\n    this.unbindListeners();\n    this.socket = undefined;\n  }\n\n  private onMessage(message) {\n    this.emit('message', message);\n  }\n\n  private onActivity() {\n    this.emit('activity');\n  }\n\n  private bindListeners() {\n    this.socket.onopen = () => {\n      this.onOpen();\n    };\n    this.socket.onerror = error => {\n      this.onError(error);\n    };\n    this.socket.onclose = closeEvent => {\n      this.onClose(closeEvent);\n    };\n    this.socket.onmessage = message => {\n      this.onMessage(message);\n    };\n\n    if (this.supportsPing()) {\n      this.socket.onactivity = () => {\n        this.onActivity();\n      };\n    }\n  }\n\n  private unbindListeners() {\n    if (this.socket) {\n      this.socket.onopen = undefined;\n      this.socket.onerror = undefined;\n      this.socket.onclose = undefined;\n      this.socket.onmessage = undefined;\n      if (this.supportsPing()) {\n        this.socket.onactivity = undefined;\n      }\n    }\n  }\n\n  private changeState(state: string, params?: any) {\n    this.state = state;\n    this.timeline.info(\n      this.buildTimelineMessage({\n        state: state,\n        params: params\n      })\n    );\n    this.emit(state, params);\n  }\n\n  buildTimelineMessage(message): any {\n    return Collections.extend({ cid: this.id }, message);\n  }\n}\n","import Factory from '../utils/factory';\nimport TransportHooks from './transport_hooks';\nimport TransportConnection from './transport_connection';\nimport TransportConnectionOptions from './transport_connection_options';\n\n/** Provides interface for transport connection instantiation.\n *\n * Takes transport-specific hooks as the only argument, which allow checking\n * for transport support and creating its connections.\n *\n * Supported hooks: * - file - the name of the file to be fetched during initialization\n * - urls - URL scheme to be used by transport\n * - handlesActivityCheck - true when the transport handles activity checks\n * - supportsPing - true when the transport has a ping/activity API\n * - isSupported - tells whether the transport is supported in the environment\n * - getSocket - creates a WebSocket-compatible transport socket\n *\n * See transports.js for specific implementations.\n *\n * @param {Object} hooks object containing all needed transport hooks\n */\nexport default class Transport {\n  hooks: TransportHooks;\n\n  constructor(hooks: TransportHooks) {\n    this.hooks = hooks;\n  }\n\n  /** Returns whether the transport is supported in the environment.\n   *\n   * @param {Object} envronment te environment details (encryption, settings)\n   * @returns {Boolean} true when the transport is supported\n   */\n  isSupported(environment: any): boolean {\n    return this.hooks.isSupported(environment);\n  }\n\n  /** Creates a transport connection.\n   *\n   * @param {String} name\n   * @param {Number} priority\n   * @param {String} key the application key\n   * @param {Object} options\n   * @returns {TransportConnection}\n   */\n  createConnection(\n    name: string,\n    priority: number,\n    key: string,\n    options: any\n  ): TransportConnection {\n    return new TransportConnection(this.hooks, name, priority, key, options);\n  }\n}\n","import * as URLSchemes from 'core/transports/url_schemes';\nimport URLScheme from 'core/transports/url_scheme';\nimport Transport from 'core/transports/transport';\nimport Util from 'core/util';\nimport * as Collections from 'core/utils/collections';\nimport TransportHooks from 'core/transports/transport_hooks';\nimport TransportsTable from 'core/transports/transports_table';\nimport Runtime from 'runtime';\n\n/** WebSocket transport.\n *\n * Uses native WebSocket implementation, including MozWebSocket supported by\n * earlier Firefox versions.\n */\nvar WSTransport = new Transport(<TransportHooks>{\n  urls: URLSchemes.ws,\n  handlesActivityChecks: false,\n  supportsPing: false,\n\n  isInitialized: function() {\n    return Boolean(Runtime.getWebSocketAPI());\n  },\n  isSupported: function(): boolean {\n    return Boolean(Runtime.getWebSocketAPI());\n  },\n  getSocket: function(url) {\n    return Runtime.createWebSocket(url);\n  }\n});\n\nvar httpConfiguration = {\n  urls: URLSchemes.http,\n  handlesActivityChecks: false,\n  supportsPing: true,\n  isInitialized: function() {\n    return true;\n  }\n};\n\nexport var streamingConfiguration = Collections.extend(\n  {\n    getSocket: function(url) {\n      return Runtime.HTTPFactory.createStreamingSocket(url);\n    }\n  },\n  httpConfiguration\n);\nexport var pollingConfiguration = Collections.extend(\n  {\n    getSocket: function(url) {\n      return Runtime.HTTPFactory.createPollingSocket(url);\n    }\n  },\n  httpConfiguration\n);\n\nvar xhrConfiguration = {\n  isSupported: function(): boolean {\n    return Runtime.isXHRSupported();\n  }\n};\n\n/** HTTP streaming transport using CORS-enabled XMLHttpRequest. */\nvar XHRStreamingTransport = new Transport(\n  <TransportHooks>(\n    Collections.extend({}, streamingConfiguration, xhrConfiguration)\n  )\n);\n\n/** HTTP long-polling transport using CORS-enabled XMLHttpRequest. */\nvar XHRPollingTransport = new Transport(\n  <TransportHooks>Collections.extend({}, pollingConfiguration, xhrConfiguration)\n);\n\nvar Transports: TransportsTable = {\n  ws: WSTransport,\n  xhr_streaming: XHRStreamingTransport,\n  xhr_polling: XHRPollingTransport\n};\n\nexport default Transports;\n","import {\n  default as Transports,\n  streamingConfiguration,\n  pollingConfiguration\n} from 'isomorphic/transports/transports';\nimport Transport from 'core/transports/transport';\nimport TransportHooks from 'core/transports/transport_hooks';\nimport * as URLSchemes from 'core/transports/url_schemes';\nimport Runtime from 'runtime';\nimport { Dependencies } from '../dom/dependencies';\nimport * as Collections from 'core/utils/collections';\n\nvar SockJSTransport = new Transport(<TransportHooks>{\n  file: 'sockjs',\n  urls: URLSchemes.sockjs,\n  handlesActivityChecks: true,\n  supportsPing: false,\n\n  isSupported: function() {\n    return true;\n  },\n  isInitialized: function() {\n    return window.SockJS !== undefined;\n  },\n  getSocket: function(url, options) {\n    return new window.SockJS(url, null, {\n      js_path: Dependencies.getPath('sockjs', {\n        useTLS: options.useTLS\n      }),\n      ignore_null_origin: options.ignoreNullOrigin\n    });\n  },\n  beforeOpen: function(socket, path) {\n    socket.send(\n      JSON.stringify({\n        path: path\n      })\n    );\n  }\n});\n\nvar xdrConfiguration = {\n  isSupported: function(environment): boolean {\n    var yes = Runtime.isXDRSupported(environment.useTLS);\n    return yes;\n  }\n};\n\n/** HTTP streaming transport using XDomainRequest (IE 8,9). */\nvar XDRStreamingTransport = new Transport(\n  <TransportHooks>(\n    Collections.extend({}, streamingConfiguration, xdrConfiguration)\n  )\n);\n\n/** HTTP long-polling transport using XDomainRequest (IE 8,9). */\nvar XDRPollingTransport = new Transport(\n  <TransportHooks>Collections.extend({}, pollingConfiguration, xdrConfiguration)\n);\n\nTransports.xdr_streaming = XDRStreamingTransport;\nTransports.xdr_polling = XDRPollingTransport;\nTransports.sockjs = SockJSTransport;\n\nexport default Transports;\n","import Reachability from 'core/reachability';\nimport { default as EventsDispatcher } from 'core/events/dispatcher';\n\n/** Really basic interface providing network availability info.\n *\n * Emits:\n * - online - when browser goes online\n * - offline - when browser goes offline\n */\nexport class NetInfo extends EventsDispatcher implements Reachability {\n  constructor() {\n    super();\n    var self = this;\n    // This is okay, as IE doesn't support this stuff anyway.\n    if (window.addEventListener !== undefined) {\n      window.addEventListener(\n        'online',\n        function() {\n          self.emit('online');\n        },\n        false\n      );\n      window.addEventListener(\n        'offline',\n        function() {\n          self.emit('offline');\n        },\n        false\n      );\n    }\n  }\n\n  /** Returns whether browser is online or not\n   *\n   * Offline means definitely offline (no connection to router).\n   * Inverse does NOT mean definitely online (only currently supported in Safari\n   * and even there only means the device has a connection to the router).\n   *\n   * @return {Boolean}\n   */\n  isOnline(): boolean {\n    if (window.navigator.onLine === undefined) {\n      return true;\n    } else {\n      return window.navigator.onLine;\n    }\n  }\n}\n\nexport var Network = new NetInfo();\n","import Util from '../util';\nimport * as Collections from '../utils/collections';\nimport TransportManager from './transport_manager';\nimport TransportConnection from './transport_connection';\nimport Transport from './transport';\nimport PingDelayOptions from './ping_delay_options';\n\n/** Creates transport connections monitored by a transport manager.\n *\n * When a transport is closed, it might mean the environment does not support\n * it. It's possible that messages get stuck in an intermediate buffer or\n * proxies terminate inactive connections. To combat these problems,\n * assistants monitor the connection lifetime, report unclean exits and\n * adjust ping timeouts to keep the connection active. The decision to disable\n * a transport is the manager's responsibility.\n *\n * @param {TransportManager} manager\n * @param {TransportConnection} transport\n * @param {Object} options\n */\nexport default class AssistantToTheTransportManager {\n  manager: TransportManager;\n  transport: Transport;\n  minPingDelay: number;\n  maxPingDelay: number;\n  pingDelay: number;\n\n  constructor(\n    manager: TransportManager,\n    transport: Transport,\n    options: PingDelayOptions\n  ) {\n    this.manager = manager;\n    this.transport = transport;\n    this.minPingDelay = options.minPingDelay;\n    this.maxPingDelay = options.maxPingDelay;\n    this.pingDelay = undefined;\n  }\n\n  /** Creates a transport connection.\n   *\n   * This function has the same API as Transport#createConnection.\n   *\n   * @param {String} name\n   * @param {Number} priority\n   * @param {String} key the application key\n   * @param {Object} options\n   * @returns {TransportConnection}\n   */\n  createConnection(\n    name: string,\n    priority: number,\n    key: string,\n    options: Object\n  ): TransportConnection {\n    options = Collections.extend({}, options, {\n      activityTimeout: this.pingDelay\n    });\n    var connection = this.transport.createConnection(\n      name,\n      priority,\n      key,\n      options\n    );\n\n    var openTimestamp = null;\n\n    var onOpen = function() {\n      connection.unbind('open', onOpen);\n      connection.bind('closed', onClosed);\n      openTimestamp = Util.now();\n    };\n    var onClosed = closeEvent => {\n      connection.unbind('closed', onClosed);\n\n      if (closeEvent.code === 1002 || closeEvent.code === 1003) {\n        // we don't want to use transports not obeying the protocol\n        this.manager.reportDeath();\n      } else if (!closeEvent.wasClean && openTimestamp) {\n        // report deaths only for short-living transport\n        var lifespan = Util.now() - openTimestamp;\n        if (lifespan < 2 * this.maxPingDelay) {\n          this.manager.reportDeath();\n          this.pingDelay = Math.max(lifespan / 2, this.minPingDelay);\n        }\n      }\n    };\n\n    connection.bind('open', onOpen);\n    return connection;\n  }\n\n  /** Returns whether the transport is supported in the environment.\n   *\n   * This function has the same API as Transport#isSupported. Might return false\n   * when the manager decides to kill the transport.\n   *\n   * @param {Object} environment the environment details (encryption, settings)\n   * @returns {Boolean} true when the transport is supported\n   */\n  isSupported(environment: string): boolean {\n    return this.manager.isAlive() && this.transport.isSupported(environment);\n  }\n}\n","import Action from './action';\nimport { PusherEvent } from './message-types';\n/**\n * Provides functions for handling Pusher protocol-specific messages.\n */\n\nconst Protocol = {\n  /**\n   * Decodes a message in a Pusher format.\n   *\n   * The MessageEvent we receive from the transport should contain a pusher event\n   * (https://pusher.com/docs/pusher_protocol#events) serialized as JSON in the\n   * data field\n   *\n   * The pusher event may contain a data field too, and it may also be\n   * serialised as JSON\n   *\n   * Throws errors when messages are not parse'able.\n   *\n   * @param  {MessageEvent} messageEvent\n   * @return {PusherEvent}\n   */\n  decodeMessage: function(messageEvent: MessageEvent): PusherEvent {\n    try {\n      var messageData = JSON.parse(messageEvent.data);\n      var pusherEventData = messageData.data;\n      if (typeof pusherEventData === 'string') {\n        try {\n          pusherEventData = JSON.parse(messageData.data);\n        } catch (e) {}\n      }\n      var pusherEvent: PusherEvent = {\n        event: messageData.event,\n        channel: messageData.channel,\n        data: pusherEventData\n      };\n      if (messageData.user_id) {\n        pusherEvent.user_id = messageData.user_id;\n      }\n      return pusherEvent;\n    } catch (e) {\n      throw { type: 'MessageParseError', error: e, data: messageEvent.data };\n    }\n  },\n\n  /**\n   * Encodes a message to be sent.\n   *\n   * @param  {PusherEvent} event\n   * @return {String}\n   */\n  encodeMessage: function(event: PusherEvent): string {\n    return JSON.stringify(event);\n  },\n\n  /**\n   * Processes a handshake message and returns appropriate actions.\n   *\n   * Returns an object with an 'action' and other action-specific properties.\n   *\n   * There are three outcomes when calling this function. First is a successful\n   * connection attempt, when pusher:connection_established is received, which\n   * results in a 'connected' action with an 'id' property. When passed a\n   * pusher:error event, it returns a result with action appropriate to the\n   * close code and an error. Otherwise, it raises an exception.\n   *\n   * @param {String} message\n   * @result Object\n   */\n  processHandshake: function(messageEvent: MessageEvent): Action {\n    var message = Protocol.decodeMessage(messageEvent);\n\n    if (message.event === 'pusher:connection_established') {\n      if (!message.data.activity_timeout) {\n        throw 'No activity timeout specified in handshake';\n      }\n      return {\n        action: 'connected',\n        id: message.data.socket_id,\n        activityTimeout: message.data.activity_timeout * 1000\n      };\n    } else if (message.event === 'pusher:error') {\n      // From protocol 6 close codes are sent only once, so this only\n      // happens when connection does not support close codes\n      return {\n        action: this.getCloseAction(message.data),\n        error: this.getCloseError(message.data)\n      };\n    } else {\n      throw 'Invalid handshake';\n    }\n  },\n\n  /**\n   * Dispatches the close event and returns an appropriate action name.\n   *\n   * See:\n   * 1. https://developer.mozilla.org/en-US/docs/WebSockets/WebSockets_reference/CloseEvent\n   * 2. http://pusher.com/docs/pusher_protocol\n   *\n   * @param  {CloseEvent} closeEvent\n   * @return {String} close action name\n   */\n  getCloseAction: function(closeEvent): string {\n    if (closeEvent.code < 4000) {\n      // ignore 1000 CLOSE_NORMAL, 1001 CLOSE_GOING_AWAY,\n      //        1005 CLOSE_NO_STATUS, 1006 CLOSE_ABNORMAL\n      // ignore 1007...3999\n      // handle 1002 CLOSE_PROTOCOL_ERROR, 1003 CLOSE_UNSUPPORTED,\n      //        1004 CLOSE_TOO_LARGE\n      if (closeEvent.code >= 1002 && closeEvent.code <= 1004) {\n        return 'backoff';\n      } else {\n        return null;\n      }\n    } else if (closeEvent.code === 4000) {\n      return 'tls_only';\n    } else if (closeEvent.code < 4100) {\n      return 'refused';\n    } else if (closeEvent.code < 4200) {\n      return 'backoff';\n    } else if (closeEvent.code < 4300) {\n      return 'retry';\n    } else {\n      // unknown error\n      return 'refused';\n    }\n  },\n\n  /**\n   * Returns an error or null basing on the close event.\n   *\n   * Null is returned when connection was closed cleanly. Otherwise, an object\n   * with error details is returned.\n   *\n   * @param  {CloseEvent} closeEvent\n   * @return {Object} error object\n   */\n  getCloseError: function(closeEvent): any {\n    if (closeEvent.code !== 1000 && closeEvent.code !== 1001) {\n      return {\n        type: 'PusherError',\n        data: {\n          code: closeEvent.code,\n          message: closeEvent.reason || closeEvent.message\n        }\n      };\n    } else {\n      return null;\n    }\n  }\n};\n\nexport default Protocol;\n","import * as Collections from '../utils/collections';\nimport { default as EventsDispatcher } from '../events/dispatcher';\nimport Protocol from './protocol/protocol';\nimport { PusherEvent } from './protocol/message-types';\nimport Logger from '../logger';\nimport TransportConnection from '../transports/transport_connection';\nimport Socket from '../socket';\n/**\n * Provides Pusher protocol interface for transports.\n *\n * Emits following events:\n * - message - on received messages\n * - ping - on ping requests\n * - pong - on pong responses\n * - error - when the transport emits an error\n * - closed - after closing the transport\n *\n * It also emits more events when connection closes with a code.\n * See Protocol.getCloseAction to get more details.\n *\n * @param {Number} id\n * @param {AbstractTransport} transport\n */\nexport default class Connection extends EventsDispatcher implements Socket {\n  id: string;\n  transport: TransportConnection;\n  activityTimeout: number;\n\n  constructor(id: string, transport: TransportConnection) {\n    super();\n    this.id = id;\n    this.transport = transport;\n    this.activityTimeout = transport.activityTimeout;\n    this.bindListeners();\n  }\n\n  /** Returns whether used transport handles activity checks by itself\n   *\n   * @returns {Boolean} true if activity checks are handled by the transport\n   */\n  handlesActivityChecks() {\n    return this.transport.handlesActivityChecks();\n  }\n\n  /** Sends raw data.\n   *\n   * @param {String} data\n   */\n  send(data: any): boolean {\n    return this.transport.send(data);\n  }\n\n  /** Sends an event.\n   *\n   * @param {String} name\n   * @param {String} data\n   * @param {String} [channel]\n   * @returns {Boolean} whether message was sent or not\n   */\n  send_event(name: string, data: any, channel?: string): boolean {\n    var event: PusherEvent = { event: name, data: data };\n    if (channel) {\n      event.channel = channel;\n    }\n    Logger.debug('Event sent', event);\n    return this.send(Protocol.encodeMessage(event));\n  }\n\n  /** Sends a ping message to the server.\n   *\n   * Basing on the underlying transport, it might send either transport's\n   * protocol-specific ping or pusher:ping event.\n   */\n  ping() {\n    if (this.transport.supportsPing()) {\n      this.transport.ping();\n    } else {\n      this.send_event('pusher:ping', {});\n    }\n  }\n\n  /** Closes the connection. */\n  close() {\n    this.transport.close();\n  }\n\n  private bindListeners() {\n    var listeners = {\n      message: (messageEvent: MessageEvent) => {\n        var pusherEvent;\n        try {\n          pusherEvent = Protocol.decodeMessage(messageEvent);\n        } catch (e) {\n          this.emit('error', {\n            type: 'MessageParseError',\n            error: e,\n            data: messageEvent.data\n          });\n        }\n\n        if (pusherEvent !== undefined) {\n          Logger.debug('Event recd', pusherEvent);\n\n          switch (pusherEvent.event) {\n            case 'pusher:error':\n              this.emit('error', {\n                type: 'PusherError',\n                data: pusherEvent.data\n              });\n              break;\n            case 'pusher:ping':\n              this.emit('ping');\n              break;\n            case 'pusher:pong':\n              this.emit('pong');\n              break;\n          }\n          this.emit('message', pusherEvent);\n        }\n      },\n      activity: () => {\n        this.emit('activity');\n      },\n      error: error => {\n        this.emit('error', error);\n      },\n      closed: closeEvent => {\n        unbindListeners();\n\n        if (closeEvent && closeEvent.code) {\n          this.handleCloseEvent(closeEvent);\n        }\n\n        this.transport = null;\n        this.emit('closed');\n      }\n    };\n\n    var unbindListeners = () => {\n      Collections.objectApply(listeners, (listener, event) => {\n        this.transport.unbind(event, listener);\n      });\n    };\n\n    Collections.objectApply(listeners, (listener, event) => {\n      this.transport.bind(event, listener);\n    });\n  }\n\n  private handleCloseEvent(closeEvent: any) {\n    var action = Protocol.getCloseAction(closeEvent);\n    var error = Protocol.getCloseError(closeEvent);\n    if (error) {\n      this.emit('error', error);\n    }\n    if (action) {\n      this.emit(action, { action: action, error: error });\n    }\n  }\n}\n","import Util from '../../util';\nimport * as Collections from '../../utils/collections';\nimport Protocol from '../protocol/protocol';\nimport Connection from '../connection';\nimport TransportConnection from '../../transports/transport_connection';\nimport HandshakePayload from './handshake_payload';\n\n/**\n * Handles Pusher protocol handshakes for transports.\n *\n * Calls back with a result object after handshake is completed. Results\n * always have two fields:\n * - action - string describing action to be taken after the handshake\n * - transport - the transport object passed to the constructor\n *\n * Different actions can set different additional properties on the result.\n * In the case of 'connected' action, there will be a 'connection' property\n * containing a Connection object for the transport. Other actions should\n * carry an 'error' property.\n *\n * @param {AbstractTransport} transport\n * @param {Function} callback\n */\nexport default class Handshake {\n  transport: TransportConnection;\n  callback: (HandshakePayload) => void;\n  onMessage: Function;\n  onClosed: Function;\n\n  constructor(\n    transport: TransportConnection,\n    callback: (HandshakePayload) => void\n  ) {\n    this.transport = transport;\n    this.callback = callback;\n    this.bindListeners();\n  }\n\n  close() {\n    this.unbindListeners();\n    this.transport.close();\n  }\n\n  private bindListeners() {\n    this.onMessage = m => {\n      this.unbindListeners();\n\n      var result;\n      try {\n        result = Protocol.processHandshake(m);\n      } catch (e) {\n        this.finish('error', { error: e });\n        this.transport.close();\n        return;\n      }\n\n      if (result.action === 'connected') {\n        this.finish('connected', {\n          connection: new Connection(result.id, this.transport),\n          activityTimeout: result.activityTimeout\n        });\n      } else {\n        this.finish(result.action, { error: result.error });\n        this.transport.close();\n      }\n    };\n\n    this.onClosed = closeEvent => {\n      this.unbindListeners();\n\n      var action = Protocol.getCloseAction(closeEvent) || 'backoff';\n      var error = Protocol.getCloseError(closeEvent);\n      this.finish(action, { error: error });\n    };\n\n    this.transport.bind('message', this.onMessage);\n    this.transport.bind('closed', this.onClosed);\n  }\n\n  private unbindListeners() {\n    this.transport.unbind('message', this.onMessage);\n    this.transport.unbind('closed', this.onClosed);\n  }\n\n  private finish(action: string, params: any) {\n    this.callback(\n      Collections.extend({ transport: this.transport, action: action }, params)\n    );\n  }\n}\n","import * as Collections from '../utils/collections';\nimport Util from '../util';\nimport base64encode from '../base64';\nimport Timeline from './timeline';\nimport Runtime from 'runtime';\n\nexport interface TimelineSenderOptions {\n  host?: string;\n  port?: number;\n  path?: string;\n}\n\nexport default class TimelineSender {\n  timeline: Timeline;\n  options: TimelineSenderOptions;\n  host: string;\n\n  constructor(timeline: Timeline, options: TimelineSenderOptions) {\n    this.timeline = timeline;\n    this.options = options || {};\n  }\n\n  send(useTLS: boolean, callback?: Function) {\n    if (this.timeline.isEmpty()) {\n      return;\n    }\n\n    this.timeline.send(\n      Runtime.TimelineTransport.getAgent(this, useTLS),\n      callback\n    );\n  }\n}\n","import { default as EventsDispatcher } from '../events/dispatcher';\nimport * as Errors from '../errors';\nimport Logger from '../logger';\nimport Pusher from '../pusher';\nimport { PusherEvent } from '../connection/protocol/message-types';\nimport Metadata from './metadata';\nimport UrlStore from '../utils/url_store';\nimport {\n  ChannelAuthorizationData,\n  ChannelAuthorizationCallback\n} from '../auth/options';\nimport { HTTPAuthError } from '../errors';\n\n/** Provides base public channel interface with an event emitter.\n *\n * Emits:\n * - pusher:subscription_succeeded - after subscribing successfully\n * - other non-internal events\n *\n * @param {String} name\n * @param {Pusher} pusher\n */\nexport default class Channel extends EventsDispatcher {\n  name: string;\n  pusher: Pusher;\n  subscribed: boolean;\n  subscriptionPending: boolean;\n  subscriptionCancelled: boolean;\n  subscriptionCount: null;\n\n  constructor(name: string, pusher: Pusher) {\n    super(function(event, data) {\n      Logger.debug('No callbacks on ' + name + ' for ' + event);\n    });\n\n    this.name = name;\n    this.pusher = pusher;\n    this.subscribed = false;\n    this.subscriptionPending = false;\n    this.subscriptionCancelled = false;\n  }\n\n  /** Skips authorization, since public channels don't require it.\n   *\n   * @param {Function} callback\n   */\n  authorize(socketId: string, callback: ChannelAuthorizationCallback) {\n    return callback(null, { auth: '' });\n  }\n\n  /** Triggers an event */\n  trigger(event: string, data: any) {\n    if (event.indexOf('client-') !== 0) {\n      throw new Errors.BadEventName(\n        \"Event '\" + event + \"' does not start with 'client-'\"\n      );\n    }\n    if (!this.subscribed) {\n      var suffix = UrlStore.buildLogSuffix('triggeringClientEvents');\n      Logger.warn(\n        `Client event triggered before channel 'subscription_succeeded' event . ${suffix}`\n      );\n    }\n    return this.pusher.send_event(event, data, this.name);\n  }\n\n  /** Signals disconnection to the channel. For internal use only. */\n  disconnect() {\n    this.subscribed = false;\n    this.subscriptionPending = false;\n  }\n\n  /** Handles a PusherEvent. For internal use only.\n   *\n   * @param {PusherEvent} event\n   */\n  handleEvent(event: PusherEvent) {\n    var eventName = event.event;\n    var data = event.data;\n    if (eventName === 'pusher_internal:subscription_succeeded') {\n      this.handleSubscriptionSucceededEvent(event);\n    } else if (eventName === 'pusher_internal:subscription_count') {\n      this.handleSubscriptionCountEvent(event);\n    } else if (eventName.indexOf('pusher_internal:') !== 0) {\n      var metadata: Metadata = {};\n      this.emit(eventName, data, metadata);\n    }\n  }\n\n  handleSubscriptionSucceededEvent(event: PusherEvent) {\n    this.subscriptionPending = false;\n    this.subscribed = true;\n    if (this.subscriptionCancelled) {\n      this.pusher.unsubscribe(this.name);\n    } else {\n      this.emit('pusher:subscription_succeeded', event.data);\n    }\n  }\n\n  handleSubscriptionCountEvent(event: PusherEvent) {\n    if (event.data.subscription_count) {\n      this.subscriptionCount = event.data.subscription_count;\n    }\n\n    this.emit('pusher:subscription_count', event.data);\n  }\n\n  /** Sends a subscription request. For internal use only. */\n  subscribe() {\n    if (this.subscribed) {\n      return;\n    }\n    this.subscriptionPending = true;\n    this.subscriptionCancelled = false;\n    this.authorize(\n      this.pusher.connection.socket_id,\n      (error: Error | null, data: ChannelAuthorizationData) => {\n        if (error) {\n          this.subscriptionPending = false;\n          // Why not bind to 'pusher:subscription_error' a level up, and log there?\n          // Binding to this event would cause the warning about no callbacks being\n          // bound (see constructor) to be suppressed, that's not what we want.\n          Logger.error(error.toString());\n          this.emit(\n            'pusher:subscription_error',\n            Object.assign(\n              {},\n              {\n                type: 'AuthError',\n                error: error.message\n              },\n              error instanceof HTTPAuthError ? { status: error.status } : {}\n            )\n          );\n        } else {\n          this.pusher.send_event('pusher:subscribe', {\n            auth: data.auth,\n            channel_data: data.channel_data,\n            channel: this.name\n          });\n        }\n      }\n    );\n  }\n\n  /** Sends an unsubscription request. For internal use only. */\n  unsubscribe() {\n    this.subscribed = false;\n    this.pusher.send_event('pusher:unsubscribe', {\n      channel: this.name\n    });\n  }\n\n  /** Cancels an in progress subscription. For internal use only. */\n  cancelSubscription() {\n    this.subscriptionCancelled = true;\n  }\n\n  /** Reinstates an in progress subscripiton. For internal use only. */\n  reinstateSubscription() {\n    this.subscriptionCancelled = false;\n  }\n}\n","import Factory from '../utils/factory';\nimport Channel from './channel';\nimport { ChannelAuthorizationCallback } from '../auth/options';\n\n/** Extends public channels to provide private channel interface.\n *\n * @param {String} name\n * @param {Pusher} pusher\n */\nexport default class PrivateChannel extends Channel {\n  /** Authorizes the connection to use the channel.\n   *\n   * @param  {String} socketId\n   * @param  {Function} callback\n   */\n  authorize(socketId: string, callback: ChannelAuthorizationCallback) {\n    return this.pusher.config.channelAuthorizer(\n      {\n        channelName: this.name,\n        socketId: socketId\n      },\n      callback\n    );\n  }\n}\n","import * as Collections from '../utils/collections';\n\n/** Represents a collection of members of a presence channel. */\nexport default class Members {\n  members: any;\n  count: number;\n  myID: any;\n  me: any;\n\n  constructor() {\n    this.reset();\n  }\n\n  /** Returns member's info for given id.\n   *\n   * Resulting object containts two fields - id and info.\n   *\n   * @param {Number} id\n   * @return {Object} member's info or null\n   */\n  get(id: string): any {\n    if (Object.prototype.hasOwnProperty.call(this.members, id)) {\n      return {\n        id: id,\n        info: this.members[id]\n      };\n    } else {\n      return null;\n    }\n  }\n\n  /** Calls back for each member in unspecified order.\n   *\n   * @param  {Function} callback\n   */\n  each(callback: Function) {\n    Collections.objectApply(this.members, (member, id) => {\n      callback(this.get(id));\n    });\n  }\n\n  /** Updates the id for connected member. For internal use only. */\n  setMyID(id: string) {\n    this.myID = id;\n  }\n\n  /** Handles subscription data. For internal use only. */\n  onSubscription(subscriptionData: any) {\n    this.members = subscriptionData.presence.hash;\n    this.count = subscriptionData.presence.count;\n    this.me = this.get(this.myID);\n  }\n\n  /** Adds a new member to the collection. For internal use only. */\n  addMember(memberData: any) {\n    if (this.get(memberData.user_id) === null) {\n      this.count++;\n    }\n    this.members[memberData.user_id] = memberData.user_info;\n    return this.get(memberData.user_id);\n  }\n\n  /** Adds a member from the collection. For internal use only. */\n  removeMember(memberData: any) {\n    var member = this.get(memberData.user_id);\n    if (member) {\n      delete this.members[memberData.user_id];\n      this.count--;\n    }\n    return member;\n  }\n\n  /** Resets the collection to the initial state. For internal use only. */\n  reset() {\n    this.members = {};\n    this.count = 0;\n    this.myID = null;\n    this.me = null;\n  }\n}\n","import PrivateChannel from './private_channel';\nimport Logger from '../logger';\nimport Members from './members';\nimport Pusher from '../pusher';\nimport UrlStore from 'core/utils/url_store';\nimport { PusherEvent } from '../connection/protocol/message-types';\nimport Metadata from './metadata';\nimport { ChannelAuthorizationData } from '../auth/options';\n\nexport default class PresenceChannel extends PrivateChannel {\n  members: Members;\n\n  /** Adds presence channel functionality to private channels.\n   *\n   * @param {String} name\n   * @param {Pusher} pusher\n   */\n  constructor(name: string, pusher: Pusher) {\n    super(name, pusher);\n    this.members = new Members();\n  }\n\n  /** Authorizes the connection as a member of the channel.\n   *\n   * @param  {String} socketId\n   * @param  {Function} callback\n   */\n  authorize(socketId: string, callback: Function) {\n    super.authorize(socketId, async (error, authData) => {\n      if (!error) {\n        authData = authData as ChannelAuthorizationData;\n        if (authData.channel_data != null) {\n          var channelData = JSON.parse(authData.channel_data);\n          this.members.setMyID(channelData.user_id);\n        } else {\n          await this.pusher.user.signinDonePromise;\n          if (this.pusher.user.user_data != null) {\n            // If the user is signed in, get the id of the authenticated user\n            // and allow the presence authorization to continue.\n            this.members.setMyID(this.pusher.user.user_data.id);\n          } else {\n            let suffix = UrlStore.buildLogSuffix('authorizationEndpoint');\n            Logger.error(\n              `Invalid auth response for channel '${this.name}', ` +\n                `expected 'channel_data' field. ${suffix}, ` +\n                `or the user should be signed in.`\n            );\n            callback('Invalid auth response');\n            return;\n          }\n        }\n      }\n      callback(error, authData);\n    });\n  }\n\n  /** Handles presence and subscription events. For internal use only.\n   *\n   * @param {PusherEvent} event\n   */\n  handleEvent(event: PusherEvent) {\n    var eventName = event.event;\n    if (eventName.indexOf('pusher_internal:') === 0) {\n      this.handleInternalEvent(event);\n    } else {\n      var data = event.data;\n      var metadata: Metadata = {};\n      if (event.user_id) {\n        metadata.user_id = event.user_id;\n      }\n      this.emit(eventName, data, metadata);\n    }\n  }\n  handleInternalEvent(event: PusherEvent) {\n    var eventName = event.event;\n    var data = event.data;\n    switch (eventName) {\n      case 'pusher_internal:subscription_succeeded':\n        this.handleSubscriptionSucceededEvent(event);\n        break;\n      case 'pusher_internal:subscription_count':\n        this.handleSubscriptionCountEvent(event);\n        break;\n      case 'pusher_internal:member_added':\n        var addedMember = this.members.addMember(data);\n        this.emit('pusher:member_added', addedMember);\n        break;\n      case 'pusher_internal:member_removed':\n        var removedMember = this.members.removeMember(data);\n        if (removedMember) {\n          this.emit('pusher:member_removed', removedMember);\n        }\n        break;\n    }\n  }\n\n  handleSubscriptionSucceededEvent(event: PusherEvent) {\n    this.subscriptionPending = false;\n    this.subscribed = true;\n    if (this.subscriptionCancelled) {\n      this.pusher.unsubscribe(this.name);\n    } else {\n      this.members.onSubscription(event.data);\n      this.emit('pusher:subscription_succeeded', this.members);\n    }\n  }\n\n  /** Resets the channel state, including members map. For internal use only. */\n  disconnect() {\n    this.members.reset();\n    super.disconnect();\n  }\n}\n","import PrivateChannel from './private_channel';\nimport * as Errors from '../errors';\nimport Logger from '../logger';\nimport Pusher from '../pusher';\nimport { decode as encodeUTF8 } from '@stablelib/utf8';\nimport { decode as decodeBase64 } from '@stablelib/base64';\nimport Dispatcher from '../events/dispatcher';\nimport { PusherEvent } from '../connection/protocol/message-types';\nimport {\n  ChannelAuthorizationData,\n  ChannelAuthorizationCallback\n} from '../auth/options';\nimport * as nacl from 'tweetnacl';\n\n/** Extends private channels to provide encrypted channel interface.\n *\n * @param {String} name\n * @param {Pusher} pusher\n */\nexport default class EncryptedChannel extends PrivateChannel {\n  key: Uint8Array = null;\n  nacl: nacl;\n\n  constructor(name: string, pusher: Pusher, nacl: nacl) {\n    super(name, pusher);\n    this.nacl = nacl;\n  }\n\n  /** Authorizes the connection to use the channel.\n   *\n   * @param  {String} socketId\n   * @param  {Function} callback\n   */\n  authorize(socketId: string, callback: ChannelAuthorizationCallback) {\n    super.authorize(\n      socketId,\n      (error: Error | null, authData: ChannelAuthorizationData) => {\n        if (error) {\n          callback(error, authData);\n          return;\n        }\n        let sharedSecret = authData['shared_secret'];\n        if (!sharedSecret) {\n          callback(\n            new Error(\n              `No shared_secret key in auth payload for encrypted channel: ${this.name}`\n            ),\n            null\n          );\n          return;\n        }\n        this.key = decodeBase64(sharedSecret);\n        delete authData['shared_secret'];\n        callback(null, authData);\n      }\n    );\n  }\n\n  trigger(event: string, data: any): boolean {\n    throw new Errors.UnsupportedFeature(\n      'Client events are not currently supported for encrypted channels'\n    );\n  }\n\n  /** Handles an event. For internal use only.\n   *\n   * @param {PusherEvent} event\n   */\n  handleEvent(event: PusherEvent) {\n    var eventName = event.event;\n    var data = event.data;\n    if (\n      eventName.indexOf('pusher_internal:') === 0 ||\n      eventName.indexOf('pusher:') === 0\n    ) {\n      super.handleEvent(event);\n      return;\n    }\n    this.handleEncryptedEvent(eventName, data);\n  }\n\n  private handleEncryptedEvent(event: string, data: any): void {\n    if (!this.key) {\n      Logger.debug(\n        'Received encrypted event before key has been retrieved from the authEndpoint'\n      );\n      return;\n    }\n    if (!data.ciphertext || !data.nonce) {\n      Logger.error(\n        'Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: ' +\n          data\n      );\n      return;\n    }\n    let cipherText = decodeBase64(data.ciphertext);\n    if (cipherText.length < this.nacl.secretbox.overheadLength) {\n      Logger.error(\n        `Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${cipherText.length}`\n      );\n      return;\n    }\n    let nonce = decodeBase64(data.nonce);\n    if (nonce.length < this.nacl.secretbox.nonceLength) {\n      Logger.error(\n        `Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${nonce.length}`\n      );\n      return;\n    }\n\n    let bytes = this.nacl.secretbox.open(cipherText, nonce, this.key);\n    if (bytes === null) {\n      Logger.debug(\n        'Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint...'\n      );\n      // Try a single time to retrieve a new auth key and decrypt the event with it\n      // If this fails, a new key will be requested when a new message is received\n      this.authorize(this.pusher.connection.socket_id, (error, authData) => {\n        if (error) {\n          Logger.error(\n            `Failed to make a request to the authEndpoint: ${authData}. Unable to fetch new key, so dropping encrypted event`\n          );\n          return;\n        }\n        bytes = this.nacl.secretbox.open(cipherText, nonce, this.key);\n        if (bytes === null) {\n          Logger.error(\n            `Failed to decrypt event with new key. Dropping encrypted event`\n          );\n          return;\n        }\n        this.emit(event, this.getDataToEmit(bytes));\n        return;\n      });\n      return;\n    }\n    this.emit(event, this.getDataToEmit(bytes));\n  }\n\n  // Try and parse the decrypted bytes as JSON. If we can't parse it, just\n  // return the utf-8 string\n  getDataToEmit(bytes: Uint8Array): string {\n    let raw = encodeUTF8(bytes);\n    try {\n      return JSON.parse(raw);\n    } catch {\n      return raw;\n    }\n  }\n}\n","import { default as EventsDispatcher } from '../events/dispatcher';\nimport { OneOffTimer as Timer } from '../utils/timers';\nimport { Config } from '../config';\nimport Logger from '../logger';\nimport HandshakePayload from './handshake/handshake_payload';\nimport Connection from './connection';\nimport Strategy from '../strategies/strategy';\nimport StrategyRunner from '../strategies/strategy_runner';\nimport * as Collections from '../utils/collections';\nimport Timeline from '../timeline/timeline';\nimport ConnectionManagerOptions from './connection_manager_options';\nimport Runtime from 'runtime';\n\nimport {\n  ErrorCallbacks,\n  HandshakeCallbacks,\n  ConnectionCallbacks\n} from './callbacks';\nimport Action from './protocol/action';\n\n/** Manages connection to Pusher.\n *\n * Uses a strategy (currently only default), timers and network availability\n * info to establish a connection and export its state. In case of failures,\n * manages reconnection attempts.\n *\n * Exports state changes as following events:\n * - \"state_change\", { previous: p, current: state }\n * - state\n *\n * States:\n * - initialized - initial state, never transitioned to\n * - connecting - connection is being established\n * - connected - connection has been fully established\n * - disconnected - on requested disconnection\n * - unavailable - after connection timeout or when there's no network\n * - failed - when the connection strategy is not supported\n *\n * Options:\n * - unavailableTimeout - time to transition to unavailable state\n * - activityTimeout - time after which ping message should be sent\n * - pongTimeout - time for Pusher to respond with pong before reconnecting\n *\n * @param {String} key application key\n * @param {Object} options\n */\nexport default class ConnectionManager extends EventsDispatcher {\n  key: string;\n  options: ConnectionManagerOptions;\n  state: string;\n  connection: Connection;\n  usingTLS: boolean;\n  timeline: Timeline;\n  socket_id: string;\n  unavailableTimer: Timer;\n  activityTimer: Timer;\n  retryTimer: Timer;\n  activityTimeout: number;\n  strategy: Strategy;\n  runner: StrategyRunner;\n  errorCallbacks: ErrorCallbacks;\n  handshakeCallbacks: HandshakeCallbacks;\n  connectionCallbacks: ConnectionCallbacks;\n\n  constructor(key: string, options: ConnectionManagerOptions) {\n    super();\n    this.state = 'initialized';\n    this.connection = null;\n\n    this.key = key;\n    this.options = options;\n    this.timeline = this.options.timeline;\n    this.usingTLS = this.options.useTLS;\n\n    this.errorCallbacks = this.buildErrorCallbacks();\n    this.connectionCallbacks = this.buildConnectionCallbacks(\n      this.errorCallbacks\n    );\n    this.handshakeCallbacks = this.buildHandshakeCallbacks(this.errorCallbacks);\n\n    var Network = Runtime.getNetwork();\n\n    Network.bind('online', () => {\n      this.timeline.info({ netinfo: 'online' });\n      if (this.state === 'connecting' || this.state === 'unavailable') {\n        this.retryIn(0);\n      }\n    });\n    Network.bind('offline', () => {\n      this.timeline.info({ netinfo: 'offline' });\n      if (this.connection) {\n        this.sendActivityCheck();\n      }\n    });\n\n    this.updateStrategy();\n  }\n\n  /** Establishes a connection to Pusher.\n   *\n   * Does nothing when connection is already established. See top-level doc\n   * to find events emitted on connection attempts.\n   */\n  connect() {\n    if (this.connection || this.runner) {\n      return;\n    }\n    if (!this.strategy.isSupported()) {\n      this.updateState('failed');\n      return;\n    }\n    this.updateState('connecting');\n    this.startConnecting();\n    this.setUnavailableTimer();\n  }\n\n  /** Sends raw data.\n   *\n   * @param {String} data\n   */\n  send(data) {\n    if (this.connection) {\n      return this.connection.send(data);\n    } else {\n      return false;\n    }\n  }\n\n  /** Sends an event.\n   *\n   * @param {String} name\n   * @param {String} data\n   * @param {String} [channel]\n   * @returns {Boolean} whether message was sent or not\n   */\n  send_event(name: string, data: any, channel?: string) {\n    if (this.connection) {\n      return this.connection.send_event(name, data, channel);\n    } else {\n      return false;\n    }\n  }\n\n  /** Closes the connection. */\n  disconnect() {\n    this.disconnectInternally();\n    this.updateState('disconnected');\n  }\n\n  isUsingTLS() {\n    return this.usingTLS;\n  }\n\n  private startConnecting() {\n    var callback = (error, handshake) => {\n      if (error) {\n        this.runner = this.strategy.connect(0, callback);\n      } else {\n        if (handshake.action === 'error') {\n          this.emit('error', {\n            type: 'HandshakeError',\n            error: handshake.error\n          });\n          this.timeline.error({ handshakeError: handshake.error });\n        } else {\n          this.abortConnecting(); // we don't support switching connections yet\n          this.handshakeCallbacks[handshake.action](handshake);\n        }\n      }\n    };\n    this.runner = this.strategy.connect(0, callback);\n  }\n\n  private abortConnecting() {\n    if (this.runner) {\n      this.runner.abort();\n      this.runner = null;\n    }\n  }\n\n  private disconnectInternally() {\n    this.abortConnecting();\n    this.clearRetryTimer();\n    this.clearUnavailableTimer();\n    if (this.connection) {\n      var connection = this.abandonConnection();\n      connection.close();\n    }\n  }\n\n  private updateStrategy() {\n    this.strategy = this.options.getStrategy({\n      key: this.key,\n      timeline: this.timeline,\n      useTLS: this.usingTLS\n    });\n  }\n\n  private retryIn(delay) {\n    this.timeline.info({ action: 'retry', delay: delay });\n    if (delay > 0) {\n      this.emit('connecting_in', Math.round(delay / 1000));\n    }\n    this.retryTimer = new Timer(delay || 0, () => {\n      this.disconnectInternally();\n      this.connect();\n    });\n  }\n\n  private clearRetryTimer() {\n    if (this.retryTimer) {\n      this.retryTimer.ensureAborted();\n      this.retryTimer = null;\n    }\n  }\n\n  private setUnavailableTimer() {\n    this.unavailableTimer = new Timer(this.options.unavailableTimeout, () => {\n      this.updateState('unavailable');\n    });\n  }\n\n  private clearUnavailableTimer() {\n    if (this.unavailableTimer) {\n      this.unavailableTimer.ensureAborted();\n    }\n  }\n\n  private sendActivityCheck() {\n    this.stopActivityCheck();\n    this.connection.ping();\n    // wait for pong response\n    this.activityTimer = new Timer(this.options.pongTimeout, () => {\n      this.timeline.error({ pong_timed_out: this.options.pongTimeout });\n      this.retryIn(0);\n    });\n  }\n\n  private resetActivityCheck() {\n    this.stopActivityCheck();\n    // send ping after inactivity\n    if (this.connection && !this.connection.handlesActivityChecks()) {\n      this.activityTimer = new Timer(this.activityTimeout, () => {\n        this.sendActivityCheck();\n      });\n    }\n  }\n\n  private stopActivityCheck() {\n    if (this.activityTimer) {\n      this.activityTimer.ensureAborted();\n    }\n  }\n\n  private buildConnectionCallbacks(\n    errorCallbacks: ErrorCallbacks\n  ): ConnectionCallbacks {\n    return Collections.extend<ConnectionCallbacks>({}, errorCallbacks, {\n      message: message => {\n        // includes pong messages from server\n        this.resetActivityCheck();\n        this.emit('message', message);\n      },\n      ping: () => {\n        this.send_event('pusher:pong', {});\n      },\n      activity: () => {\n        this.resetActivityCheck();\n      },\n      error: error => {\n        // just emit error to user - socket will already be closed by browser\n        this.emit('error', error);\n      },\n      closed: () => {\n        this.abandonConnection();\n        if (this.shouldRetry()) {\n          this.retryIn(1000);\n        }\n      }\n    });\n  }\n\n  private buildHandshakeCallbacks(\n    errorCallbacks: ErrorCallbacks\n  ): HandshakeCallbacks {\n    return Collections.extend<HandshakeCallbacks>({}, errorCallbacks, {\n      connected: (handshake: HandshakePayload) => {\n        this.activityTimeout = Math.min(\n          this.options.activityTimeout,\n          handshake.activityTimeout,\n          handshake.connection.activityTimeout || Infinity\n        );\n        this.clearUnavailableTimer();\n        this.setConnection(handshake.connection);\n        this.socket_id = this.connection.id;\n        this.updateState('connected', { socket_id: this.socket_id });\n      }\n    });\n  }\n\n  private buildErrorCallbacks(): ErrorCallbacks {\n    let withErrorEmitted = callback => {\n      return (result: Action | HandshakePayload) => {\n        if (result.error) {\n          this.emit('error', { type: 'WebSocketError', error: result.error });\n        }\n        callback(result);\n      };\n    };\n\n    return {\n      tls_only: withErrorEmitted(() => {\n        this.usingTLS = true;\n        this.updateStrategy();\n        this.retryIn(0);\n      }),\n      refused: withErrorEmitted(() => {\n        this.disconnect();\n      }),\n      backoff: withErrorEmitted(() => {\n        this.retryIn(1000);\n      }),\n      retry: withErrorEmitted(() => {\n        this.retryIn(0);\n      })\n    };\n  }\n\n  private setConnection(connection) {\n    this.connection = connection;\n    for (var event in this.connectionCallbacks) {\n      this.connection.bind(event, this.connectionCallbacks[event]);\n    }\n    this.resetActivityCheck();\n  }\n\n  private abandonConnection() {\n    if (!this.connection) {\n      return;\n    }\n    this.stopActivityCheck();\n    for (var event in this.connectionCallbacks) {\n      this.connection.unbind(event, this.connectionCallbacks[event]);\n    }\n    var connection = this.connection;\n    this.connection = null;\n    return connection;\n  }\n\n  private updateState(newState: string, data?: any) {\n    var previousState = this.state;\n    this.state = newState;\n    if (previousState !== newState) {\n      var newStateDescription = newState;\n      if (newStateDescription === 'connected') {\n        newStateDescription += ' with new socket ID ' + data.socket_id;\n      }\n      Logger.debug(\n        'State changed',\n        previousState + ' -> ' + newStateDescription\n      );\n      this.timeline.info({ state: newState, params: data });\n      this.emit('state_change', { previous: previousState, current: newState });\n      this.emit(newState, data);\n    }\n  }\n\n  private shouldRetry(): boolean {\n    return this.state === 'connecting' || this.state === 'connected';\n  }\n}\n","import Channel from './channel';\nimport * as Collections from '../utils/collections';\nimport ChannelTable from './channel_table';\nimport Factory from '../utils/factory';\nimport Pusher from '../pusher';\nimport Logger from '../logger';\nimport * as Errors from '../errors';\nimport urlStore from '../utils/url_store';\n\n/** Handles a channel map. */\nexport default class Channels {\n  channels: ChannelTable;\n\n  constructor() {\n    this.channels = {};\n  }\n\n  /** Creates or retrieves an existing channel by its name.\n   *\n   * @param {String} name\n   * @param {Pusher} pusher\n   * @return {Channel}\n   */\n  add(name: string, pusher: Pusher) {\n    if (!this.channels[name]) {\n      this.channels[name] = createChannel(name, pusher);\n    }\n    return this.channels[name];\n  }\n\n  /** Returns a list of all channels\n   *\n   * @return {Array}\n   */\n  all(): Channel[] {\n    return Collections.values(this.channels);\n  }\n\n  /** Finds a channel by its name.\n   *\n   * @param {String} name\n   * @return {Channel} channel or null if it doesn't exist\n   */\n  find(name: string) {\n    return this.channels[name];\n  }\n\n  /** Removes a channel from the map.\n   *\n   * @param {String} name\n   */\n  remove(name: string) {\n    var channel = this.channels[name];\n    delete this.channels[name];\n    return channel;\n  }\n\n  /** Proxies disconnection signal to all channels. */\n  disconnect() {\n    Collections.objectApply(this.channels, function(channel) {\n      channel.disconnect();\n    });\n  }\n}\n\nfunction createChannel(name: string, pusher: Pusher): Channel {\n  if (name.indexOf('private-encrypted-') === 0) {\n    if (pusher.config.nacl) {\n      return Factory.createEncryptedChannel(name, pusher, pusher.config.nacl);\n    }\n    let errMsg =\n      'Tried to subscribe to a private-encrypted- channel but no nacl implementation available';\n    let suffix = urlStore.buildLogSuffix('encryptedChannelSupport');\n    throw new Errors.UnsupportedFeature(`${errMsg}. ${suffix}`);\n  } else if (name.indexOf('private-') === 0) {\n    return Factory.createPrivateChannel(name, pusher);\n  } else if (name.indexOf('presence-') === 0) {\n    return Factory.createPresenceChannel(name, pusher);\n  } else if (name.indexOf('#') === 0) {\n    throw new Errors.BadChannelName(\n      'Cannot create a channel with name \"' + name + '\".'\n    );\n  } else {\n    return Factory.createChannel(name, pusher);\n  }\n}\n","import AssistantToTheTransportManager from '../transports/assistant_to_the_transport_manager';\nimport PingDelayOptions from '../transports/ping_delay_options';\nimport Transport from '../transports/transport';\nimport TransportManager from '../transports/transport_manager';\nimport Handshake from '../connection/handshake';\nimport TransportConnection from '../transports/transport_connection';\nimport SocketHooks from '../http/socket_hooks';\nimport HTTPSocket from '../http/http_socket';\n\nimport Timeline from '../timeline/timeline';\nimport {\n  default as TimelineSender,\n  TimelineSenderOptions\n} from '../timeline/timeline_sender';\nimport PresenceChannel from '../channels/presence_channel';\nimport PrivateChannel from '../channels/private_channel';\nimport EncryptedChannel from '../channels/encrypted_channel';\nimport Channel from '../channels/channel';\nimport ConnectionManager from '../connection/connection_manager';\nimport ConnectionManagerOptions from '../connection/connection_manager_options';\nimport Ajax from '../http/ajax';\nimport Channels from '../channels/channels';\nimport Pusher from '../pusher';\nimport { Config } from '../config';\nimport * as nacl from 'tweetnacl';\n\nvar Factory = {\n  createChannels(): Channels {\n    return new Channels();\n  },\n\n  createConnectionManager(\n    key: string,\n    options: ConnectionManagerOptions\n  ): ConnectionManager {\n    return new ConnectionManager(key, options);\n  },\n\n  createChannel(name: string, pusher: Pusher): Channel {\n    return new Channel(name, pusher);\n  },\n\n  createPrivateChannel(name: string, pusher: Pusher): PrivateChannel {\n    return new PrivateChannel(name, pusher);\n  },\n\n  createPresenceChannel(name: string, pusher: Pusher): PresenceChannel {\n    return new PresenceChannel(name, pusher);\n  },\n\n  createEncryptedChannel(\n    name: string,\n    pusher: Pusher,\n    nacl: nacl\n  ): EncryptedChannel {\n    return new EncryptedChannel(name, pusher, nacl);\n  },\n\n  createTimelineSender(timeline: Timeline, options: TimelineSenderOptions) {\n    return new TimelineSender(timeline, options);\n  },\n\n  createHandshake(\n    transport: TransportConnection,\n    callback: (HandshakePayload) => void\n  ): Handshake {\n    return new Handshake(transport, callback);\n  },\n\n  createAssistantToTheTransportManager(\n    manager: TransportManager,\n    transport: Transport,\n    options: PingDelayOptions\n  ): AssistantToTheTransportManager {\n    return new AssistantToTheTransportManager(manager, transport, options);\n  }\n};\n\nexport default Factory;\n","import AssistantToTheTransportManager from './assistant_to_the_transport_manager';\nimport Transport from './transport';\nimport PingDelayOptions from './ping_delay_options';\nimport Factory from '../utils/factory';\n\nexport interface TransportManagerOptions extends PingDelayOptions {\n  lives?: number;\n}\n\n/** Keeps track of the number of lives left for a transport.\n *\n * In the beginning of a session, transports may be assigned a number of\n * lives. When an AssistantToTheTransportManager instance reports a transport\n * connection closed uncleanly, the transport loses a life. When the number\n * of lives drops to zero, the transport gets disabled by its manager.\n *\n * @param {Object} options\n */\nexport default class TransportManager {\n  options: TransportManagerOptions;\n  livesLeft: number;\n\n  constructor(options: TransportManagerOptions) {\n    this.options = options || {};\n    this.livesLeft = this.options.lives || Infinity;\n  }\n\n  /** Creates a assistant for the transport.\n   *\n   * @param {Transport} transport\n   * @returns {AssistantToTheTransportManager}\n   */\n  getAssistant(transport: Transport): AssistantToTheTransportManager {\n    return Factory.createAssistantToTheTransportManager(this, transport, {\n      minPingDelay: this.options.minPingDelay,\n      maxPingDelay: this.options.maxPingDelay\n    });\n  }\n\n  /** Returns whether the transport has any lives left.\n   *\n   * @returns {Boolean}\n   */\n  isAlive(): boolean {\n    return this.livesLeft > 0;\n  }\n\n  /** Takes one life from the transport. */\n  reportDeath() {\n    this.livesLeft -= 1;\n  }\n}\n","import * as Collections from '../utils/collections';\nimport Util from '../util';\nimport { OneOffTimer as Timer } from '../utils/timers';\nimport Strategy from './strategy';\nimport StrategyOptions from './strategy_options';\n\n/** Loops through strategies with optional timeouts.\n *\n * Options:\n * - loop - whether it should loop through the substrategy list\n * - timeout - initial timeout for a single substrategy\n * - timeoutLimit - maximum timeout\n *\n * @param {Strategy[]} strategies\n * @param {Object} options\n */\nexport default class SequentialStrategy implements Strategy {\n  strategies: Strategy[];\n  loop: boolean;\n  failFast: boolean;\n  timeout: number;\n  timeoutLimit: number;\n\n  constructor(strategies: Strategy[], options: StrategyOptions) {\n    this.strategies = strategies;\n    this.loop = Boolean(options.loop);\n    this.failFast = Boolean(options.failFast);\n    this.timeout = options.timeout;\n    this.timeoutLimit = options.timeoutLimit;\n  }\n\n  isSupported(): boolean {\n    return Collections.any(this.strategies, Util.method('isSupported'));\n  }\n\n  connect(minPriority: number, callback: Function) {\n    var strategies = this.strategies;\n    var current = 0;\n    var timeout = this.timeout;\n    var runner = null;\n\n    var tryNextStrategy = (error, handshake) => {\n      if (handshake) {\n        callback(null, handshake);\n      } else {\n        current = current + 1;\n        if (this.loop) {\n          current = current % strategies.length;\n        }\n\n        if (current < strategies.length) {\n          if (timeout) {\n            timeout = timeout * 2;\n            if (this.timeoutLimit) {\n              timeout = Math.min(timeout, this.timeoutLimit);\n            }\n          }\n          runner = this.tryStrategy(\n            strategies[current],\n            minPriority,\n            { timeout, failFast: this.failFast },\n            tryNextStrategy\n          );\n        } else {\n          callback(true);\n        }\n      }\n    };\n\n    runner = this.tryStrategy(\n      strategies[current],\n      minPriority,\n      { timeout: timeout, failFast: this.failFast },\n      tryNextStrategy\n    );\n\n    return {\n      abort: function() {\n        runner.abort();\n      },\n      forceMinPriority: function(p) {\n        minPriority = p;\n        if (runner) {\n          runner.forceMinPriority(p);\n        }\n      }\n    };\n  }\n\n  private tryStrategy(\n    strategy: Strategy,\n    minPriority: number,\n    options: StrategyOptions,\n    callback: Function\n  ) {\n    var timer = null;\n    var runner = null;\n\n    if (options.timeout > 0) {\n      timer = new Timer(options.timeout, function() {\n        runner.abort();\n        callback(true);\n      });\n    }\n\n    runner = strategy.connect(minPriority, function(error, handshake) {\n      if (error && timer && timer.isRunning() && !options.failFast) {\n        // advance to the next strategy after the timeout\n        return;\n      }\n      if (timer) {\n        timer.ensureAborted();\n      }\n      callback(error, handshake);\n    });\n\n    return {\n      abort: function() {\n        if (timer) {\n          timer.ensureAborted();\n        }\n        runner.abort();\n      },\n      forceMinPriority: function(p) {\n        runner.forceMinPriority(p);\n      }\n    };\n  }\n}\n","import * as Collections from '../utils/collections';\nimport Util from '../util';\nimport Strategy from './strategy';\n\n/** Launches all substrategies and emits prioritized connected transports.\n *\n * @param {Array} strategies\n */\nexport default class BestConnectedEverStrategy implements Strategy {\n  strategies: Strategy[];\n\n  constructor(strategies: Strategy[]) {\n    this.strategies = strategies;\n  }\n\n  isSupported(): boolean {\n    return Collections.any(this.strategies, Util.method('isSupported'));\n  }\n\n  connect(minPriority: number, callback: Function) {\n    return connect(this.strategies, minPriority, function(i, runners) {\n      return function(error, handshake) {\n        runners[i].error = error;\n        if (error) {\n          if (allRunnersFailed(runners)) {\n            callback(true);\n          }\n          return;\n        }\n        Collections.apply(runners, function(runner) {\n          runner.forceMinPriority(handshake.transport.priority);\n        });\n        callback(null, handshake);\n      };\n    });\n  }\n}\n\n/** Connects to all strategies in parallel.\n *\n * Callback builder should be a function that takes two arguments: index\n * and a list of runners. It should return another function that will be\n * passed to the substrategy with given index. Runners can be aborted using\n * abortRunner(s) functions from this class.\n *\n * @param  {Array} strategies\n * @param  {Function} callbackBuilder\n * @return {Object} strategy runner\n */\nfunction connect(\n  strategies: Strategy[],\n  minPriority: number,\n  callbackBuilder: Function\n) {\n  var runners = Collections.map(strategies, function(strategy, i, _, rs) {\n    return strategy.connect(minPriority, callbackBuilder(i, rs));\n  });\n  return {\n    abort: function() {\n      Collections.apply(runners, abortRunner);\n    },\n    forceMinPriority: function(p) {\n      Collections.apply(runners, function(runner) {\n        runner.forceMinPriority(p);\n      });\n    }\n  };\n}\n\nfunction allRunnersFailed(runners): boolean {\n  return Collections.all(runners, function(runner) {\n    return Boolean(runner.error);\n  });\n}\n\nfunction abortRunner(runner) {\n  if (!runner.error && !runner.aborted) {\n    runner.abort();\n    runner.aborted = true;\n  }\n}\n","import Util from '../util';\nimport Runtime from 'runtime';\nimport Strategy from './strategy';\nimport SequentialStrategy from './sequential_strategy';\nimport StrategyOptions from './strategy_options';\nimport TransportStrategy from './transport_strategy';\nimport Timeline from '../timeline/timeline';\nimport * as Collections from '../utils/collections';\n\nexport interface TransportStrategyDictionary {\n  [key: string]: TransportStrategy;\n}\n\n/** Caches last successful transport and uses it for following attempts.\n *\n * @param {Strategy} strategy\n * @param {Object} transports\n * @param {Object} options\n */\nexport default class CachedStrategy implements Strategy {\n  strategy: Strategy;\n  transports: TransportStrategyDictionary;\n  ttl: number;\n  usingTLS: boolean;\n  timeline: Timeline;\n\n  constructor(\n    strategy: Strategy,\n    transports: TransportStrategyDictionary,\n    options: StrategyOptions\n  ) {\n    this.strategy = strategy;\n    this.transports = transports;\n    this.ttl = options.ttl || 1800 * 1000;\n    this.usingTLS = options.useTLS;\n    this.timeline = options.timeline;\n  }\n\n  isSupported(): boolean {\n    return this.strategy.isSupported();\n  }\n\n  connect(minPriority: number, callback: Function) {\n    var usingTLS = this.usingTLS;\n    var info = fetchTransportCache(usingTLS);\n\n    var strategies = [this.strategy];\n    if (info && info.timestamp + this.ttl >= Util.now()) {\n      var transport = this.transports[info.transport];\n      if (transport) {\n        this.timeline.info({\n          cached: true,\n          transport: info.transport,\n          latency: info.latency\n        });\n        strategies.push(\n          new SequentialStrategy([transport], {\n            timeout: info.latency * 2 + 1000,\n            failFast: true\n          })\n        );\n      }\n    }\n\n    var startTimestamp = Util.now();\n    var runner = strategies\n      .pop()\n      .connect(minPriority, function cb(error, handshake) {\n        if (error) {\n          flushTransportCache(usingTLS);\n          if (strategies.length > 0) {\n            startTimestamp = Util.now();\n            runner = strategies.pop().connect(minPriority, cb);\n          } else {\n            callback(error);\n          }\n        } else {\n          storeTransportCache(\n            usingTLS,\n            handshake.transport.name,\n            Util.now() - startTimestamp\n          );\n          callback(null, handshake);\n        }\n      });\n\n    return {\n      abort: function() {\n        runner.abort();\n      },\n      forceMinPriority: function(p) {\n        minPriority = p;\n        if (runner) {\n          runner.forceMinPriority(p);\n        }\n      }\n    };\n  }\n}\n\nfunction getTransportCacheKey(usingTLS: boolean): string {\n  return 'pusherTransport' + (usingTLS ? 'TLS' : 'NonTLS');\n}\n\nfunction fetchTransportCache(usingTLS: boolean): any {\n  var storage = Runtime.getLocalStorage();\n  if (storage) {\n    try {\n      var serializedCache = storage[getTransportCacheKey(usingTLS)];\n      if (serializedCache) {\n        return JSON.parse(serializedCache);\n      }\n    } catch (e) {\n      flushTransportCache(usingTLS);\n    }\n  }\n  return null;\n}\n\nfunction storeTransportCache(\n  usingTLS: boolean,\n  transport: TransportStrategy,\n  latency: number\n) {\n  var storage = Runtime.getLocalStorage();\n  if (storage) {\n    try {\n      storage[getTransportCacheKey(usingTLS)] = Collections.safeJSONStringify({\n        timestamp: Util.now(),\n        transport: transport,\n        latency: latency\n      });\n    } catch (e) {\n      // catch over quota exceptions raised by localStorage\n    }\n  }\n}\n\nfunction flushTransportCache(usingTLS: boolean) {\n  var storage = Runtime.getLocalStorage();\n  if (storage) {\n    try {\n      delete storage[getTransportCacheKey(usingTLS)];\n    } catch (e) {\n      // catch exceptions raised by localStorage\n    }\n  }\n}\n","import { OneOffTimer as Timer } from '../utils/timers';\nimport Strategy from './strategy';\nimport StrategyOptions from './strategy_options';\n\n/** Runs substrategy after specified delay.\n *\n * Options:\n * - delay - time in miliseconds to delay the substrategy attempt\n *\n * @param {Strategy} strategy\n * @param {Object} options\n */\nexport default class DelayedStrategy implements Strategy {\n  strategy: Strategy;\n  options: { delay: number };\n\n  constructor(strategy: Strategy, { delay: number }) {\n    this.strategy = strategy;\n    this.options = { delay: number };\n  }\n\n  isSupported(): boolean {\n    return this.strategy.isSupported();\n  }\n\n  connect(minPriority: number, callback: Function) {\n    var strategy = this.strategy;\n    var runner;\n    var timer = new Timer(this.options.delay, function() {\n      runner = strategy.connect(minPriority, callback);\n    });\n\n    return {\n      abort: function() {\n        timer.ensureAborted();\n        if (runner) {\n          runner.abort();\n        }\n      },\n      forceMinPriority: function(p) {\n        minPriority = p;\n        if (runner) {\n          runner.forceMinPriority(p);\n        }\n      }\n    };\n  }\n}\n","import Strategy from './strategy';\nimport StrategyRunner from './strategy_runner';\n\n/** Proxies method calls to one of substrategies basing on the test function.\n *\n * @param {Function} test\n * @param {Strategy} trueBranch strategy used when test returns true\n * @param {Strategy} falseBranch strategy used when test returns false\n */\nexport default class IfStrategy implements Strategy {\n  test: () => boolean;\n  trueBranch: Strategy;\n  falseBranch: Strategy;\n\n  constructor(\n    test: () => boolean,\n    trueBranch: Strategy,\n    falseBranch: Strategy\n  ) {\n    this.test = test;\n    this.trueBranch = trueBranch;\n    this.falseBranch = falseBranch;\n  }\n\n  isSupported(): boolean {\n    var branch = this.test() ? this.trueBranch : this.falseBranch;\n    return branch.isSupported();\n  }\n\n  connect(minPriority: number, callback: Function): StrategyRunner {\n    var branch = this.test() ? this.trueBranch : this.falseBranch;\n    return branch.connect(minPriority, callback);\n  }\n}\n","import Strategy from './strategy';\nimport StrategyRunner from './strategy_runner';\n\n/** Launches the substrategy and terminates on the first open connection.\n *\n * @param {Strategy} strategy\n */\nexport default class FirstConnectedStrategy implements Strategy {\n  strategy: Strategy;\n\n  constructor(strategy: Strategy) {\n    this.strategy = strategy;\n  }\n\n  isSupported(): boolean {\n    return this.strategy.isSupported();\n  }\n\n  connect(minPriority: number, callback: Function): StrategyRunner {\n    var runner = this.strategy.connect(minPriority, function(error, handshake) {\n      if (handshake) {\n        runner.abort();\n      }\n      callback(error, handshake);\n    });\n    return runner;\n  }\n}\n","import * as Collections from 'core/utils/collections';\nimport TransportManager from 'core/transports/transport_manager';\nimport Strategy from 'core/strategies/strategy';\nimport StrategyOptions from 'core/strategies/strategy_options';\nimport SequentialStrategy from 'core/strategies/sequential_strategy';\nimport BestConnectedEverStrategy from 'core/strategies/best_connected_ever_strategy';\nimport CachedStrategy, {\n  TransportStrategyDictionary\n} from 'core/strategies/cached_strategy';\nimport DelayedStrategy from 'core/strategies/delayed_strategy';\nimport IfStrategy from 'core/strategies/if_strategy';\nimport FirstConnectedStrategy from 'core/strategies/first_connected_strategy';\nimport { Config } from 'core/config';\n\nfunction testSupportsStrategy(strategy: Strategy) {\n  return function() {\n    return strategy.isSupported();\n  };\n}\n\nvar getDefaultStrategy = function(\n  config: Config,\n  baseOptions: StrategyOptions,\n  defineTransport: Function\n): Strategy {\n  var definedTransports = <TransportStrategyDictionary>{};\n\n  function defineTransportStrategy(\n    name: string,\n    type: string,\n    priority: number,\n    options: StrategyOptions,\n    manager?: TransportManager\n  ) {\n    var transport = defineTransport(\n      config,\n      name,\n      type,\n      priority,\n      options,\n      manager\n    );\n\n    definedTransports[name] = transport;\n\n    return transport;\n  }\n\n  var ws_options: StrategyOptions = Object.assign({}, baseOptions, {\n    hostNonTLS: config.wsHost + ':' + config.wsPort,\n    hostTLS: config.wsHost + ':' + config.wssPort,\n    httpPath: config.wsPath\n  });\n  var wss_options: StrategyOptions = Object.assign({}, ws_options, {\n    useTLS: true\n  });\n  var sockjs_options: StrategyOptions = Object.assign({}, baseOptions, {\n    hostNonTLS: config.httpHost + ':' + config.httpPort,\n    hostTLS: config.httpHost + ':' + config.httpsPort,\n    httpPath: config.httpPath\n  });\n\n  var timeouts = {\n    loop: true,\n    timeout: 15000,\n    timeoutLimit: 60000\n  };\n\n  var ws_manager = new TransportManager({\n    lives: 2,\n    minPingDelay: 10000,\n    maxPingDelay: config.activityTimeout\n  });\n  var streaming_manager = new TransportManager({\n    lives: 2,\n    minPingDelay: 10000,\n    maxPingDelay: config.activityTimeout\n  });\n\n  var ws_transport = defineTransportStrategy(\n    'ws',\n    'ws',\n    3,\n    ws_options,\n    ws_manager\n  );\n  var wss_transport = defineTransportStrategy(\n    'wss',\n    'ws',\n    3,\n    wss_options,\n    ws_manager\n  );\n  var sockjs_transport = defineTransportStrategy(\n    'sockjs',\n    'sockjs',\n    1,\n    sockjs_options\n  );\n  var xhr_streaming_transport = defineTransportStrategy(\n    'xhr_streaming',\n    'xhr_streaming',\n    1,\n    sockjs_options,\n    streaming_manager\n  );\n  var xdr_streaming_transport = defineTransportStrategy(\n    'xdr_streaming',\n    'xdr_streaming',\n    1,\n    sockjs_options,\n    streaming_manager\n  );\n  var xhr_polling_transport = defineTransportStrategy(\n    'xhr_polling',\n    'xhr_polling',\n    1,\n    sockjs_options\n  );\n  var xdr_polling_transport = defineTransportStrategy(\n    'xdr_polling',\n    'xdr_polling',\n    1,\n    sockjs_options\n  );\n\n  var ws_loop = new SequentialStrategy([ws_transport], timeouts);\n  var wss_loop = new SequentialStrategy([wss_transport], timeouts);\n  var sockjs_loop = new SequentialStrategy([sockjs_transport], timeouts);\n  var streaming_loop = new SequentialStrategy(\n    [\n      new IfStrategy(\n        testSupportsStrategy(xhr_streaming_transport),\n        xhr_streaming_transport,\n        xdr_streaming_transport\n      )\n    ],\n    timeouts\n  );\n  var polling_loop = new SequentialStrategy(\n    [\n      new IfStrategy(\n        testSupportsStrategy(xhr_polling_transport),\n        xhr_polling_transport,\n        xdr_polling_transport\n      )\n    ],\n    timeouts\n  );\n\n  var http_loop = new SequentialStrategy(\n    [\n      new IfStrategy(\n        testSupportsStrategy(streaming_loop),\n        new BestConnectedEverStrategy([\n          streaming_loop,\n          new DelayedStrategy(polling_loop, { delay: 4000 })\n        ]),\n        polling_loop\n      )\n    ],\n    timeouts\n  );\n\n  var http_fallback_loop = new IfStrategy(\n    testSupportsStrategy(http_loop),\n    http_loop,\n    sockjs_loop\n  );\n\n  var wsStrategy;\n  if (baseOptions.useTLS) {\n    wsStrategy = new BestConnectedEverStrategy([\n      ws_loop,\n      new DelayedStrategy(http_fallback_loop, { delay: 2000 })\n    ]);\n  } else {\n    wsStrategy = new BestConnectedEverStrategy([\n      ws_loop,\n      new DelayedStrategy(wss_loop, { delay: 2000 }),\n      new DelayedStrategy(http_fallback_loop, { delay: 5000 })\n    ]);\n  }\n\n  return new CachedStrategy(\n    new FirstConnectedStrategy(\n      new IfStrategy(\n        testSupportsStrategy(ws_transport),\n        wsStrategy,\n        http_fallback_loop\n      )\n    ),\n    definedTransports,\n    {\n      ttl: 1800000,\n      timeline: baseOptions.timeline,\n      useTLS: baseOptions.useTLS\n    }\n  );\n};\n\nexport default getDefaultStrategy;\n","import { Dependencies } from '../dom/dependencies';\n\n/** Initializes the transport.\n *\n * Fetches resources if needed and then transitions to initialized.\n */\nexport default function() {\n  var self = this;\n\n  self.timeline.info(\n    self.buildTimelineMessage({\n      transport: self.name + (self.options.useTLS ? 's' : '')\n    })\n  );\n\n  if (self.hooks.isInitialized()) {\n    self.changeState('initialized');\n  } else if (self.hooks.file) {\n    self.changeState('initializing');\n    Dependencies.load(\n      self.hooks.file,\n      { useTLS: self.options.useTLS },\n      function(error, callback) {\n        if (self.hooks.isInitialized()) {\n          self.changeState('initialized');\n          callback(true);\n        } else {\n          if (error) {\n            self.onError(error);\n          }\n          self.onClose();\n          callback(false);\n        }\n      }\n    );\n  } else {\n    self.onClose();\n  }\n}\n","import HTTPRequest from 'core/http/http_request';\nimport RequestHooks from 'core/http/request_hooks';\nimport Ajax from 'core/http/ajax';\nimport * as Errors from 'core/errors';\n\nvar hooks: RequestHooks = {\n  getRequest: function(socket: HTTPRequest): Ajax {\n    var xdr = new (<any>window).XDomainRequest();\n    xdr.ontimeout = function() {\n      socket.emit('error', new Errors.RequestTimedOut());\n      socket.close();\n    };\n    xdr.onerror = function(e) {\n      socket.emit('error', e);\n      socket.close();\n    };\n    xdr.onprogress = function() {\n      if (xdr.responseText && xdr.responseText.length > 0) {\n        socket.onChunk(200, xdr.responseText);\n      }\n    };\n    xdr.onload = function() {\n      if (xdr.responseText && xdr.responseText.length > 0) {\n        socket.onChunk(200, xdr.responseText);\n      }\n      socket.emit('finished', 200);\n      socket.close();\n    };\n    return xdr;\n  },\n  abortRequest: function(xdr: Ajax) {\n    xdr.ontimeout = xdr.onerror = xdr.onprogress = xdr.onload = null;\n    xdr.abort();\n  }\n};\n\nexport default hooks;\n","import Runtime from 'runtime';\nimport RequestHooks from './request_hooks';\nimport Ajax from './ajax';\nimport { default as EventsDispatcher } from '../events/dispatcher';\n\nconst MAX_BUFFER_LENGTH = 256 * 1024;\n\nexport default class HTTPRequest extends EventsDispatcher {\n  hooks: RequestHooks;\n  method: string;\n  url: string;\n  position: number;\n  xhr: Ajax;\n  unloader: Function;\n\n  constructor(hooks: RequestHooks, method: string, url: string) {\n    super();\n    this.hooks = hooks;\n    this.method = method;\n    this.url = url;\n  }\n\n  start(payload?: any) {\n    this.position = 0;\n    this.xhr = this.hooks.getRequest(this);\n\n    this.unloader = () => {\n      this.close();\n    };\n    Runtime.addUnloadListener(this.unloader);\n\n    this.xhr.open(this.method, this.url, true);\n\n    if (this.xhr.setRequestHeader) {\n      this.xhr.setRequestHeader('Content-Type', 'application/json'); // ReactNative doesn't set this header by default.\n    }\n    this.xhr.send(payload);\n  }\n\n  close() {\n    if (this.unloader) {\n      Runtime.removeUnloadListener(this.unloader);\n      this.unloader = null;\n    }\n    if (this.xhr) {\n      this.hooks.abortRequest(this.xhr);\n      this.xhr = null;\n    }\n  }\n\n  onChunk(status: number, data: any) {\n    while (true) {\n      var chunk = this.advanceBuffer(data);\n      if (chunk) {\n        this.emit('chunk', { status: status, data: chunk });\n      } else {\n        break;\n      }\n    }\n    if (this.isBufferTooLong(data)) {\n      this.emit('buffer_too_long');\n    }\n  }\n\n  private advanceBuffer(buffer: any[]): any {\n    var unreadData = buffer.slice(this.position);\n    var endOfLinePosition = unreadData.indexOf('\\n');\n\n    if (endOfLinePosition !== -1) {\n      this.position += endOfLinePosition + 1;\n      return unreadData.slice(0, endOfLinePosition);\n    } else {\n      // chunk is not finished yet, don't move the buffer pointer\n      return null;\n    }\n  }\n\n  private isBufferTooLong(buffer: any): boolean {\n    return this.position === buffer.length && buffer.length > MAX_BUFFER_LENGTH;\n  }\n}\n","enum State {\n  CONNECTING = 0,\n  OPEN = 1,\n  CLOSED = 3\n}\n\nexport default State;\n","import URLLocation from './url_location';\nimport State from './state';\nimport Socket from '../socket';\nimport SocketHooks from './socket_hooks';\nimport Util from '../util';\nimport Ajax from './ajax';\nimport HTTPRequest from './http_request';\nimport Runtime from 'runtime';\n\nvar autoIncrement = 1;\n\nclass HTTPSocket implements Socket {\n  hooks: SocketHooks;\n  session: string;\n  location: URLLocation;\n  readyState: State;\n  stream: HTTPRequest;\n\n  onopen: () => void;\n  onerror: (error: any) => void;\n  onclose: (closeEvent: any) => void;\n  onmessage: (message: any) => void;\n  onactivity: () => void;\n\n  constructor(hooks: SocketHooks, url: string) {\n    this.hooks = hooks;\n    this.session = randomNumber(1000) + '/' + randomString(8);\n    this.location = getLocation(url);\n    this.readyState = State.CONNECTING;\n    this.openStream();\n  }\n\n  send(payload: any) {\n    return this.sendRaw(JSON.stringify([payload]));\n  }\n\n  ping() {\n    this.hooks.sendHeartbeat(this);\n  }\n\n  close(code: any, reason: any) {\n    this.onClose(code, reason, true);\n  }\n\n  /** For internal use only */\n  sendRaw(payload: any): boolean {\n    if (this.readyState === State.OPEN) {\n      try {\n        Runtime.createSocketRequest(\n          'POST',\n          getUniqueURL(getSendURL(this.location, this.session))\n        ).start(payload);\n        return true;\n      } catch (e) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /** For internal use only */\n  reconnect() {\n    this.closeStream();\n    this.openStream();\n  }\n\n  /** For internal use only */\n  onClose(code, reason, wasClean) {\n    this.closeStream();\n    this.readyState = State.CLOSED;\n    if (this.onclose) {\n      this.onclose({\n        code: code,\n        reason: reason,\n        wasClean: wasClean\n      });\n    }\n  }\n\n  private onChunk(chunk) {\n    if (chunk.status !== 200) {\n      return;\n    }\n    if (this.readyState === State.OPEN) {\n      this.onActivity();\n    }\n\n    var payload;\n    var type = chunk.data.slice(0, 1);\n    switch (type) {\n      case 'o':\n        payload = JSON.parse(chunk.data.slice(1) || '{}');\n        this.onOpen(payload);\n        break;\n      case 'a':\n        payload = JSON.parse(chunk.data.slice(1) || '[]');\n        for (var i = 0; i < payload.length; i++) {\n          this.onEvent(payload[i]);\n        }\n        break;\n      case 'm':\n        payload = JSON.parse(chunk.data.slice(1) || 'null');\n        this.onEvent(payload);\n        break;\n      case 'h':\n        this.hooks.onHeartbeat(this);\n        break;\n      case 'c':\n        payload = JSON.parse(chunk.data.slice(1) || '[]');\n        this.onClose(payload[0], payload[1], true);\n        break;\n    }\n  }\n\n  private onOpen(options) {\n    if (this.readyState === State.CONNECTING) {\n      if (options && options.hostname) {\n        this.location.base = replaceHost(this.location.base, options.hostname);\n      }\n      this.readyState = State.OPEN;\n\n      if (this.onopen) {\n        this.onopen();\n      }\n    } else {\n      this.onClose(1006, 'Server lost session', true);\n    }\n  }\n\n  private onEvent(event) {\n    if (this.readyState === State.OPEN && this.onmessage) {\n      this.onmessage({ data: event });\n    }\n  }\n\n  private onActivity() {\n    if (this.onactivity) {\n      this.onactivity();\n    }\n  }\n\n  private onError(error) {\n    if (this.onerror) {\n      this.onerror(error);\n    }\n  }\n\n  private openStream() {\n    this.stream = Runtime.createSocketRequest(\n      'POST',\n      getUniqueURL(this.hooks.getReceiveURL(this.location, this.session))\n    );\n\n    this.stream.bind('chunk', chunk => {\n      this.onChunk(chunk);\n    });\n    this.stream.bind('finished', status => {\n      this.hooks.onFinished(this, status);\n    });\n    this.stream.bind('buffer_too_long', () => {\n      this.reconnect();\n    });\n\n    try {\n      this.stream.start();\n    } catch (error) {\n      Util.defer(() => {\n        this.onError(error);\n        this.onClose(1006, 'Could not start streaming', false);\n      });\n    }\n  }\n\n  private closeStream() {\n    if (this.stream) {\n      this.stream.unbind_all();\n      this.stream.close();\n      this.stream = null;\n    }\n  }\n}\n\nfunction getLocation(url): URLLocation {\n  var parts = /([^\\?]*)\\/*(\\??.*)/.exec(url);\n  return {\n    base: parts[1],\n    queryString: parts[2]\n  };\n}\n\nfunction getSendURL(url: URLLocation, session: string): string {\n  return url.base + '/' + session + '/xhr_send';\n}\n\nfunction getUniqueURL(url: string): string {\n  var separator = url.indexOf('?') === -1 ? '?' : '&';\n  return url + separator + 't=' + +new Date() + '&n=' + autoIncrement++;\n}\n\nfunction replaceHost(url: string, hostname: string): string {\n  var urlParts = /(https?:\\/\\/)([^\\/:]+)((\\/|:)?.*)/.exec(url);\n  return urlParts[1] + hostname + urlParts[3];\n}\n\nfunction randomNumber(max: number): number {\n  return Math.floor(Math.random() * max);\n}\n\nfunction randomString(length: number): string {\n  var result = [];\n  for (var i = 0; i < length; i++) {\n    result.push(randomNumber(32).toString(32));\n  }\n  return result.join('');\n}\n\nexport default HTTPSocket;\n","import SocketHooks from './socket_hooks';\nimport HTTPSocket from './http_socket';\n\nvar hooks: SocketHooks = {\n  getReceiveURL: function(url, session) {\n    return url.base + '/' + session + '/xhr_streaming' + url.queryString;\n  },\n  onHeartbeat: function(socket) {\n    socket.sendRaw('[]');\n  },\n  sendHeartbeat: function(socket) {\n    socket.sendRaw('[]');\n  },\n  onFinished: function(socket, status) {\n    socket.onClose(1006, 'Connection interrupted (' + status + ')', false);\n  }\n};\n\nexport default hooks;\n","import SocketHooks from './socket_hooks';\nimport URLLocation from './url_location';\nimport HTTPSocket from './http_socket';\n\nvar hooks: SocketHooks = {\n  getReceiveURL: function(url: URLLocation, session: string): string {\n    return url.base + '/' + session + '/xhr' + url.queryString;\n  },\n  onHeartbeat: function() {\n    // next HTTP request will reset server's activity timer\n  },\n  sendHeartbeat: function(socket) {\n    socket.sendRaw('[]');\n  },\n  onFinished: function(socket, status) {\n    if (status === 200) {\n      socket.reconnect();\n    } else {\n      socket.onClose(1006, 'Connection interrupted (' + status + ')', false);\n    }\n  }\n};\n\nexport default hooks;\n","import HTTPRequest from 'core/http/http_request';\nimport RequestHooks from 'core/http/request_hooks';\nimport Ajax from 'core/http/ajax';\nimport Runtime from 'runtime';\n\nvar hooks: RequestHooks = {\n  getRequest: function(socket: HTTPRequest): Ajax {\n    var Constructor = Runtime.getXHRAPI();\n    var xhr = new Constructor();\n    xhr.onreadystatechange = xhr.onprogress = function() {\n      switch (xhr.readyState) {\n        case 3:\n          if (xhr.responseText && xhr.responseText.length > 0) {\n            socket.onChunk(xhr.status, xhr.responseText);\n          }\n          break;\n        case 4:\n          // this happens only on errors, never after calling close\n          if (xhr.responseText && xhr.responseText.length > 0) {\n            socket.onChunk(xhr.status, xhr.responseText);\n          }\n          socket.emit('finished', xhr.status);\n          socket.close();\n          break;\n      }\n    };\n    return xhr;\n  },\n  abortRequest: function(xhr: Ajax) {\n    xhr.onreadystatechange = null;\n    xhr.abort();\n  }\n};\n\nexport default hooks;\n","import HTTPRequest from 'core/http/http_request';\nimport HTTPSocket from 'core/http/http_socket';\nimport SocketHooks from 'core/http/socket_hooks';\nimport RequestHooks from 'core/http/request_hooks';\nimport streamingHooks from 'core/http/http_streaming_socket';\nimport pollingHooks from 'core/http/http_polling_socket';\nimport xhrHooks from './http_xhr_request';\nimport HTTPFactory from 'core/http/http_factory';\n\nvar HTTP: HTTPFactory = {\n  createStreamingSocket(url: string): HTTPSocket {\n    return this.createSocket(streamingHooks, url);\n  },\n\n  createPollingSocket(url: string): HTTPSocket {\n    return this.createSocket(pollingHooks, url);\n  },\n\n  createSocket(hooks: SocketHooks, url: string): HTTPSocket {\n    return new HTTPSocket(hooks, url);\n  },\n\n  createXHR(method: string, url: string): HTTPRequest {\n    return this.createRequest(xhrHooks, method, url);\n  },\n\n  createRequest(hooks: RequestHooks, method: string, url: string): HTTPRequest {\n    return new HTTPRequest(hooks, method, url);\n  }\n};\n\nexport default HTTP;\n","import xdrHooks from './http_xdomain_request';\nimport HTTP from 'isomorphic/http/http';\n\nHTTP.createXDR = function(method, url) {\n  return this.createRequest(xdrHooks, method, url);\n};\n\nexport default HTTP;\n","import Browser from './browser';\nimport { Dependencies, DependenciesReceivers } from './dom/dependencies';\nimport { AuthTransport, AuthTransports } from 'core/auth/auth_transports';\nimport xhrAuth from 'isomorphic/auth/xhr_auth';\nimport jsonpAuth from './auth/jsonp_auth';\nimport TimelineTransport from 'core/timeline/timeline_transport';\nimport TimelineSender from 'core/timeline/timeline_sender';\nimport ScriptRequest from './dom/script_request';\nimport JSONPRequest from './dom/jsonp_request';\nimport * as Collections from 'core/utils/collections';\nimport { ScriptReceivers } from './dom/script_receiver_factory';\nimport jsonpTimeline from './timeline/jsonp_timeline';\nimport Transports from './transports/transports';\nimport Ajax from 'core/http/ajax';\nimport { Network } from './net_info';\nimport getDefaultStrategy from './default_strategy';\nimport transportConnectionInitializer from './transports/transport_connection_initializer';\nimport HTTPFactory from './http/http';\nimport HTTPRequest from 'core/http/http_request';\n\nvar Runtime: Browser = {\n  // for jsonp auth\n  nextAuthCallbackID: 1,\n  auth_callbacks: {},\n  ScriptReceivers,\n  DependenciesReceivers,\n  getDefaultStrategy,\n  Transports,\n  transportConnectionInitializer,\n  HTTPFactory,\n\n  TimelineTransport: jsonpTimeline,\n\n  getXHRAPI() {\n    return window.XMLHttpRequest;\n  },\n\n  getWebSocketAPI() {\n    return window.WebSocket || window.MozWebSocket;\n  },\n\n  setup(PusherClass): void {\n    (<any>window).Pusher = PusherClass; // JSONp requires Pusher to be in the global scope.\n    var initializeOnDocumentBody = () => {\n      this.onDocumentBody(PusherClass.ready);\n    };\n    if (!(<any>window).JSON) {\n      Dependencies.load('json2', {}, initializeOnDocumentBody);\n    } else {\n      initializeOnDocumentBody();\n    }\n  },\n\n  getDocument(): Document {\n    return document;\n  },\n\n  getProtocol(): string {\n    return this.getDocument().location.protocol;\n  },\n\n  getAuthorizers(): AuthTransports {\n    return { ajax: xhrAuth, jsonp: jsonpAuth };\n  },\n\n  onDocumentBody(callback: Function) {\n    if (document.body) {\n      callback();\n    } else {\n      setTimeout(() => {\n        this.onDocumentBody(callback);\n      }, 0);\n    }\n  },\n\n  createJSONPRequest(url: string, data: any): JSONPRequest {\n    return new JSONPRequest(url, data);\n  },\n\n  createScriptRequest(src: string): ScriptRequest {\n    return new ScriptRequest(src);\n  },\n\n  getLocalStorage() {\n    try {\n      return window.localStorage;\n    } catch (e) {\n      return undefined;\n    }\n  },\n\n  createXHR(): Ajax {\n    if (this.getXHRAPI()) {\n      return this.createXMLHttpRequest();\n    } else {\n      return this.createMicrosoftXHR();\n    }\n  },\n\n  createXMLHttpRequest(): Ajax {\n    var Constructor = this.getXHRAPI();\n    return new Constructor();\n  },\n\n  createMicrosoftXHR(): Ajax {\n    return new ActiveXObject('Microsoft.XMLHTTP');\n  },\n\n  getNetwork() {\n    return Network;\n  },\n\n  createWebSocket(url: string): any {\n    var Constructor = this.getWebSocketAPI();\n    return new Constructor(url);\n  },\n\n  createSocketRequest(method: string, url: string): HTTPRequest {\n    if (this.isXHRSupported()) {\n      return this.HTTPFactory.createXHR(method, url);\n    } else if (this.isXDRSupported(url.indexOf('https:') === 0)) {\n      return this.HTTPFactory.createXDR(method, url);\n    } else {\n      throw 'Cross-origin HTTP requests are not supported';\n    }\n  },\n\n  isXHRSupported(): boolean {\n    var Constructor = this.getXHRAPI();\n    return (\n      Boolean(Constructor) && new Constructor().withCredentials !== undefined\n    );\n  },\n\n  isXDRSupported(useTLS?: boolean): boolean {\n    var protocol = useTLS ? 'https:' : 'http:';\n    var documentProtocol = this.getProtocol();\n    return (\n      Boolean(<any>window['XDomainRequest']) && documentProtocol === protocol\n    );\n  },\n\n  addUnloadListener(listener: any) {\n    if (window.addEventListener !== undefined) {\n      window.addEventListener('unload', listener, false);\n    } else if (window.attachEvent !== undefined) {\n      window.attachEvent('onunload', listener);\n    }\n  },\n\n  removeUnloadListener(listener: any) {\n    if (window.addEventListener !== undefined) {\n      window.removeEventListener('unload', listener, false);\n    } else if (window.detachEvent !== undefined) {\n      window.detachEvent('onunload', listener);\n    }\n  }\n};\n\nexport default Runtime;\n","enum TimelineLevel {\n  ERROR = 3,\n  INFO = 6,\n  DEBUG = 7\n}\n\nexport default TimelineLevel;\n","import * as Collections from '../utils/collections';\nimport Util from '../util';\nimport { default as Level } from './level';\n\nexport interface TimelineOptions {\n  level?: Level;\n  limit?: number;\n  version?: string;\n  cluster?: string;\n  features?: string[];\n  params?: any;\n}\n\nexport default class Timeline {\n  key: string;\n  session: number;\n  events: any[];\n  options: TimelineOptions;\n  sent: number;\n  uniqueID: number;\n\n  constructor(key: string, session: number, options: TimelineOptions) {\n    this.key = key;\n    this.session = session;\n    this.events = [];\n    this.options = options || {};\n    this.sent = 0;\n    this.uniqueID = 0;\n  }\n\n  log(level, event) {\n    if (level <= this.options.level) {\n      this.events.push(\n        Collections.extend({}, event, { timestamp: Util.now() })\n      );\n      if (this.options.limit && this.events.length > this.options.limit) {\n        this.events.shift();\n      }\n    }\n  }\n\n  error(event) {\n    this.log(Level.ERROR, event);\n  }\n\n  info(event) {\n    this.log(Level.INFO, event);\n  }\n\n  debug(event) {\n    this.log(Level.DEBUG, event);\n  }\n\n  isEmpty() {\n    return this.events.length === 0;\n  }\n\n  send(sendfn, callback) {\n    var data = Collections.extend(\n      {\n        session: this.session,\n        bundle: this.sent + 1,\n        key: this.key,\n        lib: 'js',\n        version: this.options.version,\n        cluster: this.options.cluster,\n        features: this.options.features,\n        timeline: this.events\n      },\n      this.options.params\n    );\n\n    this.events = [];\n    sendfn(data, (error, result) => {\n      if (!error) {\n        this.sent++;\n      }\n      if (callback) {\n        callback(error, result);\n      }\n    });\n\n    return true;\n  }\n\n  generateUniqueID(): number {\n    this.uniqueID++;\n    return this.uniqueID;\n  }\n}\n","import Factory from '../utils/factory';\nimport Util from '../util';\nimport * as Errors from '../errors';\nimport * as Collections from '../utils/collections';\nimport Strategy from './strategy';\nimport Transport from '../transports/transport';\nimport StrategyOptions from './strategy_options';\nimport Handshake from '../connection/handshake';\n\n/** Provides a strategy interface for transports.\n *\n * @param {String} name\n * @param {Number} priority\n * @param {Class} transport\n * @param {Object} options\n */\nexport default class TransportStrategy implements Strategy {\n  name: string;\n  priority: number;\n  transport: Transport;\n  options: StrategyOptions;\n\n  constructor(\n    name: string,\n    priority: number,\n    transport: Transport,\n    options: StrategyOptions\n  ) {\n    this.name = name;\n    this.priority = priority;\n    this.transport = transport;\n    this.options = options || {};\n  }\n\n  /** Returns whether the transport is supported in the browser.\n   *\n   * @returns {Boolean}\n   */\n  isSupported(): boolean {\n    return this.transport.isSupported({\n      useTLS: this.options.useTLS\n    });\n  }\n\n  /** Launches a connection attempt and returns a strategy runner.\n   *\n   * @param  {Function} callback\n   * @return {Object} strategy runner\n   */\n  connect(minPriority: number, callback: Function) {\n    if (!this.isSupported()) {\n      return failAttempt(new Errors.UnsupportedStrategy(), callback);\n    } else if (this.priority < minPriority) {\n      return failAttempt(new Errors.TransportPriorityTooLow(), callback);\n    }\n\n    var connected = false;\n    var transport = this.transport.createConnection(\n      this.name,\n      this.priority,\n      this.options.key,\n      this.options\n    );\n    var handshake = null;\n\n    var onInitialized = function() {\n      transport.unbind('initialized', onInitialized);\n      transport.connect();\n    };\n    var onOpen = function() {\n      handshake = Factory.createHandshake(transport, function(result) {\n        connected = true;\n        unbindListeners();\n        callback(null, result);\n      });\n    };\n    var onError = function(error) {\n      unbindListeners();\n      callback(error);\n    };\n    var onClosed = function() {\n      unbindListeners();\n      var serializedTransport;\n\n      // The reason for this try/catch block is that on React Native\n      // the WebSocket object is circular. Therefore transport.socket will\n      // throw errors upon stringification. Collections.safeJSONStringify\n      // discards circular references when serializing.\n      serializedTransport = Collections.safeJSONStringify(transport);\n      callback(new Errors.TransportClosed(serializedTransport));\n    };\n\n    var unbindListeners = function() {\n      transport.unbind('initialized', onInitialized);\n      transport.unbind('open', onOpen);\n      transport.unbind('error', onError);\n      transport.unbind('closed', onClosed);\n    };\n\n    transport.bind('initialized', onInitialized);\n    transport.bind('open', onOpen);\n    transport.bind('error', onError);\n    transport.bind('closed', onClosed);\n\n    // connect will be called automatically after initialization\n    transport.initialize();\n\n    return {\n      abort: () => {\n        if (connected) {\n          return;\n        }\n        unbindListeners();\n        if (handshake) {\n          handshake.close();\n        } else {\n          transport.close();\n        }\n      },\n      forceMinPriority: p => {\n        if (connected) {\n          return;\n        }\n        if (this.priority < p) {\n          if (handshake) {\n            handshake.close();\n          } else {\n            transport.close();\n          }\n        }\n      }\n    };\n  }\n}\n\nfunction failAttempt(error: Error, callback: Function) {\n  Util.defer(function() {\n    callback(error);\n  });\n  return {\n    abort: function() {},\n    forceMinPriority: function() {}\n  };\n}\n","import * as Collections from '../utils/collections';\nimport Util from '../util';\nimport TransportManager from '../transports/transport_manager';\nimport * as Errors from '../errors';\nimport Strategy from './strategy';\nimport TransportStrategy from './transport_strategy';\nimport StrategyOptions from '../strategies/strategy_options';\nimport { Config } from '../config';\nimport Runtime from 'runtime';\n\nconst { Transports } = Runtime;\n\nexport var defineTransport = function(\n  config: Config,\n  name: string,\n  type: string,\n  priority: number,\n  options: StrategyOptions,\n  manager?: TransportManager\n): Strategy {\n  var transportClass = Transports[type];\n  if (!transportClass) {\n    throw new Errors.UnsupportedTransport(type);\n  }\n\n  var enabled =\n    (!config.enabledTransports ||\n      Collections.arrayIndexOf(config.enabledTransports, name) !== -1) &&\n    (!config.disabledTransports ||\n      Collections.arrayIndexOf(config.disabledTransports, name) === -1);\n\n  var transport;\n  if (enabled) {\n    options = Object.assign(\n      { ignoreNullOrigin: config.ignoreNullOrigin },\n      options\n    );\n\n    transport = new TransportStrategy(\n      name,\n      priority,\n      manager ? manager.getAssistant(transportClass) : transportClass,\n      options\n    );\n  } else {\n    transport = UnsupportedStrategy;\n  }\n\n  return transport;\n};\n\nvar UnsupportedStrategy: Strategy = {\n  isSupported: function() {\n    return false;\n  },\n  connect: function(_, callback) {\n    var deferred = Util.defer(function() {\n      callback(new Errors.UnsupportedStrategy());\n    });\n    return {\n      abort: function() {\n        deferred.ensureAborted();\n      },\n      forceMinPriority: function() {}\n    };\n  }\n};\n","import {\n  UserAuthenticationCallback,\n  InternalAuthOptions,\n  UserAuthenticationHandler,\n  UserAuthenticationRequestParams,\n  AuthRequestType\n} from './options';\n\nimport Runtime from 'runtime';\n\nconst composeChannelQuery = (\n  params: UserAuthenticationRequestParams,\n  authOptions: InternalAuthOptions\n) => {\n  var query = 'socket_id=' + encodeURIComponent(params.socketId);\n\n  for (var i in authOptions.params) {\n    query +=\n      '&' +\n      encodeURIComponent(i) +\n      '=' +\n      encodeURIComponent(authOptions.params[i]);\n  }\n\n  return query;\n};\n\nconst UserAuthenticator = (\n  authOptions: InternalAuthOptions\n): UserAuthenticationHandler => {\n  if (typeof Runtime.getAuthorizers()[authOptions.transport] === 'undefined') {\n    throw `'${authOptions.transport}' is not a recognized auth transport`;\n  }\n\n  return (\n    params: UserAuthenticationRequestParams,\n    callback: UserAuthenticationCallback\n  ) => {\n    const query = composeChannelQuery(params, authOptions);\n\n    Runtime.getAuthorizers()[authOptions.transport](\n      Runtime,\n      query,\n      authOptions,\n      AuthRequestType.UserAuthentication,\n      callback\n    );\n  };\n};\n\nexport default UserAuthenticator;\n","import {\n  AuthRequestType,\n  InternalAuthOptions,\n  ChannelAuthorizationHandler,\n  ChannelAuthorizationRequestParams,\n  ChannelAuthorizationCallback\n} from './options';\n\nimport Runtime from 'runtime';\n\nconst composeChannelQuery = (\n  params: ChannelAuthorizationRequestParams,\n  authOptions: InternalAuthOptions\n) => {\n  var query = 'socket_id=' + encodeURIComponent(params.socketId);\n\n  query += '&channel_name=' + encodeURIComponent(params.channelName);\n\n  for (var i in authOptions.params) {\n    query +=\n      '&' +\n      encodeURIComponent(i) +\n      '=' +\n      encodeURIComponent(authOptions.params[i]);\n  }\n\n  return query;\n};\n\nconst ChannelAuthorizer = (\n  authOptions: InternalAuthOptions\n): ChannelAuthorizationHandler => {\n  if (typeof Runtime.getAuthorizers()[authOptions.transport] === 'undefined') {\n    throw `'${authOptions.transport}' is not a recognized auth transport`;\n  }\n\n  return (\n    params: ChannelAuthorizationRequestParams,\n    callback: ChannelAuthorizationCallback\n  ) => {\n    const query = composeChannelQuery(params, authOptions);\n\n    Runtime.getAuthorizers()[authOptions.transport](\n      Runtime,\n      query,\n      authOptions,\n      AuthRequestType.ChannelAuthorization,\n      callback\n    );\n  };\n};\n\nexport default ChannelAuthorizer;\n","import Channel from '../channels/channel';\nimport {\n  ChannelAuthorizationCallback,\n  ChannelAuthorizationHandler,\n  ChannelAuthorizationRequestParams,\n  InternalAuthOptions\n} from './options';\n\nexport interface DeprecatedChannelAuthorizer {\n  authorize(socketId: string, callback: ChannelAuthorizationCallback): void;\n}\n\nexport interface ChannelAuthorizerGenerator {\n  (\n    channel: Channel,\n    options: DeprecatedAuthorizerOptions\n  ): DeprecatedChannelAuthorizer;\n}\n\nexport interface DeprecatedAuthOptions {\n  params?: any;\n  headers?: any;\n}\n\nexport interface DeprecatedAuthorizerOptions {\n  authTransport: 'ajax' | 'jsonp';\n  authEndpoint: string;\n  auth?: DeprecatedAuthOptions;\n}\n\nexport const ChannelAuthorizerProxy = (\n  pusher,\n  authOptions: InternalAuthOptions,\n  channelAuthorizerGenerator: ChannelAuthorizerGenerator\n): ChannelAuthorizationHandler => {\n  const deprecatedAuthorizerOptions: DeprecatedAuthorizerOptions = {\n    authTransport: authOptions.transport,\n    authEndpoint: authOptions.endpoint,\n    auth: {\n      params: authOptions.params,\n      headers: authOptions.headers\n    }\n  };\n  return (\n    params: ChannelAuthorizationRequestParams,\n    callback: ChannelAuthorizationCallback\n  ) => {\n    const channel = pusher.channel(params.channelName);\n    // This line creates a new channel authorizer every time.\n    // In the past, this was only done once per channel and reused.\n    // We can do that again if we want to keep this behavior intact.\n    const channelAuthorizer: DeprecatedChannelAuthorizer = channelAuthorizerGenerator(\n      channel,\n      deprecatedAuthorizerOptions\n    );\n    channelAuthorizer.authorize(params.socketId, callback);\n  };\n};\n","import { Options } from './options';\nimport Defaults from './defaults';\nimport {\n  ChannelAuthorizationHandler,\n  UserAuthenticationHandler,\n  ChannelAuthorizationOptions\n} from './auth/options';\nimport UserAuthenticator from './auth/user_authenticator';\nimport ChannelAuthorizer from './auth/channel_authorizer';\nimport { ChannelAuthorizerProxy } from './auth/deprecated_channel_authorizer';\nimport Runtime from 'runtime';\nimport * as nacl from 'tweetnacl';\nimport Logger from './logger';\n\nexport type AuthTransport = 'ajax' | 'jsonp';\nexport type Transport =\n  | 'ws'\n  | 'wss'\n  | 'xhr_streaming'\n  | 'xhr_polling'\n  | 'sockjs';\n\nexport interface Config {\n  // these are all 'required' config parameters, it's not necessary for the user\n  // to set them, but they have configured defaults.\n  activityTimeout: number;\n  enableStats: boolean;\n  httpHost: string;\n  httpPath: string;\n  httpPort: number;\n  httpsPort: number;\n  pongTimeout: number;\n  statsHost: string;\n  unavailableTimeout: number;\n  useTLS: boolean;\n  wsHost: string;\n  wsPath: string;\n  wsPort: number;\n  wssPort: number;\n  userAuthenticator: UserAuthenticationHandler;\n  channelAuthorizer: ChannelAuthorizationHandler;\n\n  // these are all optional parameters or overrrides. The customer can set these\n  // but it's not strictly necessary\n  forceTLS?: boolean;\n  cluster?: string;\n  disabledTransports?: Transport[];\n  enabledTransports?: Transport[];\n  ignoreNullOrigin?: boolean;\n  nacl?: nacl;\n  timelineParams?: any;\n}\n\n// getConfig mainly sets the defaults for the options that are not provided\nexport function getConfig(opts: Options, pusher): Config {\n  let config: Config = {\n    activityTimeout: opts.activityTimeout || Defaults.activityTimeout,\n    cluster: opts.cluster || Defaults.cluster,\n    httpPath: opts.httpPath || Defaults.httpPath,\n    httpPort: opts.httpPort || Defaults.httpPort,\n    httpsPort: opts.httpsPort || Defaults.httpsPort,\n    pongTimeout: opts.pongTimeout || Defaults.pongTimeout,\n    statsHost: opts.statsHost || Defaults.stats_host,\n    unavailableTimeout: opts.unavailableTimeout || Defaults.unavailableTimeout,\n    wsPath: opts.wsPath || Defaults.wsPath,\n    wsPort: opts.wsPort || Defaults.wsPort,\n    wssPort: opts.wssPort || Defaults.wssPort,\n\n    enableStats: getEnableStatsConfig(opts),\n    httpHost: getHttpHost(opts),\n    useTLS: shouldUseTLS(opts),\n    wsHost: getWebsocketHost(opts),\n\n    userAuthenticator: buildUserAuthenticator(opts),\n    channelAuthorizer: buildChannelAuthorizer(opts, pusher)\n  };\n\n  if ('disabledTransports' in opts)\n    config.disabledTransports = opts.disabledTransports;\n  if ('enabledTransports' in opts)\n    config.enabledTransports = opts.enabledTransports;\n  if ('ignoreNullOrigin' in opts)\n    config.ignoreNullOrigin = opts.ignoreNullOrigin;\n  if ('timelineParams' in opts) config.timelineParams = opts.timelineParams;\n  if ('nacl' in opts) {\n    config.nacl = opts.nacl;\n  }\n\n  return config;\n}\n\nfunction getHttpHost(opts: Options): string {\n  if (opts.httpHost) {\n    return opts.httpHost;\n  }\n  if (opts.cluster) {\n    return `sockjs-${opts.cluster}.pusher.com`;\n  }\n  return Defaults.httpHost;\n}\n\nfunction getWebsocketHost(opts: Options): string {\n  if (opts.wsHost) {\n    return opts.wsHost;\n  }\n  if (opts.cluster) {\n    return getWebsocketHostFromCluster(opts.cluster);\n  }\n  return getWebsocketHostFromCluster(Defaults.cluster);\n}\n\nfunction getWebsocketHostFromCluster(cluster: string): string {\n  return `ws-${cluster}.pusher.com`;\n}\n\nfunction shouldUseTLS(opts: Options): boolean {\n  if (Runtime.getProtocol() === 'https:') {\n    return true;\n  } else if (opts.forceTLS === false) {\n    return false;\n  }\n  return true;\n}\n\n// if enableStats is set take the value\n// if disableStats is set take the inverse\n// otherwise default to false\nfunction getEnableStatsConfig(opts: Options): boolean {\n  if ('enableStats' in opts) {\n    return opts.enableStats;\n  }\n  if ('disableStats' in opts) {\n    return !opts.disableStats;\n  }\n  return false;\n}\n\nfunction buildUserAuthenticator(opts: Options): UserAuthenticationHandler {\n  const userAuthentication = {\n    ...Defaults.userAuthentication,\n    ...opts.userAuthentication\n  };\n  if (\n    'customHandler' in userAuthentication &&\n    userAuthentication['customHandler'] != null\n  ) {\n    return userAuthentication['customHandler'];\n  }\n\n  return UserAuthenticator(userAuthentication);\n}\n\nfunction buildChannelAuth(opts: Options, pusher): ChannelAuthorizationOptions {\n  let channelAuthorization: ChannelAuthorizationOptions;\n  if ('channelAuthorization' in opts) {\n    channelAuthorization = {\n      ...Defaults.channelAuthorization,\n      ...opts.channelAuthorization\n    };\n  } else {\n    channelAuthorization = {\n      transport: opts.authTransport || Defaults.authTransport,\n      endpoint: opts.authEndpoint || Defaults.authEndpoint\n    };\n    if ('auth' in opts) {\n      if ('params' in opts.auth) channelAuthorization.params = opts.auth.params;\n      if ('headers' in opts.auth)\n        channelAuthorization.headers = opts.auth.headers;\n    }\n    if ('authorizer' in opts)\n      channelAuthorization.customHandler = ChannelAuthorizerProxy(\n        pusher,\n        channelAuthorization,\n        opts.authorizer\n      );\n  }\n  return channelAuthorization;\n}\n\nfunction buildChannelAuthorizer(\n  opts: Options,\n  pusher\n): ChannelAuthorizationHandler {\n  const channelAuthorization = buildChannelAuth(opts, pusher);\n  if (\n    'customHandler' in channelAuthorization &&\n    channelAuthorization['customHandler'] != null\n  ) {\n    return channelAuthorization['customHandler'];\n  }\n\n  return ChannelAuthorizer(channelAuthorization);\n}\n","function flatPromise() {\n  let resolve, reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve, reject };\n}\n\nexport default flatPromise;\n","import Pusher from './pusher';\nimport Logger from './logger';\nimport {\n  UserAuthenticationData,\n  UserAuthenticationCallback\n} from './auth/options';\nimport Channel from './channels/channel';\nimport EventsDispatcher from './events/dispatcher';\nimport flatPromise from './utils/flat_promise';\n\nexport default class UserFacade extends EventsDispatcher {\n  pusher: Pusher;\n  signin_requested: boolean = false;\n  user_data: any = null;\n  serverToUserChannel: Channel = null;\n  signinDonePromise: Promise<any> = null;\n  private _signinDoneResolve: Function = null;\n\n  public constructor(pusher: Pusher) {\n    super(function(eventName, data) {\n      Logger.debug('No callbacks on user for ' + eventName);\n    });\n    this.pusher = pusher;\n    this.pusher.connection.bind('state_change', ({ previous, current }) => {\n      if (previous !== 'connected' && current === 'connected') {\n        this._signin();\n      }\n      if (previous === 'connected' && current !== 'connected') {\n        this._cleanup();\n        this._newSigninPromiseIfNeeded();\n      }\n    });\n    this.pusher.connection.bind('message', event => {\n      var eventName = event.event;\n      if (eventName === 'pusher:signin_success') {\n        this._onSigninSuccess(event.data);\n      }\n      if (\n        this.serverToUserChannel &&\n        this.serverToUserChannel.name === event.channel\n      ) {\n        this.serverToUserChannel.handleEvent(event);\n      }\n    });\n  }\n\n  public signin() {\n    if (this.signin_requested) {\n      return;\n    }\n\n    this.signin_requested = true;\n    this._signin();\n  }\n\n  private _signin() {\n    if (!this.signin_requested) {\n      return;\n    }\n\n    this._newSigninPromiseIfNeeded();\n\n    if (this.pusher.connection.state !== 'connected') {\n      // Signin will be attempted when the connection is connected\n      return;\n    }\n\n    this.pusher.config.userAuthenticator(\n      {\n        socketId: this.pusher.connection.socket_id\n      },\n      this._onAuthorize\n    );\n  }\n\n  private _onAuthorize: UserAuthenticationCallback = (\n    err,\n    authData: UserAuthenticationData\n  ) => {\n    if (err) {\n      Logger.warn(`Error during signin: ${err}`);\n      this._cleanup();\n      return;\n    }\n\n    this.pusher.send_event('pusher:signin', {\n      auth: authData.auth,\n      user_data: authData.user_data\n    });\n\n    // Later when we get pusher:singin_success event, the user will be marked as signed in\n  };\n\n  private _onSigninSuccess(data: any) {\n    try {\n      this.user_data = JSON.parse(data.user_data);\n    } catch (e) {\n      Logger.error(`Failed parsing user data after signin: ${data.user_data}`);\n      this._cleanup();\n      return;\n    }\n\n    if (typeof this.user_data.id !== 'string' || this.user_data.id === '') {\n      Logger.error(\n        `user_data doesn't contain an id. user_data: ${this.user_data}`\n      );\n      this._cleanup();\n      return;\n    }\n\n    // Signin succeeded\n    this._signinDoneResolve();\n    this._subscribeChannels();\n  }\n\n  private _subscribeChannels() {\n    const ensure_subscribed = channel => {\n      if (channel.subscriptionPending && channel.subscriptionCancelled) {\n        channel.reinstateSubscription();\n      } else if (\n        !channel.subscriptionPending &&\n        this.pusher.connection.state === 'connected'\n      ) {\n        channel.subscribe();\n      }\n    };\n\n    this.serverToUserChannel = new Channel(\n      `#server-to-user-${this.user_data.id}`,\n      this.pusher\n    );\n    this.serverToUserChannel.bind_global((eventName, data) => {\n      if (\n        eventName.indexOf('pusher_internal:') === 0 ||\n        eventName.indexOf('pusher:') === 0\n      ) {\n        // ignore internal events\n        return;\n      }\n      this.emit(eventName, data);\n    });\n    ensure_subscribed(this.serverToUserChannel);\n  }\n\n  private _cleanup() {\n    this.user_data = null;\n    if (this.serverToUserChannel) {\n      this.serverToUserChannel.unbind_all();\n      this.serverToUserChannel.disconnect();\n      this.serverToUserChannel = null;\n    }\n\n    if (this.signin_requested) {\n      // If signin is in progress and cleanup is called,\n      // Mark the current signin process as done.\n      this._signinDoneResolve();\n    }\n  }\n\n  private _newSigninPromiseIfNeeded() {\n    if (!this.signin_requested) {\n      return;\n    }\n\n    // If there is a promise and it is not resolved, return without creating a new one.\n    if (this.signinDonePromise && !(this.signinDonePromise as any).done) {\n      return;\n    }\n\n    // This promise is never rejected.\n    // It gets resolved when the signin process is done whether it failed or succeeded\n    const { promise, resolve, reject: _ } = flatPromise();\n    (promise as any).done = false;\n    const setDone = () => {\n      (promise as any).done = true;\n    };\n    promise.then(setDone).catch(setDone);\n    this.signinDonePromise = promise;\n    this._signinDoneResolve = resolve;\n  }\n}\n","import AbstractRuntime from '../runtimes/interface';\nimport Runtime from 'runtime';\nimport Util from './util';\nimport * as Collections from './utils/collections';\nimport Channels from './channels/channels';\nimport Channel from './channels/channel';\nimport { default as EventsDispatcher } from './events/dispatcher';\nimport Timeline from './timeline/timeline';\nimport TimelineSender from './timeline/timeline_sender';\nimport TimelineLevel from './timeline/level';\nimport { defineTransport } from './strategies/strategy_builder';\nimport ConnectionManager from './connection/connection_manager';\nimport ConnectionManagerOptions from './connection/connection_manager_options';\nimport { PeriodicTimer } from './utils/timers';\nimport Defaults from './defaults';\nimport * as DefaultConfig from './config';\nimport Logger from './logger';\nimport Factory from './utils/factory';\nimport UrlStore from 'core/utils/url_store';\nimport { Options } from './options';\nimport { Config, getConfig } from './config';\nimport StrategyOptions from './strategies/strategy_options';\nimport UserFacade from './user';\n\nexport default class Pusher {\n  /*  STATIC PROPERTIES */\n  static instances: Pusher[] = [];\n  static isReady: boolean = false;\n  static logToConsole: boolean = false;\n\n  // for jsonp\n  static Runtime: AbstractRuntime = Runtime;\n  static ScriptReceivers: any = (<any>Runtime).ScriptReceivers;\n  static DependenciesReceivers: any = (<any>Runtime).DependenciesReceivers;\n  static auth_callbacks: any = (<any>Runtime).auth_callbacks;\n\n  static ready() {\n    Pusher.isReady = true;\n    for (var i = 0, l = Pusher.instances.length; i < l; i++) {\n      Pusher.instances[i].connect();\n    }\n  }\n\n  static log: (message: any) => void;\n\n  private static getClientFeatures(): string[] {\n    return Collections.keys(\n      Collections.filterObject({ ws: Runtime.Transports.ws }, function(t) {\n        return t.isSupported({});\n      })\n    );\n  }\n\n  /* INSTANCE PROPERTIES */\n  key: string;\n  config: Config;\n  channels: Channels;\n  global_emitter: EventsDispatcher;\n  sessionID: number;\n  timeline: Timeline;\n  timelineSender: TimelineSender;\n  connection: ConnectionManager;\n  timelineSenderTimer: PeriodicTimer;\n  user: UserFacade;\n\n  constructor(app_key: string, options?: Options) {\n    checkAppKey(app_key);\n    options = options || {};\n    if (!options.cluster && !(options.wsHost || options.httpHost)) {\n      let suffix = UrlStore.buildLogSuffix('javascriptQuickStart');\n      Logger.warn(\n        `You should always specify a cluster when connecting. ${suffix}`\n      );\n    }\n    if ('disableStats' in options) {\n      Logger.warn(\n        'The disableStats option is deprecated in favor of enableStats'\n      );\n    }\n\n    this.key = app_key;\n    this.config = getConfig(options, this);\n\n    this.channels = Factory.createChannels();\n    this.global_emitter = new EventsDispatcher();\n    this.sessionID = Math.floor(Math.random() * 1000000000);\n\n    this.timeline = new Timeline(this.key, this.sessionID, {\n      cluster: this.config.cluster,\n      features: Pusher.getClientFeatures(),\n      params: this.config.timelineParams || {},\n      limit: 50,\n      level: TimelineLevel.INFO,\n      version: Defaults.VERSION\n    });\n    if (this.config.enableStats) {\n      this.timelineSender = Factory.createTimelineSender(this.timeline, {\n        host: this.config.statsHost,\n        path: '/timeline/v2/' + Runtime.TimelineTransport.name\n      });\n    }\n\n    var getStrategy = (options: StrategyOptions) => {\n      return Runtime.getDefaultStrategy(this.config, options, defineTransport);\n    };\n\n    this.connection = Factory.createConnectionManager(this.key, {\n      getStrategy: getStrategy,\n      timeline: this.timeline,\n      activityTimeout: this.config.activityTimeout,\n      pongTimeout: this.config.pongTimeout,\n      unavailableTimeout: this.config.unavailableTimeout,\n      useTLS: Boolean(this.config.useTLS)\n    });\n\n    this.connection.bind('connected', () => {\n      this.subscribeAll();\n      if (this.timelineSender) {\n        this.timelineSender.send(this.connection.isUsingTLS());\n      }\n    });\n\n    this.connection.bind('message', event => {\n      var eventName = event.event;\n      var internal = eventName.indexOf('pusher_internal:') === 0;\n      if (event.channel) {\n        var channel = this.channel(event.channel);\n        if (channel) {\n          channel.handleEvent(event);\n        }\n      }\n      // Emit globally [deprecated]\n      if (!internal) {\n        this.global_emitter.emit(event.event, event.data);\n      }\n    });\n    this.connection.bind('connecting', () => {\n      this.channels.disconnect();\n    });\n    this.connection.bind('disconnected', () => {\n      this.channels.disconnect();\n    });\n    this.connection.bind('error', err => {\n      Logger.warn(err);\n    });\n\n    Pusher.instances.push(this);\n    this.timeline.info({ instances: Pusher.instances.length });\n\n    this.user = new UserFacade(this);\n\n    if (Pusher.isReady) {\n      this.connect();\n    }\n  }\n\n  channel(name: string): Channel {\n    return this.channels.find(name);\n  }\n\n  allChannels(): Channel[] {\n    return this.channels.all();\n  }\n\n  connect() {\n    this.connection.connect();\n\n    if (this.timelineSender) {\n      if (!this.timelineSenderTimer) {\n        var usingTLS = this.connection.isUsingTLS();\n        var timelineSender = this.timelineSender;\n        this.timelineSenderTimer = new PeriodicTimer(60000, function() {\n          timelineSender.send(usingTLS);\n        });\n      }\n    }\n  }\n\n  disconnect() {\n    this.connection.disconnect();\n\n    if (this.timelineSenderTimer) {\n      this.timelineSenderTimer.ensureAborted();\n      this.timelineSenderTimer = null;\n    }\n  }\n\n  bind(event_name: string, callback: Function, context?: any): Pusher {\n    this.global_emitter.bind(event_name, callback, context);\n    return this;\n  }\n\n  unbind(event_name?: string, callback?: Function, context?: any): Pusher {\n    this.global_emitter.unbind(event_name, callback, context);\n    return this;\n  }\n\n  bind_global(callback: Function): Pusher {\n    this.global_emitter.bind_global(callback);\n    return this;\n  }\n\n  unbind_global(callback?: Function): Pusher {\n    this.global_emitter.unbind_global(callback);\n    return this;\n  }\n\n  unbind_all(callback?: Function): Pusher {\n    this.global_emitter.unbind_all();\n    return this;\n  }\n\n  subscribeAll() {\n    var channelName;\n    for (channelName in this.channels.channels) {\n      if (this.channels.channels.hasOwnProperty(channelName)) {\n        this.subscribe(channelName);\n      }\n    }\n  }\n\n  subscribe(channel_name: string) {\n    var channel = this.channels.add(channel_name, this);\n    if (channel.subscriptionPending && channel.subscriptionCancelled) {\n      channel.reinstateSubscription();\n    } else if (\n      !channel.subscriptionPending &&\n      this.connection.state === 'connected'\n    ) {\n      channel.subscribe();\n    }\n    return channel;\n  }\n\n  unsubscribe(channel_name: string) {\n    var channel = this.channels.find(channel_name);\n    if (channel && channel.subscriptionPending) {\n      channel.cancelSubscription();\n    } else {\n      channel = this.channels.remove(channel_name);\n      if (channel && channel.subscribed) {\n        channel.unsubscribe();\n      }\n    }\n  }\n\n  send_event(event_name: string, data: any, channel?: string) {\n    return this.connection.send_event(event_name, data, channel);\n  }\n\n  shouldUseTLS(): boolean {\n    return this.config.useTLS;\n  }\n\n  signin() {\n    this.user.signin();\n  }\n}\n\nfunction checkAppKey(key) {\n  if (key === null || key === undefined) {\n    throw 'You must pass your app key when you instantiate Pusher.';\n  }\n}\n\nRuntime.setup(Pusher);\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Pusher from 'pusher-js';\nimport Application from 'flarum/common/Application';\n\nexport default function () {\n  extend(Application.prototype, 'mount', function () {\n    // Enable logging to console when debug is enabled.\n    Pusher.logToConsole = this.forum.attribute('debug');\n\n    const wsHost = this.forum.attribute('websocket.host');\n    const secure = this.forum.attribute('websocket.secure');\n\n    app.websocket = new Pusher(this.forum.attribute('websocket.key'), {\n      channelAuthorization: {\n        endpoint: this.forum.attribute('apiUrl') + '/websocket/auth',\n      },\n      wsHost,\n      wsPort: this.forum.attribute('websocket.port'),\n      wssPort: this.forum.attribute('websocket.port'),\n      enabledTransports: ['wss', 'ws'],\n      forceTLS: secure,\n    });\n\n    app.websocket_channels = {\n      public: null,\n      user: null,\n    };\n\n    if (app.session.user) {\n      app.websocket_channels.user = app.websocket.subscribe('private-user=' + app.session.user.id());\n    } else if (!this.forum.attribute('websocket.disallow_connection')) {\n      app.websocket_channels.public = app.websocket.subscribe('public');\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport NewActivity from './Discussion/NewActivity';\nimport TypingIndicator from './Discussion/TypingIndicator';\n\nexport default function Discussion() {\n  NewActivity();\n\n  if (!!app.data['blomstra-realtime.typing-indicator']) {\n    TypingIndicator();\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\n\nexport default function () {\n  DiscussionPage.prototype.websocketEventPosted = function (data) {\n    const discussion = app.store.pushPayload(data);\n\n    if (discussion.id() === this.discussion?.id() && this.stream) {\n      const oldCount = this.discussion.commentCount();\n\n      app.store.find('discussions', this.discussion.id()).then(() => {\n        this.stream.update().then(() => m.redraw());\n\n        if (!document.hasFocus()) {\n          app.setTitleCount(Math.max(0, this.discussion.commentCount() - oldCount));\n\n          $(window).one('focus', () => {\n            app.setTitleCount(0);\n          });\n        }\n      });\n    }\n  };\n  DiscussionPage.prototype.websocketEventStreamUpdate = function (data) {\n    const discussion = app.store.pushPayload(data);\n\n    if (discussion.id() === this.discussion?.id() && this.stream) {\n      app.store.find('discussions', this.discussion.id()).then(() => {\n        this.stream.update().then(() => m.redraw());\n      });\n    }\n  };\n\n  extend(DiscussionPage.prototype, 'oncreate', function () {\n    app.websocket_channels.public?.bind('Flarum\\\\Post\\\\Event\\\\Posted', this.websocketEventPosted.bind(this));\n    app.websocket_channels.user?.bind('Flarum\\\\Post\\\\Event\\\\Posted', this.websocketEventPosted.bind(this));\n    app.websocket_channels.public?.bind('discussionRenamed', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.user?.bind('discussionRenamed', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.public?.bind('revisedEvent', this.websocketEventPosted.bind(this));\n    app.websocket_channels.user?.bind('revisedEvent', this.websocketEventPosted.bind(this));\n\n    // fof/best-answer\n    app.websocket_channels.public?.bind('bestAnswerMutation', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.user?.bind('bestAnswerMutation', this.websocketEventStreamUpdate.bind(this));\n\n    // flarum/likes\n    app.websocket_channels.public?.bind('likesMutation', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.user?.bind('likesMutation', this.websocketEventStreamUpdate.bind(this));\n\n    // fof/gamification\n    app.websocket_channels.public?.bind('votedMutation', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.user?.bind('votedMutation', this.websocketEventStreamUpdate.bind(this));\n\n    // fof/reactions\n    app.websocket_channels.public?.bind('reactionsMutation', this.websocketEventStreamUpdate.bind(this));\n    app.websocket_channels.user?.bind('reactionsMutation', this.websocketEventStreamUpdate.bind(this));\n\n    // flarum/lock\n    app.websocket_channels.user?.bind('lockedEvent', this.websocketEventPosted.bind(this));\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    app.websocket_channels.public?.unbind('Flarum\\\\Post\\\\Event\\\\Posted');\n    app.websocket_channels.user?.unbind('Flarum\\\\Post\\\\Event\\\\Posted');\n    app.websocket_channels.public?.unbind('discussionRenamed');\n    app.websocket_channels.user?.unbind('discussionRenamed');\n    app.websocket_channels.public?.unbind('revisedEvent');\n    app.websocket_channels.user?.unbind('revisedEvent');\n\n    app.websocket_channels.public?.unbind('bestAnswerMutation');\n    app.websocket_channels.user?.unbind('bestAnswerMutation');\n\n    app.websocket_channels.public?.unbind('likesMutation');\n    app.websocket_channels.user?.unbind('likesMutation');\n\n    app.websocket_channels.public?.unbind('votedMutation');\n    app.websocket_channels.user?.unbind('votedMutation');\n\n    app.websocket_channels.public?.unbind('reactionsMutation');\n    app.websocket_channels.user?.unbind('reactionsMutation');\n\n    app.websocket_channels.user?.unbind('lockedEvent');\n  });\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\nimport Stream from 'flarum/common/utils/Stream';\nimport throttle from 'lodash-es/throttle';\nimport icon from 'flarum/common/helpers/icon';\nimport classList from 'flarum/common/utils/classList';\nimport PostStream from 'flarum/forum/components/PostStream';\n\nexport default function () {\n  extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n    //TODO flarum/core 1.7 move this to `PostStream.endItems`. Depends on https://github.com/flarum/framework/pull/3691\n    if (this.discussion.attribute('canViewWhoTypes')) {\n      const typingUsers = Object.keys(this.getTypingUsers());\n\n      const count = typingUsers.length;\n      const max = 3;\n\n      const classes = classList(['TypingUsersContainer', count > 0 && 'TypingUsersContainer-active']);\n      const typingIcon = count > 0 ? 'fas fa-ellipsis-h fa-beat' : 'fas fa-pause';\n\n      const namedUsers = typingUsers.slice(0, max).join(', ');\n\n      let showUsers = true; // default value\n\n      if (app.session?.user) {\n        showUsers = app.session.user.preferences()['blomstra-realtime.typing-indicator-full'];\n      }\n\n      items.add(\n        'usersTyping',\n        <div className={classes} key=\"typing\">\n          <div className=\"TypingUsers\">\n            {icon(typingIcon)}\n            {count > 0\n              ? showUsers\n                ? app.translator.trans('blomstra-realtime.forum.typing-indicator.users-are-typing', {\n                    users: namedUsers,\n                    count: count,\n                    others: Math.max(count - max, 0),\n                  })\n                : app.translator.trans('blomstra-realtime.forum.typing-indicator.people-are-typing', { number: count })\n              : app.translator.trans('blomstra-realtime.forum.typing-indicator.no-activity')}\n          </div>\n        </div>,\n        70\n      );\n    }\n  });\n\n  DiscussionPage.prototype.getTypingUsers = function () {\n    const invalidateWhen = new Date().getTime() - 6000;\n\n    let users = this.usersTyping();\n    let timeout = null;\n\n    for (const displayName in users) {\n      const time = users[displayName];\n\n      if (time < invalidateWhen) {\n        delete users[displayName];\n      } else if (!timeout || timeout < time) {\n        timeout = time;\n      }\n    }\n\n    this.usersTyping(users);\n\n    if (timeout && this.typingTruncationListener) {\n      clearTimeout(this.typingTruncationListener);\n    }\n\n    if (timeout) {\n      this.typingTruncationListener = setTimeout(\n        function () {\n          m.redraw();\n        }.bind(this),\n        timeout - new Date().getTime()\n      );\n    }\n\n    return users;\n  };\n\n  DiscussionPage.prototype.userTyping = function (data) {\n    let users = this.usersTyping();\n\n    if (!data.discloseOnline) {\n      data.displayName = app.translator.trans('blomstra-realtime.forum.typing-indicator.anonymous-user');\n    }\n\n    users[data.displayName] = data.time;\n\n    this.usersTyping(users);\n\n    m.redraw();\n  };\n\n  DiscussionPage.prototype.actorIsTyping = function () {\n    const discloseOnline = app.session.user.preferences()?.discloseOnline;\n\n    app.websocket_channels.discussion.trigger('client-typing', {\n      displayName: discloseOnline ? app.session.user.displayName() : '[anonymous]',\n      discloseOnline,\n      time: Date.now(),\n    });\n  };\n\n  DiscussionPage.prototype.checkTyping = function () {\n    if (!app.composer.composingReplyTo(this.discussion)) return;\n\n    if (this.previousContent() !== app.composer.fields.content()) {\n      this.actorIsTyping();\n\n      // Update previous, so we can match on the next tick.\n      this.previousContent(app.composer.fields.content());\n    }\n  };\n\n  extend(DiscussionPage.prototype, 'oninit', function (vnode) {\n    this.previousContent = new Stream('');\n    this.usersTyping = new Stream({});\n    this.typingTruncationListener = null;\n    this.typingListener = null;\n  });\n\n  extend(DiscussionPage.prototype, 'view', function () {\n    if (app.forum.attribute('websocket.disallow_connection')) return;\n\n    if (this.discussion && app.composer.editor && !this.typingListener) {\n      this.typingListener = throttle(\n        function () {\n          this.checkTyping();\n        }.bind(this),\n        2000\n      );\n\n      this.typingListener = setInterval(this.typingListener, 1000);\n    }\n\n    if (this.discussion) {\n      app.websocket_channels.discussion = app.websocket.subscribe('private-typing=' + m.route.param('id').match(/[0-9]+/));\n\n      if (this.discussion.attribute('canViewWhoTypes')) {\n        app.websocket_channels.discussion.bind('client-typing', (data) => {\n          this.userTyping(data);\n        });\n      }\n    }\n  });\n\n  extend(DiscussionPage.prototype, 'onremove', function () {\n    if (this.typingListener) this.typingListener.cancel;\n    if (this.typingTruncationListener) clearTimeout(this.typingTruncationListener);\n  });\n\n  extend(PostStream.prototype, 'endItems', function (items) {\n    if (this.discussion.attribute('canViewWhoTypes')) {\n      const typingUsers = Object.keys(this.getTypingUsers());\n\n      const count = typingUsers.length;\n      const max = 3;\n\n      const classes = classList(['TypingUsersContainer', count > 0 && 'TypingUsersContainer-active']);\n      const typingIcon = count > 0 ? 'fas fa-ellipsis-h fa-beat' : 'fas fa-pause';\n\n      const namedUsers = typingUsers.slice(0, max).join(', ');\n\n      let showUsers = true; // default value\n\n      if (app.session?.user) {\n        showUsers = app.session.user.preferences()['blomstra-realtime.typing-indicator-full'];\n      }\n\n      items.add(\n        'usersTyping',\n        <div className={classes} key=\"typing\">\n          <div className=\"TypingUsers\">\n            {icon(typingIcon)}\n            {count > 0\n              ? showUsers\n                ? app.translator.trans('blomstra-realtime.forum.typing-indicator.users-are-typing', {\n                    users: namedUsers,\n                    count: count,\n                    others: Math.max(count - max, 0),\n                  })\n                : app.translator.trans('blomstra-realtime.forum.typing-indicator.people-are-typing', { number: count })\n              : app.translator.trans('blomstra-realtime.forum.typing-indicator.no-activity')}\n          </div>\n        </div>,\n        70\n      );\n    }\n  });\n\n  PostStream.prototype.getTypingUsers = function () {\n    const invalidateWhen = new Date().getTime() - 6000;\n\n    let users = this.usersTyping();\n    let timeout = null;\n\n    for (const displayName in users) {\n      const time = users[displayName];\n\n      if (time < invalidateWhen) {\n        delete users[displayName];\n      } else if (!timeout || timeout < time) {\n        timeout = time;\n      }\n    }\n\n    this.usersTyping(users);\n\n    if (timeout && this.typingTruncationListener) {\n      clearTimeout(this.typingTruncationListener);\n    }\n\n    if (timeout) {\n      this.typingTruncationListener = setTimeout(\n        function () {\n          m.redraw();\n        }.bind(this),\n        timeout - new Date().getTime()\n      );\n    }\n\n    return users;\n  };\n\n  PostStream.prototype.userTyping = function (data) {\n    let users = this.usersTyping();\n\n    if (!data.discloseOnline) {\n      data.displayName = app.translator.trans('blomstra-realtime.forum.typing-indicator.anonymous-user');\n    }\n\n    users[data.displayName] = data.time;\n\n    this.usersTyping(users);\n\n    m.redraw();\n  };\n\n  PostStream.prototype.actorIsTyping = function () {\n    const discloseOnline = app.session.user.preferences()?.discloseOnline;\n\n    app.websocket_channels.discussion.trigger('client-typing', {\n      displayName: discloseOnline ? app.session.user.displayName() : '[anonymous]',\n      discloseOnline,\n      time: Date.now(),\n    });\n  };\n\n  PostStream.prototype.checkTyping = function () {\n    if (!app.composer.composingReplyTo(this.discussion)) return;\n\n    if (this.previousContent() !== app.composer.fields.content()) {\n      this.actorIsTyping();\n\n      // Update previous, so we can match on the next tick.\n      this.previousContent(app.composer.fields.content());\n    }\n  };\n\n  extend(PostStream.prototype, 'oninit', function (vnode) {\n    this.previousContent = new Stream('');\n    this.usersTyping = new Stream({});\n    this.typingTruncationListener = null;\n    this.typingListener = null;\n  });\n\n  extend(PostStream.prototype, 'view', function () {\n    if (app.forum.attribute('websocket.disallow_connection')) return;\n\n    if (this.discussion && app.composer.editor && !this.typingListener) {\n      this.typingListener = throttle(\n        function () {\n          this.checkTyping();\n        }.bind(this),\n        2000\n      );\n\n      this.typingListener = setInterval(this.typingListener, 1000);\n    }\n\n    if (this.discussion) {\n      app.websocket_channels.discussion = app.websocket.subscribe('private-typing=' + m.route.param('id').match(/[0-9]+/));\n\n      if (this.discussion.attribute('canViewWhoTypes')) {\n        app.websocket_channels.discussion.bind('client-typing', (data) => {\n          this.userTyping(data);\n        });\n      }\n    }\n  });\n\n  extend(PostStream.prototype, 'onremove', function () {\n    if (this.typingListener) this.typingListener.cancel;\n    if (this.typingTruncationListener) clearTimeout(this.typingTruncationListener);\n  });\n}\n","import app from 'flarum/forum/app';\nimport NewActivity from './DiscussionList/NewActivity';\n\nexport default function DiscussionList() {\n  if (!!app.data['blomstra-realtime.release-discussion-updates']) {\n    NewActivity();\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport Discussion from 'flarum/forum/models/Discussion';\nimport Post from 'flarum/forum/models/Post';\nimport DiscussionList from 'flarum/forum/components/DiscussionList';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Button from 'flarum/common/components/Button';\nimport WebsocketUpdates from './WebsocketUpdates';\nimport extractText from 'flarum/common/utils/extractText';\n\nexport default function () {\n  DiscussionList.prototype.websocketEventPosted = function (data) {\n    // Retrieve current page params (eg for searching).\n    const params = app.discussions.getParams();\n\n    const activeTag = params.tags ? app.store.getBy('tags', 'slug', params.tags) : null;\n\n    if (!params.q && !params.sort && (activeTag || !params.filter)) {\n      // The model entity this event relates to.\n      const entity = app.store.pushPayload(data);\n\n      // Identify the discussion we're dealing with.\n      let discussion = entity instanceof Discussion ? entity : null;\n\n      if (!discussion && entity instanceof Post) {\n        discussion = entity.discussion();\n      }\n// console.log(\"pos1\");\n      // When we're on the Byobu private discussions page and this discussion is not private\n      if (discussion && app.current.data.routeName === 'byobuPrivate' && !(discussion.recipientUsers() && discussion.recipientGroups())) {\n        return;\n      }\n// console.log(\"pos2\");\n      if (discussion && app.current.data.routeName === 'byobuPrivate' && (discussion.recipientUsers()?.length === 0 && discussion.recipientGroups()?.length === 0)) {\n        return\n      }\n// console.log(\"pos3\");\n      // When we're on the user profile private discussions page, we block updates.\n      if (discussion && app.current.data.routeName === 'byobuUserPrivate') return;\n// console.log(\"pos4\");\n      // When we're on the user profile, we block updates.\n      if (discussion && app.current.data.routeName === 'user.discussions') return;\n// console.log(\"pos5\");\n      // When we're viewing a specific tag but the discussion has no such tags, ignore it.\n      if (discussion && activeTag && discussion.tags?.()) {\n        // Tag is not assigned to this discussion.\n        const tagIds = discussion.tags().map(tag => tag.id());\n        // console.log(tagIds);\n        // console.log(activeTag.id());\n        if (tagIds.indexOf(activeTag.id()) === -1) return;\n      }\n// console.log(\"pos6\");\n      if (\n        discussion &&\n        discussion.tags?.() &&\n        discussion.tags().find((tag) => {\n          // When we have a page open of a tag the user hides\n          // we will still show the notification.\n          if (activeTag && activeTag.id() === tag.id()) return false;\n\n          // When we are on the index and any of the assigned tags are set to \"Hidden from All Discussions\"\n          if (!activeTag && tag.isHidden()) return true;\n\n          // Ignore discussions that have a tag that the user ignored with fof/follow-tags.\n          return tag.subscription?.() === 'hide';\n        })\n      ) {\n        return;\n      }\n// console.log(\"pos7\");\n      // Identify whether the discussion is ignored by the user with flarum/subscriptions.\n      if (discussion && discussion.subscription?.() === 'ignore') return;\n// console.log(\"pos8\");\n      // We identify whether the user is following any of the tags of the discussion.\n      const subscribedTag = discussion.tags()?.find((tag) => {\n        return tag.subscription?.() === 'lurk' || tag.subscription?.() === 'follow';\n      });\n// console.log(\"pos9\");\n      // For subscriptions (and follow-tags)\n      if (app.current.get('routeName') === 'following') {\n        // Whenever the discussion has no tags the user is subscribed to,\n        // or the discussion is not subscribed to; discard the event.\n        if ((params.filter?.['following-tag'] && subscribedTag.length === 0) || discussion.subscription?.() !== 'follow') {\n          return;\n        }\n      }\n// console.log(\"pos10\");\n      // Not already pushed recently or pending an update.\n      if (this.websocketUpdates.has(discussion)) return;\n// console.log(\"pos11\");\n      // Discussion shouldn't already be top of DiscussionList.\n      if (app.discussions.getPages()[0]?.items[0]?.id() === discussion.id()) return;\n// console.log(\"pos12\");\n      const pushOnIndex =\n        discussion &&\n        // Not a discussion view page.\n        !app.current.get('discussion');\n\n      const pushOnView =\n        discussion &&\n        // Current discussion or subscribed/following the discussion or any of its tags.\n        (discussion.id() === app.current.get('discussion')?.id() || subscribedTag || discussion.subscription?.() === 'follow');\n\n      if (pushOnIndex || pushOnView) {\n        this.websocketUpdates.push(discussion);\n\n        if (app.current.matches(IndexPage)) {\n          app.setTitleCount(this.websocketUpdates.length());\n\n          m.redraw();\n        }\n      }\n    }\n  };\n\n  extend(DiscussionList.prototype, 'oninit', function () {\n    this.websocketUpdates = new WebsocketUpdates();\n    this.releaseTimeout = this.websocketUpdates.getReleaseInterval();\n  });\n\n  extend(DiscussionList.prototype, 'oncreate', function () {\n    app.websocket_channels.public?.bind('Flarum\\\\Discussion\\\\Event\\\\Started', this.websocketEventPosted.bind(this));\n    app.websocket_channels.public?.bind('Flarum\\\\Post\\\\Event\\\\Posted', this.websocketEventPosted.bind(this));\n\n    app.websocket_channels.user?.bind('Flarum\\\\Discussion\\\\Event\\\\Started', this.websocketEventPosted.bind(this));\n    app.websocket_channels.user?.bind('Flarum\\\\Post\\\\Event\\\\Posted', this.websocketEventPosted.bind(this));\n  });\n\n  extend(DiscussionList.prototype, 'onremove', function () {\n    app.websocket_channels.public?.unbind('Flarum\\\\Discussion\\\\Event\\\\Started');\n    app.websocket_channels.public?.unbind('Flarum\\\\Post\\\\Event\\\\Posted');\n\n    app.websocket_channels.user?.unbind('Flarum\\\\Discussion\\\\Event\\\\Started');\n    app.websocket_channels.user?.unbind('Flarum\\\\Post\\\\Event\\\\Posted');\n  });\n\n  extend(DiscussionList.prototype, 'view', function (vdom) {\n    if (!this.websocketUpdates.isEmpty()) {\n      const buttonLabel = (releaseTimeout) =>\n        this.websocketUpdates.autoRelease()\n          ? app.translator.trans('blomstra-realtime.forum.push.discussion-list-new-activity-with-auto-release', {\n              count: this.websocketUpdates.length(),\n              releaseTimeout,\n            })\n          : app.translator.trans('blomstra-realtime.forum.push.discussion-list-new-activity', { count: this.websocketUpdates.length() });\n\n      if (this.websocketUpdates.length() && typeof vdom === 'object' && vdom && 'children' in vdom && vdom.children instanceof Array) {\n        vdom.children.unshift(\n          Button.component(\n            {\n              className: 'Button Button--block DiscussionList-update',\n              'aria-live': 'polite',\n              'aria-atomic': 'true',\n              onclick: this.releaseUpdates.bind(this),\n            },\n            buttonLabel(this.releaseTimeout)\n          )\n        );\n\n        this.websocketUpdates.startTimer();\n\n        this.websocketUpdates.onTimer((second) => {\n          if (second === 0) return this.releaseUpdates();\n\n          this.$('.DiscussionList-update > .Button-label').text(extractText(buttonLabel(second)));\n        });\n      }\n    }\n  });\n\n  extend(DiscussionList.prototype, 'releaseUpdates', function () {\n    // Push new discussions.\n    this.websocketUpdates.release(this.attrs.state);\n  });\n\n  extend(DiscussionList.prototype, 'addDiscussion', function (returned, discussion) {\n    this.websocketUpdates.remove(discussion);\n\n    if (app.current.matches(IndexPage)) {\n      app.setTitleCount(this.websocketUpdates.length());\n    }\n\n    m.redraw();\n  });\n\n  extend(IndexPage.prototype, 'actionItems', (items) => {\n    items.remove('refresh');\n  });\n}\n","import Discussion from 'flarum/common/models/Discussion';\nimport DiscussionListState from 'flarum/forum/states/DiscussionListState';\nimport app from 'flarum/forum/app';\n\nexport default class WebsocketUpdates {\n  private discussions: Record<string, Discussion> = {};\n  private releaseInterval: number = app.forum.attribute<number>('blomstra-realtime.release-discussion-updates-interval');\n  private timer?: number;\n  private onTimerCallback: null | ((second: number) => void) = null;\n  private seconds: number = this.releaseInterval;\n\n  length(): number {\n    return Object.keys(this.discussions).length;\n  }\n\n  push(discussion: Discussion): void {\n    this.discussions[discussion.id()!] = discussion;\n  }\n\n  remove(discussion: Discussion) {\n    delete this.discussions[discussion.id()!];\n  }\n\n  has(discussion: Discussion): boolean {\n    return !!this.discussions[discussion.id()!];\n  }\n\n  isEmpty(): boolean {\n    return this.length() === 0;\n  }\n\n  reset(): void {\n    this.discussions = {};\n  }\n\n  getReleaseInterval(): number {\n    return this.releaseInterval;\n  }\n\n  /**\n   * Releases new discussion updates to the discussion list.\n   */\n  release(state: DiscussionListState): void {\n    // Push all discussions to the UI list.\n    Object.keys(this.discussions).forEach((id) => {\n      state.addDiscussion(this.discussions[id]);\n    });\n\n    // Reset new discussions array.\n    this.reset();\n\n    // Reset page count.\n    app.setTitleCount(0);\n  }\n\n  /**\n   * Starts the timer that will release new discussion updates to the discussion list.\n   */\n  startTimer(): void {\n    if (this.autoRelease()) {\n      clearInterval(this.timer);\n      this.seconds = this.getReleaseInterval();\n\n      this.timer = window.setInterval(() => {\n        if (this.seconds < 0 && this.timer) return clearInterval(this.timer);\n\n        this.seconds--;\n        this.onTimerCallback && this.onTimerCallback(this.seconds);\n      }, 1000);\n    }\n  }\n\n  onTimer(callback: (second: number) => void) {\n    this.onTimerCallback = callback;\n  }\n\n  autoRelease(): boolean {\n    return this.releaseInterval > 0;\n  }\n}\n","import app from 'flarum/forum/app';\nimport Flagged from './Post/Flagged';\n\nexport default function () {\n  if (app.initializers.has('flarum-flags')) {\n    Flagged();\n  }\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport FlagsDropdown from 'flarum/flags/components/FlagsDropdown';\n\nexport default function () {\n  extend(FlagsDropdown.prototype, 'oninit', () => {\n    if (app.websocket_channels.user) {\n      app.websocket_channels.user.bind('flagged', (data) => {\n        app.session.user = app.store.pushPayload(data);\n\n        app.forum.pushAttributes({ flagCount: app.session.user.attribute('newFlagCount') });\n        app.flags.cache = null;\n\n        m.redraw();\n      });\n    }\n  });\n}\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\nimport extendUserPreferences from './User/extendUserPreferences';\nimport Notification from './User/Notification';\n\nexport default function () {\n  User.prototype.canViewWhoTypes = Model.attribute('canViewWhoTypes');\n\n  Notification();\n  extendUserPreferences();\n}\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport NotificationsDropdown from 'flarum/forum/components/NotificationsDropdown';\n\nexport default function () {\n  extend(NotificationsDropdown.prototype, 'oninit', () => {\n    if (app.websocket_channels.user) {\n      app.websocket_channels.user.bind('notification', (data) => {\n        app.session.user = app.store.pushPayload(data);\n\n        app.notifications.clear();\n        m.redraw();\n      });\n    }\n  });\n}\n","import app from 'flarum/forum/app';\nimport User from 'flarum/common/models/User';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport Switch from 'flarum/common/components/Switch';\nimport type Mithril from 'mithril';\n\nexport default function RealtimeUserPreferencesItems(user?: User): ItemList<Mithril.Children> {\n  const items = new ItemList<Mithril.Children>();\n\n  let typingIndicatorLoading = false;\n\n  items.add(\n    'typing-indicator',\n    [\n      <Switch\n        state={user!.preferences()?.['blomstra-realtime.typing-indicator-full']}\n        onchange={(value: boolean) => {\n          typingIndicatorLoading = true;\n\n          user!.savePreferences({ 'blomstra-realtime.typing-indicator-full': value }).then(() => {\n            typingIndicatorLoading = false;\n            m.redraw();\n          });\n        }}\n        loading={typingIndicatorLoading}\n      >\n        {app.translator.trans('blomstra-realtime.forum.user.settings.typing-indicator-type.label')}\n      </Switch>,\n      <p className=\"helpText\">{app.translator.trans('blomstra-realtime.forum.user.settings.typing-indicator-type.help')}</p>,\n    ],\n    80\n  );\n\n  return items;\n}\n","import app from 'flarum/forum/app';\nimport { extend } from 'flarum/common/extend';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SettingsPage from 'flarum/forum/components/SettingsPage';\nimport FieldSet from 'flarum/common/components/FieldSet';\nimport type Mithril from 'mithril';\nimport RealtimeUserPreferencesItems from './RealtimeUserPreferences';\n\nexport default function extendUserPreferences() {\n  if (!!app.data['blomstra-realtime.typing-indicator']) {\n    extend(SettingsPage.prototype, 'settingsItems', function (items: ItemList<Mithril.Children>) {\n      const user = this.user;\n\n      if (!user || !user.canViewWhoTypes()) {\n        return;\n      }\n\n      items.add(\n        'realtimeItems',\n        <FieldSet className=\"Settings-realtime\" label={app.translator.trans('blomstra-realtime.forum.user.settings.heading')}>\n          {RealtimeUserPreferencesItems(user).toArray()}\n        </FieldSet>,\n        55\n      );\n    });\n  }\n}\n","import app from 'flarum/forum/app';\nimport Application from './extend/Application';\nimport Discussion from './extend/Discussion';\nimport DiscussionList from './extend/DiscussionList';\nimport Post from './extend/Post';\nimport User from './extend/User';\n\napp.initializers.add('blomstra-realtime', () => {\n  Application();\n  Discussion();\n  DiscussionList();\n  Post();\n  User();\n});\n","module.exports = flarum.core.compat['common/Application'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/FieldSet'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/models/User'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['flags/components/FlagsDropdown'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/components/NotificationsDropdown'];","module.exports = flarum.core.compat['forum/components/PostStream'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","module.exports = flarum.core.compat['forum/models/Discussion'];","module.exports = flarum.core.compat['forum/models/Post'];","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["module","define","exports","root","i","l","modules","__webpack_require__","Object","enumerable","get","value","INVALID_BYTE","_paddingCharacter","Coder","length","data","out","c","_encodeByte","left","s","maxDecodedLength","_getPaddingLength","Uint8Array","paddingLength","op","haveBad","v0","v1","v2","v3","_decodeChar","charCodeAt","Error","b","result","String","fromCharCode","stdCoder","encode","decode","__extends","URLSafeCoder","urlSafeCoder","encodeURLSafe","decodeURLSafe","encodedLength","decodedLength","INVALID_UTF16","INVALID_UTF8","arr","pos","chars","min","n1","n2","n3","push","join","prefix","name","lastId","ScriptReceiverFactory","callback","number","id","called","callbackWrapper","apply","arguments","receiver","ScriptReceivers","Defaults","VERSION","PROTOCOL","wsPort","wssPort","wsPath","httpHost","httpPort","httpsPort","httpPath","stats_host","authEndpoint","authTransport","activityTimeout","pongTimeout","unavailableTimeout","cluster","userAuthentication","endpoint","transport","channelAuthorization","cdn_http","cdn_https","dependency_suffix","options","receivers","loading","DependencyLoader","self","request","runtime","createScriptRequest","getPath","create","error","remove","callbacks","successCallback","wasSuccessful","cleanup","send","cdn","protocol","getDocument","location","useTLS","replace","version","getRoot","suffix","DependenciesReceivers","Dependencies","dependency_loader","defaults","urlStore","baseUrl","urls","authenticationEndpoint","path","authorizationEndpoint","javascriptQuickStart","triggeringClientEvents","encryptedChannelSupport","fullUrl","buildLogSuffix","key","urlPrefix","urlObj","url","AuthRequestType","msg","_super","setPrototypeOf","_this","_newTarget","prototype","status","ajax","context","query","authOptions","authRequestType","xhr","createXHR","open","setRequestHeader","headerName","headers","onreadystatechange","readyState","parsed","JSON","parse","responseText","e","HTTPAuthError","toString","UserAuthentication","url_store","ChannelAuthorization","btoa","utob","b64chars","b64tab","base64_i","charAt","cb_utob","cc","u","cb_encode","ccc","padlen","ord","window","set","clear","delay","timer","Timer","timers_clearTimeout","clearTimeout","timers_clearInterval","clearInterval","timers_extends","setTimeout","abstract_timer","setInterval","Util","now","Date","valueOf","defer","OneOffTimer","method","_i","args","boundArguments","Array","slice","call","object","concat","extend","target","sources","extensions","property","constructor","stringify","m","safeJSONStringify","arrayIndexOf","array","item","nativeIndexOf","indexOf","objectApply","f","hasOwnProperty","keys","_","values","map","mapObject","filter","test","filterObject","Boolean","flatten","any","collections_all","encodeParamsObject","encodeURIComponent","buildQueryString","params","undefined","util","decycleObject","objects","paths","derez","nu","$ref","source","message","console","log","Logger","globalLog","globalLogWarn","globalLogError","warn","defaultLoggingFunction","core_pusher","logToConsole","bind","logger_Logger","jsonp","logger","callbackName","nextAuthCallbackID","document","script","createElement","auth_callbacks","callback_name","src","head","getElementsByTagName","documentElement","insertBefore","firstChild","ScriptRequest","errorString","type","charset","addEventListener","onerror","onload","async","attachEvent","navigator","userAgent","errorScript","text","nextSibling","parentNode","removeChild","JSONPRequest","getAgent","sender","scheme","host","createJSONPRequest","jsonp_timeline_jsonp","getGenericURL","baseScheme","hostTLS","hostNonTLS","getGenericPath","queryString","ws","getInitial","http","sockjs","_callbacks","CallbackRegistry","prefixedEventName","fn","names","removeCallback","removeAllCallbacks","binding","failThrough","callback_registry","global_callbacks","Dispatcher","eventName","add","unbind","unbind_global","metadata","transport_connection_extends","hooks","priority","initialize","transportConnectionInitializer","state","timeline","generateUniqueID","TransportConnection","handlesActivityChecks","supportsPing","socket","getSocket","onError","changeState","bindListeners","debug","close","ping","beforeOpen","onopen","emit","buildTimelineMessage","closeEvent","code","reason","wasClean","unbindListeners","onOpen","onclose","onClose","onmessage","onMessage","onactivity","onActivity","info","cid","dispatcher","Transport","environment","isSupported","transport_connection","WSTransport","transports_transport","isInitialized","getWebSocketAPI","createWebSocket","httpConfiguration","streamingConfiguration","HTTPFactory","createStreamingSocket","pollingConfiguration","createPollingSocket","xhrConfiguration","isXHRSupported","XHRStreamingTransport","XHRPollingTransport","Transports","xhr_streaming","xhr_polling","SockJSTransport","file","SockJS","js_path","ignore_null_origin","ignoreNullOrigin","xdrConfiguration","yes","isXDRSupported","XDRStreamingTransport","XDRPollingTransport","transports","xdr_streaming","xdr_polling","net_info_extends","NetInfo","onLine","net_info_Network","manager","minPingDelay","maxPingDelay","pingDelay","AssistantToTheTransportManager","connection","createConnection","openTimestamp","onClosed","reportDeath","lifespan","Math","max","isAlive","Protocol","decodeMessage","messageEvent","messageData","pusherEventData","pusherEvent","event","channel","user_id","encodeMessage","processHandshake","activity_timeout","action","socket_id","getCloseAction","getCloseError","connection_extends","Connection","protocol_protocol","send_event","listeners","activity","closed","handleCloseEvent","listener","Handshake","finish","connection_connection","TimelineSender","isEmpty","TimelineTransport","channel_extends","pusher","subscribed","subscriptionPending","subscriptionCancelled","Channel","socketId","auth","BadEventName","handleSubscriptionSucceededEvent","handleSubscriptionCountEvent","unsubscribe","subscription_count","subscriptionCount","authorize","assign","channel_data","private_channel_extends","PrivateChannel","config","channelAuthorizer","channelName","channels_channel","reset","Members","members","member","myID","subscriptionData","presence","hash","count","me","memberData","user_info","presence_channel_extends","PresenceChannel","authData","channelData","setMyID","user","signinDonePromise","_a","user_data","handleInternalEvent","addedMember","addMember","removedMember","removeMember","onSubscription","disconnect","private_channel","encrypted_channel_extends","nacl","EncryptedChannel","sharedSecret","UnsupportedFeature","handleEvent","handleEncryptedEvent","ciphertext","nonce","cipherText","secretbox","overheadLength","nonceLength","bytes","getDataToEmit","raw","connection_manager_extends","usingTLS","errorCallbacks","buildErrorCallbacks","connectionCallbacks","buildConnectionCallbacks","handshakeCallbacks","buildHandshakeCallbacks","Network","getNetwork","netinfo","retryIn","sendActivityCheck","updateStrategy","ConnectionManager","runner","strategy","updateState","startConnecting","setUnavailableTimer","disconnectInternally","handshake","connect","handshakeError","abortConnecting","abort","clearRetryTimer","clearUnavailableTimer","abandonConnection","getStrategy","round","retryTimer","ensureAborted","unavailableTimer","stopActivityCheck","activityTimer","pong_timed_out","resetActivityCheck","shouldRetry","connected","Infinity","setConnection","withErrorEmitted","tls_only","refused","backoff","retry","newState","previousState","newStateDescription","previous","current","channels","Channels","createChannel","factory","createEncryptedChannel","errMsg","createPrivateChannel","createPresenceChannel","BadChannelName","Factory","createChannels","createConnectionManager","connection_manager","presence_channel","encrypted_channel","createTimelineSender","timeline_sender","createHandshake","connection_handshake","createAssistantToTheTransportManager","assistant_to_the_transport_manager","livesLeft","lives","TransportManager","strategies","loop","failFast","timeout","timeoutLimit","SequentialStrategy","minPriority","tryNextStrategy","tryStrategy","forceMinPriority","p","isRunning","BestConnectedEverStrategy","runners","allRunnersFailed","callbackBuilder","rs","abortRunner","aborted","ttl","CachedStrategy","fetchTransportCache","timestamp","cached","latency","sequential_strategy","startTimestamp","pop","cb","flushTransportCache","storeTransportCache","getTransportCacheKey","storage","getLocalStorage","serializedCache","DelayedStrategy","trueBranch","falseBranch","IfStrategy","branch","FirstConnectedStrategy","testSupportsStrategy","getDefaultStrategy","baseOptions","defineTransport","definedTransports","defineTransportStrategy","ws_options","wsHost","wss_options","sockjs_options","timeouts","ws_manager","transport_manager","streaming_manager","ws_transport","wss_transport","sockjs_transport","xhr_streaming_transport","xdr_streaming_transport","xhr_polling_transport","xdr_polling_transport","ws_loop","wss_loop","sockjs_loop","streaming_loop","if_strategy","polling_loop","http_loop","best_connected_ever_strategy","delayed_strategy","http_fallback_loop","wsStrategy","cached_strategy","first_connected_strategy","load","http_xdomain_request_hooks","getRequest","xdr","XDomainRequest","ontimeout","RequestTimedOut","onprogress","onChunk","abortRequest","MAX_BUFFER_LENGTH","http_request_extends","HTTPRequest","payload","position","unloader","addUnloadListener","removeUnloadListener","chunk","advanceBuffer","isBufferTooLong","buffer","unreadData","endOfLinePosition","State","autoIncrement","session","randomNumber","randomString","getLocation","CONNECTING","openStream","HTTPSocket","sendRaw","sendHeartbeat","OPEN","createSocketRequest","getUniqueURL","getSendURL","start","closeStream","CLOSED","onEvent","onHeartbeat","hostname","base","replaceHost","stream","getReceiveURL","onFinished","reconnect","unbind_all","parts","exec","separator","urlParts","floor","random","http_streaming_socket_hooks","http_polling_socket_hooks","http_xhr_request_hooks","Constructor","getXHRAPI","HTTP","createSocket","http_streaming_socket","http_polling_socket","http_socket","createRequest","http_xhr_request","http_request","http_http","createXDR","http_xdomain_request","Runtime","jsonp_timeline","XMLHttpRequest","WebSocket","MozWebSocket","setup","PusherClass","Pusher","initializeOnDocumentBody","onDocumentBody","ready","getProtocol","getAuthorizers","xhr_auth","jsonp_auth","body","jsonp_request","script_request","localStorage","createXMLHttpRequest","createMicrosoftXHR","ActiveXObject","withCredentials","documentProtocol","removeEventListener","detachEvent","TimelineLevel","events","sent","uniqueID","Timeline","level","limit","shift","timeline_level","ERROR","INFO","DEBUG","sendfn","bundle","lib","features","TransportStrategy","failAttempt","UnsupportedStrategy","TransportPriorityTooLow","onInitialized","serializedTransport","TransportClosed","strategy_builder_defineTransport","transportClass","strategy_builder_Transports","UnsupportedTransport","enabled","enabledTransports","disabledTransports","transport_strategy","getAssistant","strategy_builder_UnsupportedStrategy","deferred","composeChannelQuery","UserAuthenticator","channel_authorizer_composeChannelQuery","ChannelAuthorizer","ChannelAuthorizerProxy","channelAuthorizerGenerator","deprecatedAuthorizerOptions","getConfig","opts","statsHost","enableStats","getEnableStatsConfig","getHttpHost","shouldUseTLS","getWebsocketHost","userAuthenticator","buildUserAuthenticator","buildChannelAuthorizer","timelineParams","getWebsocketHostFromCluster","forceTLS","disableStats","user_authenticator","buildChannelAuth","customHandler","authorizer","channel_authorizer","flatPromise","resolve","reject","promise","Promise","res","rej","user_extends","err","_cleanup","_signin","_newSigninPromiseIfNeeded","_onSigninSuccess","serverToUserChannel","UserFacade","signin_requested","_onAuthorize","_signinDoneResolve","_subscribeChannels","ensure_subscribed","reinstateSubscription","subscribe","bind_global","done","setDone","then","app_key","checkAppKey","global_emitter","sessionID","timeline_timeline","getClientFeatures","timelineSender","subscribeAll","isUsingTLS","internal","instances","isReady","t","find","all","timelineSenderTimer","PeriodicTimer","event_name","channel_name","cancelSubscription","signin","pusher_Pusher","app","Application","forum","attribute","secure","websocket","websocket_channels","NewActivity","TypingIndicator","Discussion","DiscussionPage","websocketEventPosted","_this$discussion","discussion","store","pushPayload","oldCount","commentCount","update","redraw","hasFocus","setTitleCount","$","one","websocketEventStreamUpdate","_this$discussion2","_this2","_app$websocket_channe","_app$websocket_channe2","_app$websocket_channe3","_app$websocket_channe4","_app$websocket_channe5","_app$websocket_channe6","_app$websocket_channe7","_app$websocket_channe8","_app$websocket_channe9","_app$websocket_channe10","_app$websocket_channe11","_app$websocket_channe12","_app$websocket_channe13","_app$websocket_channe14","_app$websocket_channe15","_app$websocket_channe16","_app$websocket_channe17","_app$websocket_channe18","_app$websocket_channe19","_app$websocket_channe20","_app$websocket_channe21","_app$websocket_channe22","_app$websocket_channe23","_app$websocket_channe24","_app$websocket_channe25","_app$websocket_channe26","_app$websocket_channe27","_app$websocket_channe28","_app$websocket_channe29","_app$websocket_channe30","Stream","throttle","icon","classList","PostStream","items","_app$session","typingUsers","getTypingUsers","classes","typingIcon","namedUsers","showUsers","preferences","className","translator","trans","users","others","invalidateWhen","getTime","usersTyping","displayName","time","typingTruncationListener","userTyping","discloseOnline","actorIsTyping","_app$session$user$pre","trigger","checkTyping","composer","composingReplyTo","previousContent","fields","content","vnode","typingListener","editor","route","param","match","cancel","_app$session2","_app$session$user$pre2","DiscussionList","Post","IndexPage","Button","WebsocketUpdates","extractText","discussions","getParams","activeTag","tags","getBy","q","sort","_discussion$recipient","_discussion$recipient2","_discussion$tags","_app$discussions$getP","_app$discussions$getP2","_app$current$get","entity","routeName","recipientUsers","recipientGroups","tagIds","tag","isHidden","subscription","subscribedTag","_params$filter","websocketUpdates","has","getPages","pushOnIndex","pushOnView","matches","releaseTimeout","getReleaseInterval","vdom","buttonLabel","autoRelease","children","unshift","component","onclick","releaseUpdates","startTimer","onTimer","second","release","attrs","returned","releaseInterval","onTimerCallback","seconds","_proto","forEach","addDiscussion","default","Flagged","initializers","FlagsDropdown","pushAttributes","flagCount","flags","cache","Model","User","extendUserPreferences","Notification","canViewWhoTypes","NotificationsDropdown","notifications","ItemList","Switch","RealtimeUserPreferencesItems","_preferences","typingIndicatorLoading","onchange","savePreferences","SettingsPage","FieldSet","label","toArray","Symbol","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","baseGetTag","trimmedEndIndex","reTrimStart","baseTrim","string","freeGlobal","global","objectProto","nativeObjectToString","isOwn","unmasked","freeSelf","Function","reWhitespace","index","isObject","toNumber","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","flush","debounced","isInvoking","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","isBinary"],"sourceRoot":""}